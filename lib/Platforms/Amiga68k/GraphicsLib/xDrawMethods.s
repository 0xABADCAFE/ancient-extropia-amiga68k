
; Storm C Compiler
; Mendoza:Extropia/eXtropia/lib/Platforms/Amiga68k/GraphicsLib/xDrawMethods.cpp
	mc68030
	mc68881
	XREF	Delete__xTEXTURE__T
	XREF	Create__xTEXTURE__TsssPvPUj
	XREF	Refresh__xDBSCREEN__T
	XREF	Close__xDBSCREEN__T
	XREF	Open__xDBSCREEN__T
	XREF	Close__xSCREEN__T
	XREF	Open__xSCREEN__T
	XREF	Set__xSCREEN__TP06xDMODEPCc
	XREF	Close__xDBWIN__T
	XREF	Open__xDBWIN__T
	XREF	Set__xDBWIN__TsssssPCc
	XREF	Idle__xDISPLAYIO_ASYNC__T
	XREF	Done__xDISPLAYIO_ASYNC__T
	XREF	Init__xDISPLAYIO_ASYNC__T
	XREF	MoveEvent__xDISPLAYIO__T
	XREF	ResizeEvent__xDISPLAYIO__T
	XREF	Idle__xDISPLAYIO__T
	XREF	HandleEvent__xDISPLAYIO__T
	XREF	ApplyInputModification__xDISPLAYIO__T
	XREF	ViewSurface__xDISPLAY__T
	XREF	DrawSurface__xDISPLAY__T
	XREF	Refresh__xDISPLAY__T
	XREF	Close__xDISPLAY__T
	XREF	Open__xDISPLAY__T
	XREF	Close__xFILEIO__T
	XREF	Write__xFILEIO__TPvUiUi
	XREF	Read__xFILEIO__TPvUiUi
	XREF	Open__xFILEIO__TPCcjj
	XREF	SendPacket__xFILEIO__TPv
	XREF	WaitPacket__xFILEIO__T
	XREF	InputQueued__xINPUT__T
	XREF	Idle__xINPUT__T
	XREF	ExitEvent__xINPUT__T
	XREF	MouseEvent__xINPUT__Tjjj
	XREF	ApplyInputModification__xINPUT__T
	XREF	_0dt__xKEY__T
	XREF	_0ct__xKEY__T
	XREF	KeyEvent__xKEY__Tjsj
	XREF	_0dt__xSURFACE__T
	XREF	_0dt__POOL_ST__T
	XREF	_0ct__POOL_ST__TUsUj
	XREF	FreeT__POOL_ST__TPv
	XREF	NewT__POOL_ST__TPvUs
	XREF	NewT__POOL_ST__TPv
	XREF	Create__POOL_ST__TUsUj
	XREF	PrintAlloc__POOL_ST__TR07ostreamjj
	XREF	_0dt__POOL_LT__T
	XREF	UnLink__xCHAINABLE__T
	XREF	_0ct__xTHREADABLE__TPCcUjjs
	XREF	ShutDown__xTHREADABLE__T
	XREF	Done__xTHREADABLE__T
	XREF	Init__xTHREADABLE__T
	XREF	_0dt__xLOCKABLE__T
	XREF	Zero__MEM__PvUi
	XREF	_system
	XREF	op__leftshift__ostream__Td
	XREF	op__leftshift__ostream__TUj
	XREF	op__leftshift__ostream__Tj
	XREF	op__leftshift__ostream__TPCc
	XREF	op__leftshift__ostream__Tc
	XREF	opfx__ostream__T
	XREF	read__istream__TPci
	XREF	get__istream__TRc
	XREF	getline__istream__TPcic
	XREF	get__istream__TPcic
	XREF	op__rightshift__istream__TRc
	XREF	op__rightshift__istream__TPc
	XREF	doallocate__streambuf__T
	XREF	xsgetn__streambuf__TPci
	XREF	xsputn__streambuf__TPCci
	XREF	underflow__streambuf__T
	XREF	overflow__streambuf__Ti
	XREF	setbuf__streambuf__TPcUi
	XREF	sputn__streambuf__TPCci
	XREF	_0dt__streambuf__T
	XREF	userword__ios__Ti
	XREF	init__ios__TP09streambuf
	XREF	_std__in
	XREF	_std__out
	XREF	_std__err
	XREF	_basefield__ios
	XREF	_adjustfield__ios
	XREF	_floatfield__ios
	XREF	_aNextBit__ios
	XREF	_aNextWord__ios
	XREF	_cin
	XREF	_cout
	XREF	_cerr
	XREF	_clog
	XREF	_st
	XREF	_gxSt
	XREF	_errSev__xBASELIB
	XREF	_errTbl__xBASELIB
	XREF	_SysBase
	XREF	_IntuitionBase
	XREF	_DOSBase
	XREF	_PowerPCBase
	XREF	_sysData__sysBASELIB
	XREF	_msgbuff__sysBASELIB
	XREF	_main__sysBASELIB
	XREF	_allocated__MEM
	XREF	_totSize__MEM
	XREF	_nextFree__MEM
	XREF	_cnt__MEM
	XREF	_maxAllocs__MEM
	XREF	_GfxBase
	XREF	_TimerBase
	XREF	_TimerBase__xTIMABLE
	XREF	_current__xTIMABLE
	XREF	_clockFreq__xTIMABLE
	XREF	_threadCnt__xTHREADABLE
	XREF	_main__xTHREADABLE
	XREF	_CyberGfxBase
	XREF	_formatNames__x2D
	XREF	_surfaceTypes__x2D
	XREF	_Warp3DBase
	XREF	_pointRender__SUPPORTS3D
	XREF	_lineRender__SUPPORTS3D
	XREF	_triangleRender__SUPPORTS3D
	XREF	_otherPrimitives__SUPPORTS3D
	XREF	_shadingModes__SUPPORTS3D
	XREF	_textureModes__SUPPORTS3D
	XREF	_textureFmts__SUPPORTS3D
	XREF	_alpha__SUPPORTS3D
	XREF	_fogModes__SUPPORTS3D
	XREF	_zBuffer__SUPPORTS3D
	XREF	_stencil__SUPPORTS3D
	XREF	_misc__SUPPORTS3D
	XREF	_primNames__SUPPORTS3D
	XREF	_renderNames__SUPPORTS3D
	XREF	_shadingNames__SUPPORTS3D
	XREF	_texModeNames__SUPPORTS3D
	XREF	_texFormatNames__SUPPORTS3D
	XREF	_alphaNames__SUPPORTS3D
	XREF	_fogNames__SUPPORTS3D
	XREF	_zBufferNames__SUPPORTS3D
	XREF	_stencilNames__SUPPORTS3D
	XREF	_miscNames__SUPPORTS3D
	XREF	_hw3D__SUPPORTS3D
	XREF	_context__x3D
	XREF	_drawRegion__x3D
	XREF	_fogData__x3D
	XREF	_flags__x3D
	XREF	_vertices__x3D
	XREF	_currTex__x3D
	XREF	_drawSurface__x3D
	XREF	_currCol__x3D
	XREF	_flags__xGFX
	XREF	_mode__xGFX
	XREF	_numModes__xGFX
	XREF	_rPool__xSURFACE
	XREF	_KeymapBase
	XREF	_useCount__xKEY
	XREF	_DiskfontBase
	XREF	_fontInfo__xDRAW
	XREF	_fontData__xDRAW
	XREF	_flags__xDRAW
	XREF	_flushCnt__xDRAW
	XREF	_cTab__xDRAW
	XREF	_sTab__xDRAW
	XREF	_fault__xDRAW
	XREF	_vBufPos__xDRAW
	XREF	_zDepth__xDRAW
	XREF	_maxVBufPos__xDRAW
	XREF	_vArraySize__xDRAW
	XREF	_vArray__xDRAW
	XREF	_vBuffer__xDRAW
	XREF	_nestCount__xDRAW
	XREF	_currentCol__xDRAW

	SECTION "_0ct__streampos__T:0",CODE

	rts

	SECTION "Line__xDRAW__UjUjUj:0",CODE


;void xDRAW::Line(ruint32 col, RICOORD2D p1, RICOORD2D p2)
	XDEF	Line__xDRAW__UjUjUj
Line__xDRAW__UjUjUj
L250	EQU	-$A0
	link	a5,#L250
	movem.l	d2-d5/a2/a6,-(a7)
	movem.l	$8(a5),d0/d4
	move.l	$10(a5),d3
L247
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d0
	beq.b	L249
L248
;		currentCol = col;
	move.l	d0,_currentCol__xDRAW
;		SetColour(col);
	lea	-$A0(a5),a0
	move.l	d0,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$A0(a5),a1
	jsr	-$168(a6)
L249
;	W3D_Line lin = {0};
	lea	-$90(a5),a0
	clr.l	(a0)+
	moveq	#$E,d0
L251
	clr.l	(a0)+
	dbra	d0,L251
	lea	$40(a0),a0
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
;		register sysVERTEX* v = &lin.v1;
	lea	-$90(a5),a0
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		VTX_X(v)=CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a0,a1
	add.w	#$40,a0
	fmove.d	fp0,$8(a1)
;		VTX_X(v)=CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	fmove.d	fp0,$8(a0)
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		W3D_DrawLine(x3D::Context(), &lin);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$90(a5),a1
	jsr	-$96(a6)
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "LineShA__xDRAW__r14PUjUjUj:0",CODE


;void xDRAW::LineShA(ruint32* col, RICOORD2D p1, RICOORD2D p2)
	XDEF	LineShA__xDRAW__r14PUjUjUj
LineShA__xDRAW__r14PUjUjUj
L253	EQU	-$A4
	link	a5,#L253
	movem.l	d2-d5/a2/a6,-(a7)
	movem.l	$8(a5),d0/d1
L252
;	W3D_Line lin = {0};
	lea	-$90(a5),a0
	clr.l	(a0)+
	moveq	#$E,d2
L254
	clr.l	(a0)+
	dbra	d2,L254
	lea	$40(a0),a0
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
;	register sysVERTEX* v = &lin.v1;
	lea	-$90(a5),a1
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		VTX_X(v)=CoordX(p1);
	move.l	d0,d2
	moveq	#$10,d3
	asr.l	d3,d2
	ext.l	d2
	fmove.l	d2,fp1
	fmove.s	fp1,(a1)
;	VTX_Y(v)=CoordY(p1);
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a1)
;	VTX_Z(v++)=d;
	move.l	a1,a0
	add.w	#$40,a1
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=CoordX(p2);
	move.l	d1,d0
	moveq	#$10,d2
	asr.l	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a1)
;	VTX_Y(v)=CoordY(p2);
	move.l	d1,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a1)
;	VTX_Z(v)=d;
	fmove.d	fp0,$8(a1)
;		p1 = *(col++);
	move.l	(a6)+,d0
;	p2 = 8;
	moveq	#$8,d1
;		ruint32 b = p1;
	move.l	d0,d3
; p1 >>= p2;
	lsr.l	d1,d0
;		ruint32 g = p1;
	move.l	d0,d2
; p1 >>= p2;
	lsr.l	d1,d0
;		ruint32 r = p1;
	move.l	d0,d4
; p1 >>= p2;
	lsr.l	d1,d0
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d0.l*4),d5
;		p2 = 0x000000FF;
	move.l	#$FF,d1
; r = cTab[(r&p2)];
	and.l	d1,d4
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d4.l*4),d4
; g = cTab[(g&p2)];
	and.l	d1,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),d2
; b = cTab[(b&p2)];
	and.l	d1,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),d3
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a1),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d2,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d5,(a0)
;		p1 = *col;
	move.l	(a6),d0
; p2 = 8;
	moveq	#$8,d1
;		b = p1;
	move.l	d0,d3
; p1 >>= p2;
	lsr.l	d1,d0
;		g = p1;
	move.l	d0,d2
; p1 >>= p2;
	lsr.l	d1,d0
;		p2 = 0x000000FF;
	move.l	#$FF,d1
; r = cTab[(p1&p2)];
	and.l	d1,d0
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d0.l*4),d4
; g = cTab[(g&p2)];
	and.l	d1,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),d2
; b = cTab[(b&p2)];
	and.l	d1,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),d3
;		WRITECOLOUR(VTX_C(v+1))
	lea	$40(a1),a0
	add.w	#$20,a0
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d4,(a0)+
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d2,(a0)+
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		W3D_DrawLine(x3D::Context(), &lin);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$90(a5),a1
	jsr	-$96(a6)
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "LineStrip__xDRAW__Ujr14PUjUj:0",CODE


;void xDRAW::LineStrip(ruint32 col, RICOORD2D* p, ruint32 n)
	XDEF	LineStrip__xDRAW__Ujr14PUjUj
LineStrip__xDRAW__Ujr14PUjUj
L270	EQU	-$30
	link	a5,#L270
	movem.l	d2-d4/a2/a3/a6,-(a7)
	move.l	a6,a2
	movem.l	$8(a5),d2/d3
L255
;	sysVERTEX*	v = Vertices(n);
	move.l	d3,d4
	move.l	_vBufPos__xDRAW,d0
	add.l	d4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L259
L256
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L258
L257
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L258
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L259
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	move.l	_vBuffer__xDRAW,a1
	lea	0(a1,d0.l),a0
	add.l	d4,_vBufPos__xDRAW
	or.l	#$40,_flags__xDRAW
	move.l	a0,a3
;		register sysVERTEX* t = v;
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp1
;		rsint32 i=n+1;
	move.l	d3,d1
	addq.l	#1,d1
;		while(--i)
	bra.b	L261
L260
;			VTX_X(t)=CoordX(*p);
	move.l	a2,a1
	move.l	(a1),d0
	moveq	#$10,d4
	asr.l	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;			VTX_Y(t)=CoordY(*(p++));
	move.l	(a2)+,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;			VTX_Z(t++)=d;
	move.l	a0,a1
	add.w	#$40,a0
	fmove.d	fp1,$8(a1)
L261
	subq.l	#1,d1
	tst.l	d1
	bne.b	L260
L262
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d2
	beq.b	L264
L263
;		currentCol = col;
	move.l	d2,_currentCol__xDRAW
;		SetColour(col);
	lea	-$18(a5),a0
	move.l	d2,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d4
	lsr.l	d4,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d4
	lsr.l	d4,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$18(a5),a1
	jsr	-$168(a6)
L264
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		LineStrip(v,n);
	move.l	d3,d2
	lea	-$30(a5),a0
	move.l	d2,(a0)+
	move.l	a3,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	cmp.l	#$C8,d2
	bls.b	L269
L265
	move.l	#$C9,-$30(a5)
	bra.b	L267
L266
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$30(a5),a1
	jsr	-$186(a6)
	lea	-$30(a5),a0
	move.l	4(a0),a0
	lea	$3200(a0),a0
	move.l	a0,-$2C(a5)
	sub.l	#$C8,d2
L267
	cmp.l	#$C8,d2
	bhi.b	L266
L268
	move.l	d2,-$30(a5)
L269
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$30(a5),a1
	jsr	-$186(a6)
	movem.l	(a7)+,d2-d4/a2/a3/a6
	unlk	a5
	rts

	SECTION "Tri__xDRAW__UjUjUjUj:0",CODE


;void xDRAW::Tri(ruint32 col, RICOORD2D p1, RICOORD2D p2, RICOORD2D p
	XDEF	Tri__xDRAW__UjUjUjUj
Tri__xDRAW__UjUjUjUj
L274	EQU	-$D8
	link	a5,#L274
	movem.l	d2-d6/a2/a6,-(a7)
	movem.l	$8(a5),d0/d5
	move.l	$14(a5),d3
	move.l	$10(a5),d4
L271
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d0
	beq.b	L273
L272
;		currentCol = col;
	move.l	d0,_currentCol__xDRAW
;		SetColour(col);
	lea	-$D8(a5),a0
	move.l	d0,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d6
	lsr.l	d6,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d6
	lsr.l	d6,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$D8(a5),a1
	jsr	-$168(a6)
L273
;	W3D_Triangle tri = {0};
	lea	-$C8(a5),a0
	clr.l	(a0)+
	moveq	#$E,d0
L275
	clr.l	(a0)+
	dbra	d0,L275
	lea	$40(a0),a0
	moveq	#$11,d0
L276
	clr.l	(a0)+
	dbra	d0,L276
;		register sysVERTEX* v = &tri.v1;
	lea	-$C8(a5),a0
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		VTX_X(v)=CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a0,a1
	add.w	#$40,a0
	fmove.d	fp0,$8(a1)
;		VTX_X(v)=CoordX(p2);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p2);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a0,a1
	add.w	#$40,a0
	fmove.d	fp0,$8(a1)
;		VTX_X(v)=CoordX(p3);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p3);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	fmove.d	fp0,$8(a0)
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		W3D_DrawTriangle(x3D::Context(), &tri);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$C8(a5),a1
	jsr	-$A2(a6)
	movem.l	(a7)+,d2-d6/a2/a6
	unlk	a5
	rts

	SECTION "TriShA__xDRAW__r14PUjUjUjUj:0",CODE


;void xDRAW::TriShA(ruint32* col, RICOORD2D p1, RICOORD2D p2, RICOORD
	XDEF	TriShA__xDRAW__r14PUjUjUjUj
TriShA__xDRAW__r14PUjUjUjUj
L278	EQU	-$DC
	link	a5,#L278
	movem.l	d2-d5/a2/a6,-(a7)
	movem.l	$8(a5),d0/d1/d5
L277
;	W3D_Triangle tri = {0};
	lea	-$C8(a5),a0
	clr.l	(a0)+
	moveq	#$E,d2
L279
	clr.l	(a0)+
	dbra	d2,L279
	lea	$40(a0),a0
	moveq	#$11,d2
L280
	clr.l	(a0)+
	dbra	d2,L280
;	register sysVERTEX* v = &tri.v1;
	lea	-$C8(a5),a0
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		VTX_X(v)=CoordX(p1);
	move.l	d0,d2
	moveq	#$10,d3
	asr.l	d3,d2
	ext.l	d2
	fmove.l	d2,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p1);
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a0,a1
	add.w	#$40,a0
	fmove.d	fp0,$8(a1)
;		VTX_X(v)=CoordX(p2);
	move.l	d1,d0
	moveq	#$10,d2
	asr.l	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p2);
	move.l	d1,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a0,a1
	add.w	#$40,a0
	fmove.d	fp0,$8(a1)
;		VTX_X(v)=CoordX(p3);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	VTX_Y(v)=CoordY(p3);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	fmove.d	fp0,$8(a0)
;		p1 = *(col++);
	move.l	(a6)+,d0
;  p2 = 8;
	moveq	#$8,d1
;		ruint32 b = p1;
	move.l	d0,d3
; p1 >>= p2;
	lsr.l	d1,d0
;		ruint32 g = p1;
	move.l	d0,d2
; p1 >>= p2;
	lsr.l	d1,d0
;		ruint32 r = p1;
	move.l	d0,d4
; p1 >>= p2;
	lsr.l	d1,d0
;		p3 = cTab[(p1)];
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d0.l*4),d5
;		p2 = 0x000000FF;
	move.l	#$FF,d1
; r = cTab[(r&p2)];
	and.l	d1,d4
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d4.l*4),d4
; g = cTab[(g&p2)];
	and.l	d1,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),d2
; b = cTab[(b&p2)];
	and.l	d1,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),d3
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a0),a1
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a1)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d2,(a1)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a1)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d5,(a1)
;		p1 = *(col++);
	move.l	(a6)+,d0
; p2 = 8;
	moveq	#$8,d1
;		b = p1;
	move.l	d0,d3
; p1 >>= p2;
	lsr.l	d1,d0
;		g = p1;
	move.l	d0,d2
; p1 >>= p2;
	lsr.l	d1,d0
;		p2 = 0x000000FF;
	move.l	#$FF,d1
; r = cTab[(p1&p2)];
	and.l	d1,d0
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d0.l*4),d4
; g = cTab[(g&p2)];
	and.l	d1,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),d2
; b = cTab[(b&p2)];
	and.l	d1,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),d3
;		WRITECOLOUR(VTX_C(v+1))
	lea	$40(a0),a1
	add.w	#$20,a1
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d4,(a1)+
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d2,(a1)+
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d3,(a1)+
;		WRITECOLOUR(VTX_C(v+1))
	move.l	d5,(a1)
;		p1 = *(col++);
	move.l	(a6),d0
; p2 = 8;
	moveq	#$8,d1
;		b = p1;
	move.l	d0,d3
; p1 >>= p2;
	lsr.l	d1,d0
;		g = p1;
	move.l	d0,d2
; p1 >>= p2;
	lsr.l	d1,d0
;		p2 = 0x000000FF;
	move.l	#$FF,d1
; r = cTab[(p1&p2)];
	and.l	d1,d0
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d0.l*4),d4
; g = cTab[(g&p2)];
	and.l	d1,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),d2
; b = cTab[(b&p2)];
	and.l	d1,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),d3
;		WRITECOLOUR(VTX_C(v+2))
	lea	$80(a0),a0
	add.w	#$20,a0
;		WRITECOLOUR(VTX_C(v+2))
	move.l	d4,(a0)+
;		WRITECOLOUR(VTX_C(v+2))
	move.l	d2,(a0)+
;		WRITECOLOUR(VTX_C(v+2))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v+2))
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		W3D_DrawTriangle(x3D::Context(), &tri);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$C8(a5),a1
	jsr	-$A2(a6)
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "Rect__xDRAW__UjUjUj:0",CODE


;void xDRAW::Rect(ruint32 col, RICOORD2D p1, RICOORD2D p2)
	XDEF	Rect__xDRAW__UjUjUj
Rect__xDRAW__UjUjUj
L288	EQU	-$20
	link	a5,#L288
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	movem.l	$8(a5),d2/d4
	move.l	$10(a5),d3
L281
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L285
L282
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L284
L283
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L284
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L285
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d2
	beq.b	L287
L286
;		currentCol = col;
	move.l	d2,_currentCol__xDRAW
;		SetColour(col);
	lea	-$10(a5),a0
	move.l	d2,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$10(a5),a1
	jsr	-$168(a6)
L287
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriStrip(v,4);
	lea	-$20(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$20(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "RectScTx__xDRAW__UjUjUjr14R08xTEXTURE:0",CODE


;void xDRAW::RectScTx(ruint32 col, RICOORD2D p1, RICOORD2D p2, regist
	XDEF	RectScTx__xDRAW__UjUjUjr14R08xTEXTURE
RectScTx__xDRAW__UjUjUjr14R08xTEXTURE
L296	EQU	-$20
	link	a5,#L296
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5,-(a7)
	move.l	a6,a3
	movem.l	$8(a5),d2/d4
	move.l	$10(a5),d3
L289
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L293
L290
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L292
L291
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L292
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L293
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d2
	beq.b	L295
L294
;		currentCol = col;
	move.l	d2,_currentCol__xDRAW
;		SetColour(col);
	lea	-$10(a5),a0
	move.l	d2,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$10(a5),a1
	jsr	-$168(a6)
L295
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	fmove.s	fp5,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp5,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y2;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;  VTX_V(v) = tx.y2;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$20(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$20(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectTlTx__xDRAW__UjUjUjr14R08xTEXTURE:0",CODE


;void xDRAW::RectTlTx(ruint32 col, RICOORD2D p1, RICOORD2D p2, regist
	XDEF	RectTlTx__xDRAW__UjUjUjr14R08xTEXTURE
RectTlTx__xDRAW__UjUjUjr14R08xTEXTURE
L304	EQU	-$20
	link	a5,#L304
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6,-(a7)
	move.l	a6,a3
	movem.l	$8(a5),d2/d4
	move.l	$10(a5),d3
L297
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L301
L298
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L300
L299
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L300
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L301
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d2
	beq.b	L303
L302
;		currentCol = col;
	move.l	d2,_currentCol__xDRAW
;		SetColour(col);
	lea	-$10(a5),a0
	move.l	d2,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d5
	lsr.l	d5,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$10(a5),a1
	jsr	-$168(a6)
L303
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp5
;		rfloat32 x1 = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1 + y2 - y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v) = tx.y1 + y2 - y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$20(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$20(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectShV__xDRAW__r14PUjUjUj:0",CODE


;void xDRAW::RectShV(ruint32* col, RICOORD2D p1, RICOORD2D p2)
	XDEF	RectShV__xDRAW__r14PUjUjUj
RectShV__xDRAW__r14PUjUjUj
L310	EQU	-$28
	link	a5,#L310
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	move.l	a6,a3
	movem.l	$8(a5),d2/d3
L305
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L309
L306
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L308
L307
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L308
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L309
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	a3,a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriStrip(v, 4);
	lea	-$28(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$28(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTxShV__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::RectScTxShV(ruint32* col, RICOORD2D p1, RICOORD2D p2, re
	XDEF	RectScTxShV__xDRAW__r14PUjUjUjr11R08xTEXTURE
RectScTxShV__xDRAW__r14PUjUjUjr11R08xTEXTURE
L316	EQU	-$30
	link	a5,#L316
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5,-(a7)
	move.l	a6,-$20(a5)
	movem.l	$8(a5),d2/d3
L311
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L315
L312
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L314
L313
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L314
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L315
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	fmove.s	fp5,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp5,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y2;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;  VTX_V(v) = tx.y2;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	-$20(a5),a0
	moveq	#4,d0
	add.l	d0,-$20(a5)
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	-$20(a5),a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$30(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$30(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "RectTlTxShV__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::RectTlTxShV(ruint32* col, RICOORD2D p1, RICOORD2D p2, re
	XDEF	RectTlTxShV__xDRAW__r14PUjUjUjr11R08xTEXTURE
RectTlTxShV__xDRAW__r14PUjUjUjr11R08xTEXTURE
L322	EQU	-$30
	link	a5,#L322
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6,-(a7)
	move.l	a6,-$20(a5)
	movem.l	$8(a5),d2/d3
L317
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L321
L318
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L320
L319
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L320
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L321
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp5
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1 + y2 - y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v) = tx.y1 + y2 - y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	-$20(a5),a0
	moveq	#4,d0
	add.l	d0,-$20(a5)
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	-$20(a5),a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$30(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$30(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "RectShH__xDRAW__r14PUjUjUj:0",CODE


;void xDRAW::RectShH(ruint32* col, RICOORD2D p1, RICOORD2D p2)
	XDEF	RectShH__xDRAW__r14PUjUjUj
RectShH__xDRAW__r14PUjUjUj
L328	EQU	-$28
	link	a5,#L328
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	move.l	a6,a3
	movem.l	$8(a5),d2/d3
L323
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L327
L324
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L326
L325
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L326
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L327
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	a3,a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriStrip(v, 4);
	lea	-$28(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$28(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTxShH__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::RectScTxShH(ruint32* col, RICOORD2D p1, RICOORD2D p2, re
	XDEF	RectScTxShH__xDRAW__r14PUjUjUjr11R08xTEXTURE
RectScTxShH__xDRAW__r14PUjUjUjr11R08xTEXTURE
L334	EQU	-$30
	link	a5,#L334
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5,-(a7)
	move.l	a6,-$20(a5)
	movem.l	$8(a5),d2/d3
L329
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L333
L330
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L332
L331
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L332
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L333
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	fmove.s	fp5,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp5,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y2;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;  VTX_V(v) = tx.y2;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	-$20(a5),a0
	moveq	#4,d0
	add.l	d0,-$20(a5)
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	-$20(a5),a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$30(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$30(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "RectTlTxShH__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::RectTlTxShH(ruint32* col, RICOORD2D p1, RICOORD2D p2, re
	XDEF	RectTlTxShH__xDRAW__r14PUjUjUjr11R08xTEXTURE
RectTlTxShH__xDRAW__r14PUjUjUjr11R08xTEXTURE
L340	EQU	-$30
	link	a5,#L340
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6,-(a7)
	move.l	a6,-$20(a5)
	movem.l	$8(a5),d2/d3
L335
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L339
L336
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L338
L337
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L338
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L339
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp5
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v++) = tx.y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1 + y2 - y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v) = tx.y1 + y2 - y1;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	-$20(a5),a0
	moveq	#4,d0
	add.l	d0,-$20(a5)
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	-$20(a5),a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$30(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$30(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "RectShA__xDRAW__r14PUjUjUj:0",CODE


;void xDRAW::RectShA(ruint32* col, RICOORD2D p1, RICOORD2D p2)
	XDEF	RectShA__xDRAW__r14PUjUjUj
RectShA__xDRAW__r14PUjUjUj
L346	EQU	-$28
	link	a5,#L346
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	move.l	a6,a3
	movem.l	$8(a5),d2/d3
L341
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L345
L342
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L344
L343
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L344
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L345
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v++)=d;
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.d	fp0,$8(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	a3,a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriStrip(v, 4);
	lea	-$28(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$28(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTxShA__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::RectScTxShA(ruint32* col, RICOORD2D p1, RICOORD2D p2, re
	XDEF	RectScTxShA__xDRAW__r14PUjUjUjr11R08xTEXTURE
RectScTxShA__xDRAW__r14PUjUjUjr11R08xTEXTURE
L352	EQU	-$54
	link	a5,#L352
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5,-(a7)
	move.l	a3,-$44(a5)
	move.l	a6,a3
	movem.l	$8(a5),d2/d3
L347
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L351
L348
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L350
L349
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L350
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L351
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp0
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	-$44(a5),a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	fmove.s	fp5,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	-$44(a5),a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp5
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp5,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	-$44(a5),a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y1;
	move.l	-$44(a5),a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	-$44(a5),a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	fmove.s	fp2,$14(a0)
;  VTX_V(v++) = tx.y2;
	move.l	-$44(a5),a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp2
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp2,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp0,$8(a0)
; VTX_U(v) = tx.x2;
	move.l	-$44(a5),a0
	move.w	$28(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;  VTX_V(v) = tx.y2;
	move.l	-$44(a5),a0
	move.w	$2A(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	a3,a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	-$44(a5),a0
	move.l	$10(a0),a6
	lea	-$54(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$54(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectTlTxShA__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::RectTlTxShA(ruint32* col, RICOORD2D p1, RICOORD2D p2, re
	XDEF	RectTlTxShA__xDRAW__r14PUjUjUjr11R08xTEXTURE
RectTlTxShA__xDRAW__r14PUjUjUjr11R08xTEXTURE
L358	EQU	-$54
	link	a5,#L358
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6,-(a7)
	move.l	a3,-$44(a5)
	move.l	a6,a3
	movem.l	$8(a5),d2/d3
L353
;	if ((vBufPos+4) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	addq.l	#4,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L357
L354
;	if ((vBufPos+4) >= vArraySize) Flus
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L356
L355
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L356
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L357
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d	= zDepth;
	fmove.d	_zDepth__xDRAW,fp5
;		rfloat32 x1 = CoordX(p1);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp4
; rfloat32 x2 = CoordX(p2);
	move.l	d3,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 y1 = CoordY(p1);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
; rfloat32 y2 = CoordY(p2);
	move.l	d3,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	-$44(a5),a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1;
	move.l	-$44(a5),a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y1;
	move.l	a2,a0
	fmove.s	fp2,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	-$44(a5),a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v++) = tx.y1;
	move.l	-$44(a5),a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x1;
	move.l	a2,a0
	fmove.s	fp4,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1;
	move.l	-$44(a5),a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;						VTX_V(v++) = tx.y1 + y2 - y1;
	move.l	-$44(a5),a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	moveq	#$40,d0
	add.l	a2,d0
	move.l	d0,a2
	fmove.s	fp0,$18(a0)
;		VTX_X(v)=x2;
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y2;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp5,$8(a0)
; VTX_U(v) = tx.x1 + x2 - x1;
	move.l	-$44(a5),a0
	move.w	$24(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp3,fp0
	fsub.x	fp4,fp0
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;	VTX_V(v) = tx.y1 + y2 - y1;
	move.l	-$44(a5),a0
	move.w	$26(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp1,fp0
	fsub.x	fp2,fp0
	move.l	a2,a0
	fmove.s	fp0,$18(a0)
;		vBufPos += 4;
	addq.l	#4,_vBufPos__xDRAW
;		v-=3;
	move.l	#$C0,d0
	neg.l	d0
	add.l	a2,d0
	move.l	d0,a2
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	d2,d4
;		
	lsr.l	d3,d2
;		
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d5
;		
	move.l	#$FF,d3
;		
	and.l	d3,d4
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d4.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$20(a2),a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$40(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	(a3)+,d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$80(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		
	move.l	a3,a0
	move.l	(a0),d2
;		
	moveq	#$8,d3
;		
	move.l	d2,d1
;		
	lsr.l	d3,d2
;		
	move.l	d2,d0
;		
	lsr.l	d3,d2
;		
	move.l	#$FF,d3
;		
	and.l	d3,d2
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d2.l*4),d4
;		
	and.l	d3,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
;		
	and.l	d3,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	lea	$C0(a2),a0
	add.w	#$20,a0
;		
	move.l	d4,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d5,(a0)
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriStripTx(v, 4, tx.tex);
	move.l	-$44(a5),a0
	move.l	$10(a0),a6
	lea	-$54(a5),a0
	move.l	#4,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$54(a5),a1
	jsr	-$AE(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "Circle__xDRAW__UjUjUj:0",CODE


;void xDRAW::Circle(ruint32 col, RICOORD2D p1, ruint32 rad)
	XDEF	Circle__xDRAW__UjUjUj
Circle__xDRAW__UjUjUj
L369	EQU	-$20
	link	a5,#L369
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	$10(a5),d2
	move.l	$8(a5),d3
	move.l	$C(a5),d4
L359
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L363
L360
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L362
L361
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L362
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L363
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d3
	beq.b	L365
L364
;		currentCol = col;
	move.l	d3,_currentCol__xDRAW
;		SetColour(col);
	lea	-$10(a5),a0
	move.l	d3,d1
	move.l	#$FF0000,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$10,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$8,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$18,d3
	asl.l	d3,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$10(a5),a1
	jsr	-$168(a6)
L365
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp2
;		rfloat32 x = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 y = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 rfx = rad;
	fmove.l	d2,fp5
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp1,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp0,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp2,$8(a0)
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp1,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	moveq	#1,d2
	bra	L367
L366
;		
	move.l	#_sTab__xDRAW,a1
	fmove.x	fp5,fp4
	fmul.s	0(a1,d2.l*4),fp4
;		
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp3
	fmul.x	fp5,fp3
;		
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp4,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
	addq.l	#1,d2
L367
	cmp.l	#$10,d2
	blo	L366
L368
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriFan(v, 4*XDRAW_TRIGSIZE+2);
	lea	-$20(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$20(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "CircleShC__xDRAW__r14PUjUjUj:0",CODE


;void xDRAW::CircleShC(ruint32* col, RICOORD2D p1, ruint32 rad)
	XDEF	CircleShC__xDRAW__r14PUjUjUj
CircleShC__xDRAW__r14PUjUjUj
L378	EQU	-$38
	link	a5,#L378
	movem.l	d2-d6/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,a3
	move.l	$C(a5),d2
	move.l	$8(a5),d5
L370
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L374
L371
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L373
L372
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L373
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L374
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp2
;		rfloat32 x = CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 y = CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 rfx = rad;
	fmove.l	d2,fp5
;		p1 = *(col++);
	move.l	(a3)+,d5
;		rad = 8;
	moveq	#$8,d2
;		ruint32 b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 r = p1;
	move.l	d5,d3
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d4
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(r&rad)];
	and.l	d2,d3
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d3.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp1,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp0,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp2,$8(a0)
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a2),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d0,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d1,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)
;		p1 = *(col);
	move.l	a3,a0
	move.l	(a0),d5
; rad = 8;
	moveq	#$8,d2
;		b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(p1&rad)];
	and.l	d2,d5
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	moveq	#6,d5
	asl.l	d5,d2
	add.l	d2,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
;		
	moveq	#1,d2
	bra	L376
L375
;		
	move.l	#_sTab__xDRAW,a1
	fmove.x	fp5,fp4
	fmul.s	0(a1,d2.l*4),fp4
;		
	moveq	#$10,d5
	sub.l	d2,d5
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d5.l*4),fp3
	fmul.x	fp5,fp3
;		
	move.l	d2,d5
	asl.l	#6,d5
	lea	0(a2,d5.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp4,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
	addq.l	#1,d2
L376
	cmp.l	#$10,d2
	blo	L375
L377
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriFan(v, 4*XDRAW_TRIGSIZE+2);
	lea	-$38(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$38(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a3/a6
	unlk	a5
	rts

	SECTION "CircleShPt__xDRAW__r14PUjUjUjUj:0",CODE


;void xDRAW::CircleShPt(ruint32* col, RICOORD2D p1, RICOORD2D p2, rui
	XDEF	CircleShPt__xDRAW__r14PUjUjUjUj
CircleShPt__xDRAW__r14PUjUjUjUj
L387	EQU	-$38
	link	a5,#L387
	movem.l	d2-d6/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,a3
	move.l	$10(a5),d2
	move.l	$8(a5),d5
	move.l	$C(a5),d6
L379
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L383
L380
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L382
L381
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L382
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L383
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp2
;		rfloat32 x = CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 y = CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 rfx = rad;
	fmove.l	d2,fp5
;		VTX_X(v)=x+CoordX(p2);
	move.l	d6,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
	fadd.x	fp1,fp3
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	VTX_Y(v)=y+CoordY(p2);
	move.l	d6,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp3
	fadd.x	fp0,fp3
	move.l	a2,a0
	fmove.s	fp3,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp2,$8(a0)
;		p1 = *(col++);
	move.l	(a3)+,d5
;	p2 = 8;
	moveq	#$8,d6
;		ruint32 b = p1;
	move.l	d5,d1
; p1 >>= p2;
	lsr.l	d6,d5
;		ruint32 g = p1;
	move.l	d5,d0
; p1 >>= p2;
	lsr.l	d6,d5
;		ruint32 r = p1;
	move.l	d5,d3
; p1 >>= p2;
	lsr.l	d6,d5
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d4
;		p2 = 0x000000FF;
	move.l	#$FF,d6
; r = cTab[(r&p2)];
	and.l	d6,d3
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d3.l*4),d3
; g = cTab[(g&p2)];
	and.l	d6,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&p2)];
	and.l	d6,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a2),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d0,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d1,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)
;		p1 = *(col);
	move.l	a3,a0
	move.l	(a0),d5
; p2 = 8;
	moveq	#$8,d6
;		b = p1;
	move.l	d5,d1
; p1 >>= p2;
	lsr.l	d6,d5
;		g = p1;
	move.l	d5,d0
; p1 >>= p2;
	lsr.l	d6,d5
;		p2 = 0x000000FF;
	move.l	#$FF,d6
; r = cTab[(p1&p2)];
	and.l	d6,d5
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d3
; g = cTab[(g&p2)];
	and.l	d6,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&p2)];
	and.l	d6,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	moveq	#6,d5
	asl.l	d5,d2
	add.l	d2,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
;		
	moveq	#1,d2
	bra	L385
L384
;		
	move.l	#_sTab__xDRAW,a1
	fmove.x	fp5,fp4
	fmul.s	0(a1,d2.l*4),fp4
;		
	moveq	#$10,d5
	sub.l	d2,d5
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d5.l*4),fp3
	fmul.x	fp5,fp3
;		
	move.l	d2,d5
	asl.l	#6,d5
	lea	0(a2,d5.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp4,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
	addq.l	#1,d2
L385
	cmp.l	#$10,d2
	blo	L384
L386
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriFan(v, 4*XDRAW_TRIGSIZE+2);
	lea	-$38(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$38(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a3/a6
	unlk	a5
	rts

	SECTION "Elipse__xDRAW__UjUjUj:0",CODE


;void xDRAW::Elipse(ruint32 col, RICOORD2D p1, RICOORD2D rad)
	XDEF	Elipse__xDRAW__UjUjUj
Elipse__xDRAW__UjUjUj
L398	EQU	-$28
	link	a5,#L398
	movem.l	d2-d5/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	$10(a5),d2
	move.l	$8(a5),d3
	move.l	$C(a5),d4
L388
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L392
L389
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L391
L390
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L391
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L392
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d3
	beq.b	L394
L393
;		currentCol = col;
	move.l	d3,_currentCol__xDRAW
;		SetColour(col);
	lea	-$18(a5),a0
	move.l	d3,d1
	move.l	#$FF0000,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$10,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$8,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$18,d3
	asl.l	d3,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$18(a5),a1
	jsr	-$168(a6)
L394
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp2
;		rfloat32 x = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 y = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 rfx = CoordX(rad);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,-$8(a5)
;	rfloat32 rfy = CoordY(rad);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp5
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp1,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp0,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp2,$8(a0)
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp1,fp3
	fadd.s	-$8(a5),fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp1,fp3
	fsub.s	-$8(a5),fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	moveq	#1,d2
	bra	L396
L395
;		
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp4
;		
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp3
;		
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;		
	fmove.s	-$8(a5),fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.s	-$8(a5),fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.s	-$8(a5),fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$400,a0
;		
	fmul.s	-$8(a5),fp3
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp5,fp3
	fmul.x	fp4,fp3
	fmove.x	fp0,fp4
	fsub.x	fp3,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp2,$8(a0)
	addq.l	#1,d2
L396
	cmp.l	#$10,d2
	blo	L395
L397
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriFan(v, 4*XDRAW_TRIGSIZE+2);
	lea	-$28(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$28(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d5/a2/a6
	unlk	a5
	rts

	SECTION "ElipseShC__xDRAW__r14PUjUjUj:0",CODE


;void xDRAW::ElipseShC(ruint32* col, RICOORD2D p1, RICOORD2D rad)
	XDEF	ElipseShC__xDRAW__r14PUjUjUj
ElipseShC__xDRAW__r14PUjUjUj
L407	EQU	-$40
	link	a5,#L407
	movem.l	d2-d6/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,a3
	move.l	$C(a5),d2
	move.l	$8(a5),d5
L399
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L403
L400
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L402
L401
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L402
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L403
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp2
;		rfloat32 x = CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 y = CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 rfx = CoordX(rad);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,-$30(a5)
;	rfloat32 rfy = CoordY(rad);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp5
;		p1 = *(col++);
	move.l	(a3)+,d5
;  rad = 8;
	moveq	#$8,d2
;		ruint32 b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 r = p1;
	move.l	d5,d3
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d4
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(r&rad)];
	and.l	d2,d3
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d3.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp1,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp0,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp2,$8(a0)
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a2),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d0,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d1,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)
;		p1 = *(col);
	move.l	a3,a0
	move.l	(a0),d5
; rad = 8;
	moveq	#$8,d2
;		b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(p1&rad)];
	and.l	d2,d5
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fadd.s	-$30(a5),fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fsub.s	-$30(a5),fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	moveq	#6,d5
	asl.l	d5,d2
	add.l	d2,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
;		
	moveq	#1,d2
	bra	L405
L404
;		
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp4
;		
	moveq	#$10,d5
	sub.l	d2,d5
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d5.l*4),fp3
;		
	move.l	d2,d5
	asl.l	#6,d5
	lea	0(a2,d5.l),a0
	add.w	#$40,a0
;		
	fmove.s	-$30(a5),fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.s	-$30(a5),fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.s	-$30(a5),fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmul.s	-$30(a5),fp3
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp5,fp3
	fmul.x	fp4,fp3
	fmove.x	fp0,fp4
	fsub.x	fp3,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
	addq.l	#1,d2
L405
	cmp.l	#$10,d2
	blo	L404
L406
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriFan(v, 4*XDRAW_TRIGSIZE+2);
	lea	-$40(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$40(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a3/a6
	unlk	a5
	rts

	SECTION "ElipseShPt__xDRAW__r14PUjUjUjUj:0",CODE


;void xDRAW::ElipseShPt(ruint32* col, RICOORD2D p1, RICOORD2D p2, RIC
	XDEF	ElipseShPt__xDRAW__r14PUjUjUjUj
ElipseShPt__xDRAW__r14PUjUjUjUj
L416	EQU	-$40
	link	a5,#L416
	movem.l	d2-d6/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,a3
	move.l	$10(a5),d2
	move.l	$8(a5),d5
	move.l	$C(a5),d6
L408
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L412
L409
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L411
L410
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L411
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L412
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp2
;		rfloat32 x = CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 y = CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 rfx = CoordX(rad);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,-$30(a5)
;	rfloat32 rfy = CoordY(rad);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp5
;		v[0].x=x+CoordX(p2);
	move.l	d6,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
	fadd.x	fp1,fp3
	move.l	a2,a0
	fmove.s	fp3,(a0)
;	v[0].y=y+CoordY(p2);
	move.l	d6,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp3
	fadd.x	fp0,fp3
	move.l	a2,a0
	fmove.s	fp3,4(a0)
;	v[0].z=d;
	move.l	a2,a0
	fmove.d	fp2,$8(a0)
;		p1 = *(col++);
	move.l	(a3)+,d5
;	p2 = 8;
	moveq	#$8,d6
;		ruint32 b = p1;
	move.l	d5,d1
; p1 >>= p2;
	lsr.l	d6,d5
;		ruint32 g = p1;
	move.l	d5,d0
; p1 >>= p2;
	lsr.l	d6,d5
;		ruint32 r = p1;
	move.l	d5,d3
; p1 >>= p2;
	lsr.l	d6,d5
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d4
;		p2 = 0x000000FF;
	move.l	#$FF,d6
; r = cTab[(r&p2)];
	and.l	d6,d3
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d3.l*4),d3
; g = cTab[(g&p2)];
	and.l	d6,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&p2)];
	and.l	d6,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a2),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d0,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d1,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)
;		p1 = *(col);
	move.l	a3,a0
	move.l	(a0),d5
;	p2 = 8;
	moveq	#$8,d6
;		b = p1;
	move.l	d5,d1
; p1 >>= p2;
	lsr.l	d6,d5
;		g = p1;
	move.l	d5,d0
; p1 >>= p2;
	lsr.l	d6,d5
;		p2 = 0x000000FF;
	move.l	#$FF,d6
; r = cTab[(p1&p2)];
	and.l	d6,d5
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d3
; g = cTab[(g&p2)];
	and.l	d6,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&p2)];
	and.l	d6,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fadd.s	-$30(a5),fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp1,fp3
	fsub.s	-$30(a5),fp3
	fmove.s	fp3,(a0)
;		
	fmove.s	fp0,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	moveq	#6,d5
	asl.l	d5,d2
	add.l	d2,a0
;		
	fmove.s	fp1,(a0)
;		
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
;		
	moveq	#1,d2
	bra	L414
L413
;		
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp4
;		
	moveq	#$10,d5
	sub.l	d2,d5
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d5.l*4),fp3
;		
	move.l	d2,d5
	asl.l	#6,d5
	lea	0(a2,d5.l),a0
	add.w	#$40,a0
;		
	fmove.s	-$30(a5),fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.s	-$30(a5),fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.s	-$30(a5),fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmul.s	-$30(a5),fp3
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp5,fp3
	fmul.x	fp4,fp3
	fmove.x	fp0,fp4
	fsub.x	fp3,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp2,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
	addq.l	#1,d2
L414
	cmp.l	#$10,d2
	blo	L413
L415
;		vBufPos += 4*XDRAW_TRIGSIZE+2;
	add.l	#$42,_vBufPos__xDRAW
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Disable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		TriFan(v, 4*XDRAW_TRIGSIZE+2);
	lea	-$40(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$40(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a3/a6
	unlk	a5
	rts

	SECTION "CircleScTx__xDRAW__UjUjUjr14R08xTEXTURE:0",CODE


;void xDRAW::CircleScTx(ruint32 col, RICOORD2D p1, ruint32 rad, regis
	XDEF	CircleScTx__xDRAW__UjUjUjr14R08xTEXTURE
CircleScTx__xDRAW__UjUjUjr14R08xTEXTURE
L430	EQU	-$24
	link	a5,#L430
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,a3
	move.l	$10(a5),d2
	move.l	$8(a5),d3
	move.l	$C(a5),d4
L417
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L421
L418
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L420
L419
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L420
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L421
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d3
	beq.b	L423
L422
;		currentCol = col;
	move.l	d3,_currentCol__xDRAW
;		SetColour(col);
	lea	-$14(a5),a0
	move.l	d3,d1
	move.l	#$FF0000,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$10,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$8,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$18,d3
	asl.l	d3,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$14(a5),a1
	jsr	-$168(a6)
L423
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp3
;		rfloat32 x = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 y = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 rfx = rad;
	fmove.l	d2,fp2
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp0,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp3,$8(a0)
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp4
	fsub.x	fp2,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp0,fp4
	fadd.x	fp2,fp4
	fmove.s	fp4,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp4
	fadd.x	fp2,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp0,fp4
	fsub.x	fp2,fp4
	fmove.s	fp4,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp4
	fsub.x	fp2,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	moveq	#1,d2
	bra	L425
L424
;		
	move.l	#_sTab__xDRAW,a1
	fmove.x	fp2,fp5
	fmul.s	0(a1,d2.l*4),fp5
;		
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp4
	fmul.x	fp2,fp4
;		
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp0,fp6
	fadd.x	fp5,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp0,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp6
	fadd.x	fp5,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp0,fp6
	fsub.x	fp5,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp0,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp4
	fsub.x	fp5,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
	addq.l	#1,d2
L425
	cmp.l	#$10,d2
	blo	L424
L426
;			x		= (tx.x1 + tx.x2)/2F;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$28(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp0
	fdiv.s	#$.40000000,fp0
;			y		= (tx.y1 + tx.y2)/2F;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$2A(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp1
	fdiv.s	#$.40000000,fp1
;			rfx	= (tx.x2 - tx.x1)/2F;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$24(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp2
	fdiv.s	#$.40000000,fp2
;			rfloat32 rfy	= (tx.y2 - tx.y1)/2F;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$26(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp5
	fdiv.s	#$.40000000,fp5
;			
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;			
	move.l	a2,a0
	fmove.s	fp1,$18(a0)
;			
	moveq	#$10,d2
;			
	lea	$40(a2),a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$28(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$2A(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$24(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$18(a0)
;			
	moveq	#1,d2
	bra	L428
L427
;			
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp4
;			
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp3
;			
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp2,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp5,fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmul.x	fp2,fp3
	fmove.x	fp0,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,$14(a0)
;			
	fmove.x	fp5,fp3
	fmul.x	fp4,fp3
	fmove.x	fp1,fp4
	fsub.x	fp3,fp4
	fmove.s	fp4,$18(a0)
	addq.l	#1,d2
L428
	cmp.l	#$10,d2
	blo	L427
L429
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriFanTx(v, 4*XDRAW_TRIGSIZE+2, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$24(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$24(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "CircleScTxShC__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::CircleScTxShC(ruint32* col, RICOORD2D p1, ruint32 rad, r
	XDEF	CircleScTxShC__xDRAW__r14PUjUjUjr11R08xTEXTURE
CircleScTxShC__xDRAW__r14PUjUjUjr11R08xTEXTURE
L442	EQU	-$40
	link	a5,#L442
	movem.l	d2-d6/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,-$30(a5)
	move.l	$C(a5),d2
	move.l	$8(a5),d5
L431
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L435
L432
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L434
L433
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L434
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L435
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp3
;		rfloat32 x = CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 y = CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 rfx = rad;
	fmove.l	d2,fp2
;		p1 = *(col++);
	move.l	-$30(a5),a0
	moveq	#4,d0
	add.l	d0,-$30(a5)
	move.l	(a0),d5
;		rad = 8;
	moveq	#$8,d2
;		ruint32 b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 r = p1;
	move.l	d5,d3
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d4
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(r&rad)];
	and.l	d2,d3
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d3.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp0,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp3,$8(a0)
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a2),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d0,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d1,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)
;		p1 = *(col);
	move.l	-$30(a5),a0
	move.l	(a0),d5
; rad = 8;
	moveq	#$8,d2
;		b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(p1&rad)];
	and.l	d2,d5
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp4
	fsub.x	fp2,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp0,fp4
	fadd.x	fp2,fp4
	fmove.s	fp4,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp4
	fadd.x	fp2,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp0,fp4
	fsub.x	fp2,fp4
	fmove.s	fp4,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	moveq	#6,d5
	asl.l	d5,d2
	add.l	d2,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp4
	fsub.x	fp2,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
;		
	moveq	#1,d2
	bra	L437
L436
;		
	move.l	#_sTab__xDRAW,a1
	fmove.x	fp2,fp5
	fmul.s	0(a1,d2.l*4),fp5
;		
	moveq	#$10,d5
	sub.l	d2,d5
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d5.l*4),fp4
	fmul.x	fp2,fp4
;		
	move.l	d2,d5
	asl.l	#6,d5
	lea	0(a2,d5.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp0,fp6
	fadd.x	fp5,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp0,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp6
	fadd.x	fp5,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp0,fp6
	fsub.x	fp5,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp0,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp1,fp4
	fsub.x	fp5,fp4
	fmove.s	fp4,4(a0)
;		
	fmove.d	fp3,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
	addq.l	#1,d2
L437
	cmp.l	#$10,d2
	blo	L436
L438
;			x		= (tx.x1 + tx.x2)/2F;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$28(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp0
	fdiv.s	#$.40000000,fp0
;			y		= (tx.y1 + tx.y2)/2F;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$2A(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp1
	fdiv.s	#$.40000000,fp1
;			rfx	= (tx.x2 - tx.x1)/2F;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$24(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp2
	fdiv.s	#$.40000000,fp2
;			rfloat32 rfy	= (tx.y2 - tx.y1)/2F;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$26(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp5
	fdiv.s	#$.40000000,fp5
;			
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;			
	move.l	a2,a0
	fmove.s	fp1,$18(a0)
;			
	moveq	#$10,d2
;			
	lea	$40(a2),a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$28(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$2A(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$24(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$18(a0)
;			
	moveq	#1,d2
	bra	L440
L439
;			
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp4
;			
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp3
;			
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp2,fp6
	fmul.x	fp3,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp5,fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp5,fp6
	fmul.x	fp3,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmul.x	fp2,fp3
	fmove.x	fp0,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,$14(a0)
;			
	fmove.x	fp5,fp3
	fmul.x	fp4,fp3
	fmove.x	fp1,fp4
	fsub.x	fp3,fp4
	fmove.s	fp4,$18(a0)
	addq.l	#1,d2
L440
	cmp.l	#$10,d2
	blo	L439
L441
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriFanTx(v, 4*XDRAW_TRIGSIZE+2, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$40(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$40(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a6
	unlk	a5
	rts

	SECTION "ElipseScTx__xDRAW__UjUjUjr14R08xTEXTURE:0",CODE


;void xDRAW::ElipseScTx(ruint32 col, RICOORD2D p1, RICOORD2D rad, reg
	XDEF	ElipseScTx__xDRAW__UjUjUjr14R08xTEXTURE
ElipseScTx__xDRAW__UjUjUjr14R08xTEXTURE
L456	EQU	-$2C
	link	a5,#L456
	movem.l	d2-d5/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,a3
	move.l	$10(a5),d2
	move.l	$8(a5),d3
	move.l	$C(a5),d4
L443
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L447
L444
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L446
L445
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L446
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L447
;	if (col != currentCol)
	cmp.l	_currentCol__xDRAW,d3
	beq.b	L449
L448
;		currentCol = col;
	move.l	d3,_currentCol__xDRAW
;		SetColour(col);
	lea	-$1C(a5),a0
	move.l	d3,d1
	move.l	#$FF0000,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$10,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	moveq	#$8,d5
	lsr.l	d5,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$8,d3
	lsr.l	d3,d0
	move.l	d1,d3
	and.l	d0,d3
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d3.l*4),(a0)+
	moveq	#$18,d3
	asl.l	d3,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$1C(a5),a1
	jsr	-$168(a6)
L449
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp4
;		rfloat32 x = CoordX(p1);
	move.l	d4,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 y = CoordY(p1);
	move.l	d4,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 rfx = CoordX(rad);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;	rfloat32 rfy = CoordY(rad);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp0,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp4,$8(a0)
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp5
	fsub.x	fp2,fp5
	fmove.s	fp5,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp0,fp5
	fadd.x	fp3,fp5
	fmove.s	fp5,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp5
	fadd.x	fp2,fp5
	fmove.s	fp5,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;		
	fmove.x	fp0,fp5
	fsub.x	fp3,fp5
	fmove.s	fp5,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp5
	fsub.x	fp2,fp5
	fmove.s	fp5,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	moveq	#1,d2
	bra	L451
L450
;		
	move.l	#_sTab__xDRAW,a1
	move.l	0(a1,d2.l*4),-$C(a5)
;		
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp5
;		
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp3,fp6
	fmul.s	-$C(a5),fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp2,fp6
	fmul.x	fp5,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp3,fp6
	fmul.x	fp5,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp2,fp6
	fmul.s	-$C(a5),fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	add.w	#$400,a0
;		
	fmove.x	fp3,fp6
	fmul.s	-$C(a5),fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp2,fp6
	fmul.x	fp5,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	add.w	#$400,a0
;		
	fmul.x	fp3,fp5
	fmove.x	fp0,fp6
	fsub.x	fp5,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp2,fp5
	fmul.s	-$C(a5),fp5
	fmove.x	fp1,fp6
	fsub.x	fp5,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp4,$8(a0)
	addq.l	#1,d2
L451
	cmp.l	#$10,d2
	blo	L450
L452
;			x		= (tx.x1 + tx.x2)/2F;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$28(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp0
	fdiv.s	#$.40000000,fp0
;			y		= (tx.y1 + tx.y2)/2F;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$2A(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp1
	fdiv.s	#$.40000000,fp1
;			rfx	= (tx.x2 - tx.x1)/2F;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$24(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp3
	fdiv.s	#$.40000000,fp3
;			rfy	= (tx.y2 - tx.y1)/2F;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$26(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp2
	fdiv.s	#$.40000000,fp2
;			
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;			
	move.l	a2,a0
	fmove.s	fp1,$18(a0)
;			
	moveq	#$10,d2
;			
	lea	$40(a2),a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$28(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$2A(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$24(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$18(a0)
;			
	moveq	#1,d2
	bra	L454
L453
;			
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp5
;			
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp4
;			
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;			
	fmove.x	fp3,fp6
	fmul.x	fp5,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp3,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp2,fp6
	fmul.x	fp5,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp3,fp6
	fmul.x	fp5,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmul.x	fp3,fp4
	fmove.x	fp0,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,$14(a0)
;			
	fmove.x	fp2,fp4
	fmul.x	fp5,fp4
	fmove.x	fp1,fp5
	fsub.x	fp4,fp5
	fmove.s	fp5,$18(a0)
	addq.l	#1,d2
L454
	cmp.l	#$10,d2
	blo	L453
L455
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Disable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#2,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriFanTx(v, 4*XDRAW_TRIGSIZE+2, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$2C(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$2C(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d5/a2/a3/a6
	unlk	a5
	rts

	SECTION "ElipseScTxShC__xDRAW__r14PUjUjUjr11R08xTEXTURE:0",CODE


;void xDRAW::ElipseScTxShC(ruint32* col, RICOORD2D p1, RICOORD2D rad,
	XDEF	ElipseScTxShC__xDRAW__r14PUjUjUjr11R08xTEXTURE
ElipseScTxShC__xDRAW__r14PUjUjUjr11R08xTEXTURE
L468	EQU	-$48
	link	a5,#L468
	movem.l	d2-d6/a2/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	a6,-$38(a5)
	move.l	$C(a5),d2
	move.l	$8(a5),d5
L457
;	if (vBufPos+(4*XDRAW_TRIGSIZE+2) >= vArraySize) 
	move.l	_vBufPos__xDRAW,d0
	add.l	#$42,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L461
L458
;	if (vBufPos+(4*XDR
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L460
L459
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L460
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L461
;	register sysVERTEX* v = vBuffer+vBufPos;
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	add.l	_vBuffer__xDRAW,d0
	move.l	d0,a2
;		rfloat64 d = zDepth;
	fmove.d	_zDepth__xDRAW,fp4
;		rfloat32 x = CoordX(p1);
	move.l	d5,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 y = CoordY(p1);
	move.l	d5,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 rfx = CoordX(rad);
	move.l	d2,d0
	moveq	#$10,d1
	asr.l	d1,d0
	ext.l	d0
	fmove.l	d0,fp3
;	rfloat32 rfy = CoordY(rad);
	move.l	d2,d0
	and.l	#$FFFF,d0
	ext.l	d0
	fmove.l	d0,fp2
;		p1 = *(col++);
	move.l	-$38(a5),a0
	moveq	#4,d0
	add.l	d0,-$38(a5)
	move.l	(a0),d5
;  rad = 8;
	moveq	#$8,d2
;		ruint32 b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 r = p1;
	move.l	d5,d3
; p1 >>= rad;
	lsr.l	d2,d5
;		ruint32 a = cTab[(p1)];
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d4
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(r&rad)];
	and.l	d2,d3
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d3.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		VTX_X(v)=x;
	move.l	a2,a0
	fmove.s	fp0,(a0)
;	VTX_Y(v)=y;
	move.l	a2,a0
	fmove.s	fp1,4(a0)
;	VTX_Z(v)=d;
	move.l	a2,a0
	fmove.d	fp4,$8(a0)
;		WRITECOLOUR(VTX_C(v))
	lea	$20(a2),a0
;		WRITECOLOUR(VTX_C(v))
	move.l	d3,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d0,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d1,(a0)+
;		WRITECOLOUR(VTX_C(v))
	move.l	d4,(a0)
;		p1 = *(col);
	move.l	-$38(a5),a0
	move.l	(a0),d5
; rad = 8;
	moveq	#$8,d2
;		b = p1;
	move.l	d5,d1
; p1 >>= rad;
	lsr.l	d2,d5
;		g = p1;
	move.l	d5,d0
; p1 >>= rad;
	lsr.l	d2,d5
;		rad = 0x000000FF;
	move.l	#$FF,d2
; r = cTab[(p1&rad)];
	and.l	d2,d5
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d5.l*4),d3
; g = cTab[(g&rad)];
	and.l	d2,d0
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d0.l*4),d0
; b = cTab[(b&rad)];
	and.l	d2,d1
	move.l	#_cTab__xDRAW,a1
	move.l	0(a1,d1.l*4),d1
;		
	moveq	#$10,d2
;		
	lea	$40(a2),a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp5
	fsub.x	fp2,fp5
	fmove.s	fp5,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp0,fp5
	fadd.x	fp3,fp5
	fmove.s	fp5,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp5
	fadd.x	fp2,fp5
	fmove.s	fp5,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	move.l	d2,d5
	moveq	#6,d6
	asl.l	d6,d5
	add.l	d5,a0
;		
	fmove.x	fp0,fp5
	fsub.x	fp3,fp5
	fmove.s	fp5,(a0)
;		
	fmove.s	fp1,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	moveq	#6,d5
	asl.l	d5,d2
	add.l	d2,a0
;		
	fmove.s	fp0,(a0)
;		
	fmove.x	fp1,fp5
	fsub.x	fp2,fp5
	fmove.s	fp5,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
;		
	moveq	#1,d2
	bra	L463
L462
;		
	move.l	#_sTab__xDRAW,a1
	move.l	0(a1,d2.l*4),-$34(a5)
;		
	moveq	#$10,d5
	sub.l	d2,d5
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d5.l*4),fp5
;		
	move.l	d2,d5
	asl.l	#6,d5
	lea	0(a2,d5.l),a0
	add.w	#$40,a0
;		
	fmove.x	fp3,fp6
	fmul.s	-$34(a5),fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp2,fp6
	fmul.x	fp5,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp3,fp6
	fmul.x	fp5,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp2,fp6
	fmul.s	-$34(a5),fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmove.x	fp3,fp6
	fmul.s	-$34(a5),fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		
	fmove.x	fp2,fp6
	fmul.x	fp5,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	lea	$20(a0),a1
;		
	move.l	d3,(a1)+
;		
	move.l	d0,(a1)+
;		
	move.l	d1,(a1)+
;		
	move.l	d4,(a1)
;		
	add.w	#$400,a0
;		
	fmul.x	fp3,fp5
	fmove.x	fp0,fp6
	fsub.x	fp5,fp6
	fmove.s	fp6,(a0)
;		
	fmove.x	fp2,fp5
	fmul.s	-$34(a5),fp5
	fmove.x	fp1,fp6
	fsub.x	fp5,fp6
	fmove.s	fp6,4(a0)
;		
	fmove.d	fp4,$8(a0)
;		
	add.w	#$20,a0
;		
	move.l	d3,(a0)+
;		
	move.l	d0,(a0)+
;		
	move.l	d1,(a0)+
;		
	move.l	d4,(a0)
	addq.l	#1,d2
L463
	cmp.l	#$10,d2
	blo	L462
L464
;			x		= (tx.x1 + tx.x2)/2F;
	move.l	a3,a0
	move.w	$24(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$28(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp0
	fdiv.s	#$.40000000,fp0
;			y		= (tx.y1 + tx.y2)/2F;
	move.l	a3,a0
	move.w	$26(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$2A(a0),d1
	ext.l	d1
	add.l	d1,d0
	fmove.l	d0,fp1
	fdiv.s	#$.40000000,fp1
;			rfx	= (tx.x2 - tx.x1)/2F;
	move.l	a3,a0
	move.w	$28(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$24(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp3
	fdiv.s	#$.40000000,fp3
;			rfy	= (tx.y2 - tx.y1)/2F;
	move.l	a3,a0
	move.w	$2A(a0),d0
	ext.l	d0
	move.l	a3,a0
	move.w	$26(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp2
	fdiv.s	#$.40000000,fp2
;			
	move.l	a2,a0
	fmove.s	fp0,$14(a0)
;			
	move.l	a2,a0
	fmove.s	fp1,$18(a0)
;			
	moveq	#$10,d2
;			
	lea	$40(a2),a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$28(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$2A(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d1
	asl.l	d1,d0
	add.l	d0,a0
;			
	move.l	a3,a1
	move.w	$24(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$14(a0)
;			
	fmove.s	fp1,$18(a0)
;			
	move.l	d2,d0
	moveq	#6,d2
	asl.l	d2,d0
	add.l	d0,a0
;			
	fmove.s	fp0,$14(a0)
;			
	move.l	a3,a1
	move.w	$26(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmove.s	fp4,$18(a0)
;			
	moveq	#1,d2
	bra	L466
L465
;			
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d2.l*4),fp5
;			
	moveq	#$10,d0
	sub.l	d2,d0
	move.l	#_sTab__xDRAW,a1
	fmove.s	0(a1,d0.l*4),fp4
;			
	move.l	d2,d0
	asl.l	#6,d0
	lea	0(a2,d0.l),a0
	add.w	#$40,a0
;			
	fmove.x	fp3,fp6
	fmul.x	fp5,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp3,fp6
	fmul.x	fp4,fp6
	fmove.s	fp0,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp2,fp6
	fmul.x	fp5,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmove.x	fp3,fp6
	fmul.x	fp5,fp6
	fmove.s	fp0,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,$14(a0)
;			
	fmove.x	fp2,fp6
	fmul.x	fp4,fp6
	fmove.s	fp1,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,$18(a0)
;			
	add.w	#$400,a0
;			
	fmul.x	fp3,fp4
	fmove.x	fp0,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,$14(a0)
;			
	fmove.x	fp2,fp4
	fmul.x	fp5,fp4
	fmove.x	fp1,fp5
	fsub.x	fp4,fp5
	fmove.s	fp5,$18(a0)
	addq.l	#1,d2
L466
	cmp.l	#$10,d2
	blo	L465
L467
;		vBufPos += (4*XDRAW_TRIGSIZE+2);
	add.l	#$42,_vBufPos__xDRAW
;		Enable(GOURAUD);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$400,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		Enable(TEXTURE);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	move.l	#$100,d0
	moveq	#1,d1
	jsr	-$30(a6)
;		TriFanTx(v, 4*XDRAW_TRIGSIZE+2, tx.tex);
	move.l	a3,a0
	move.l	$10(a0),a6
	lea	-$48(a5),a0
	move.l	#$42,(a0)+
	move.l	a2,(a0)+
	move.l	a6,(a0)+
	clr.l	(a0)+
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$48(a5),a1
	jsr	-$A8(a6)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a6
	unlk	a5
	rts

	END
