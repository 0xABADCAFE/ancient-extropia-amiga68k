
; Storm C Compiler
; Mendoza:Extropia/eXtropia/lib/Platforms/Amiga68k/GraphicsLib/DrawListMethods.cpp
	mc68030
	mc68881
	XREF	_0dt__DRAWLIST__T
	XREF	ExecuteBuffer__VGPU__sP08DCOMMANDP07DVERTEXjj
	XREF	Delete__xTEXFONT__T
	XREF	Delete__xTEXSURF__T
	XREF	Create__xTEXSURF__TssEPvPUj
	XREF	Refresh__xDBSCREEN__T
	XREF	Close__xDBSCREEN__T
	XREF	Open__xDBSCREEN__T
	XREF	Close__xSCREEN__T
	XREF	Open__xSCREEN__T
	XREF	Set__xSCREEN__TP06xDMODEPCc
	XREF	Close__xDBWIN__T
	XREF	Open__xDBWIN__T
	XREF	Set__xDBWIN__TsssssPCc
	XREF	Idle__xDISPLAYIO_ASYNC__T
	XREF	Done__xDISPLAYIO_ASYNC__T
	XREF	Init__xDISPLAYIO_ASYNC__T
	XREF	MoveEvent__xDISPLAYIO__T
	XREF	ResizeEvent__xDISPLAYIO__T
	XREF	Idle__xDISPLAYIO__T
	XREF	HandleEvent__xDISPLAYIO__T
	XREF	ApplyInputModification__xDISPLAYIO__T
	XREF	ViewSurface__xDISPLAY__T
	XREF	DrawSurface__xDISPLAY__T
	XREF	Refresh__xDISPLAY__T
	XREF	Close__xDISPLAY__T
	XREF	Open__xDISPLAY__T
	XREF	Close__xFILEIO__T
	XREF	Write__xFILEIO__TPvUiUi
	XREF	Read__xFILEIO__TPvUiUi
	XREF	Open__xFILEIO__TPCcjj
	XREF	SendPacket__xFILEIO__TPv
	XREF	WaitPacket__xFILEIO__T
	XREF	InputQueued__xINPUT__T
	XREF	Idle__xINPUT__T
	XREF	ExitEvent__xINPUT__T
	XREF	MouseEvent__xINPUT__Tjjj
	XREF	ApplyInputModification__xINPUT__T
	XREF	_0dt__xKEY__T
	XREF	_0ct__xKEY__T
	XREF	KeyEvent__xKEY__Tjsj
	XREF	_0dt__xSURFACE__T
	XREF	_0dt__POOL_ST__T
	XREF	_0ct__POOL_ST__TUsUj
	XREF	FreeT__POOL_ST__TPv
	XREF	NewT__POOL_ST__TPvUs
	XREF	NewT__POOL_ST__TPv
	XREF	Create__POOL_ST__TUsUj
	XREF	PrintAlloc__POOL_ST__TR07ostreamjj
	XREF	_0dt__POOL_LT__T
	XREF	DrawSurface__x3D__P08xSURFACE
	XREF	UnLink__xCHAINABLE__T
	XREF	_0ct__xTHREADABLE__TPCcUjjs
	XREF	ShutDown__xTHREADABLE__T
	XREF	Done__xTHREADABLE__T
	XREF	Init__xTHREADABLE__T
	XREF	_0dt__xLOCKABLE__T
	XREF	Zero__MEM__PvUi
	XREF	_system
	XREF	op__leftshift__ostream__Td
	XREF	op__leftshift__ostream__TUj
	XREF	op__leftshift__ostream__Tj
	XREF	op__leftshift__ostream__TPCc
	XREF	op__leftshift__ostream__Tc
	XREF	opfx__ostream__T
	XREF	read__istream__TPci
	XREF	get__istream__TRc
	XREF	getline__istream__TPcic
	XREF	get__istream__TPcic
	XREF	op__rightshift__istream__TRc
	XREF	op__rightshift__istream__TPc
	XREF	doallocate__streambuf__T
	XREF	xsgetn__streambuf__TPci
	XREF	xsputn__streambuf__TPCci
	XREF	underflow__streambuf__T
	XREF	overflow__streambuf__Ti
	XREF	setbuf__streambuf__TPcUi
	XREF	sputn__streambuf__TPCci
	XREF	_0dt__streambuf__T
	XREF	userword__ios__Ti
	XREF	init__ios__TP09streambuf
	XREF	_std__in
	XREF	_std__out
	XREF	_std__err
	XREF	_basefield__ios
	XREF	_adjustfield__ios
	XREF	_floatfield__ios
	XREF	_aNextBit__ios
	XREF	_aNextWord__ios
	XREF	_cin
	XREF	_cout
	XREF	_cerr
	XREF	_clog
	XREF	_st
	XREF	_gxSt
	XREF	_errSev__xBASELIB
	XREF	_errTbl__xBASELIB
	XREF	_SysBase
	XREF	_IntuitionBase
	XREF	_DOSBase
	XREF	_PowerPCBase
	XREF	_sysData__sysBASELIB
	XREF	_msgbuff__sysBASELIB
	XREF	_main__sysBASELIB
	XREF	_allocated__MEM
	XREF	_totSize__MEM
	XREF	_nextFree__MEM
	XREF	_cnt__MEM
	XREF	_maxAllocs__MEM
	XREF	_GfxBase
	XREF	_TimerBase
	XREF	_TimerBase__xTIMABLE
	XREF	_current__xTIMABLE
	XREF	_clockFreq__xTIMABLE
	XREF	_threadCnt__xTHREADABLE
	XREF	_main__xTHREADABLE
	XREF	_CyberGfxBase
	XREF	_formatNames__x2D
	XREF	_surfaceTypes__x2D
	XREF	_Warp3DBase
	XREF	_pointRender__SUPPORTS3D
	XREF	_lineRender__SUPPORTS3D
	XREF	_triangleRender__SUPPORTS3D
	XREF	_otherPrimitives__SUPPORTS3D
	XREF	_shadingModes__SUPPORTS3D
	XREF	_textureModes__SUPPORTS3D
	XREF	_textureFmts__SUPPORTS3D
	XREF	_alpha__SUPPORTS3D
	XREF	_fogModes__SUPPORTS3D
	XREF	_zBuffer__SUPPORTS3D
	XREF	_stencil__SUPPORTS3D
	XREF	_misc__SUPPORTS3D
	XREF	_primNames__SUPPORTS3D
	XREF	_renderNames__SUPPORTS3D
	XREF	_shadingNames__SUPPORTS3D
	XREF	_texModeNames__SUPPORTS3D
	XREF	_texFormatNames__SUPPORTS3D
	XREF	_alphaNames__SUPPORTS3D
	XREF	_fogNames__SUPPORTS3D
	XREF	_zBufferNames__SUPPORTS3D
	XREF	_stencilNames__SUPPORTS3D
	XREF	_miscNames__SUPPORTS3D
	XREF	_hw3D__SUPPORTS3D
	XREF	_context__x3D
	XREF	_drawRegion__x3D
	XREF	_fogData__x3D
	XREF	_flags__x3D
	XREF	_vertices__x3D
	XREF	_currTex__x3D
	XREF	_drawSurface__x3D
	XREF	_currCol__x3D
	XREF	_flags__xGFX
	XREF	_mode__xGFX
	XREF	_numModes__xGFX
	XREF	_rPool__xSURFACE
	XREF	_KeymapBase
	XREF	_useCount__xKEY
	XREF	_DiskfontBase
	XREF	_flags__DRAW
	XREF	_stack__VGPU
	XREF	_stackPos__VGPU
	XREF	_vertexBase__VGPU
	XREF	_vertexTop__VGPU
	XREF	_dataPos__VGPU
	XREF	_instPos__VGPU
	XREF	_exe_flags__VGPU
	XREF	_exe_stateReg__VGPU
	XREF	_exe_colourReg__VGPU
	XREF	_exe_texReg__VGPU
	XREF	_exe_fogReg__VGPU
	XREF	_exe_errReg__VGPU
	XREF	_funcTab__VGPU
	XREF	_opcodes__VGPU
	XREF	_qTrigTab__DRAWLIST

	SECTION "_0ct__streampos__T:0",CODE

	rts

	SECTION "GetVertices__DRAWLIST__Tjs:0",CODE


;DVERTEX* DRAWLIST::GetVertices(sint32 n, bool immediate)
	XDEF	GetVertices__DRAWLIST__Tjs
GetVertices__DRAWLIST__Tjs
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.w	$1C(a7),d3
	move.l	$14(a7),a2
L313
;	if (n<=0 || n>=vBufSize || (flags & MAKELIST)==0)
	cmp.l	#0,d2
	ble.b	L316
L314
	cmp.l	$1E(a2),d2
	bge.b	L316
L315
	move.l	$A(a2),d0
	and.l	#2,d0
	bne.b	L317
L316
	moveq	#0,d0
	movem.l	(a7)+,d2/d3/a2/a3
	rts
L317
;	if (vertsUsed+n > vBufSize || instsUsed+1 > iBufSize)
	move.l	$26(a2),d0
	add.l	d2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L319
L318
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L320
L319
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L320
;	DVERTEX* v = currVert;
	move.l	$16(a2),a3
;	if (!immediate)
	tst.w	d3
	bne.b	L322
L321
;		commandReg = currInst->opcode = RSRVD;
	move.l	$1A(a2),a0
	move.l	#2,(a0)
	move.l	#2,$2E(a2)
; (currInst++)->numVerts = n;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
;		currVert+=n;
	move.l	d2,d0
	moveq	#5,d1
	asl.l	d1,d0
	move.l	$16(a2),a0
	lea	0(a0,d0.l),a0
	move.l	a0,$16(a2)
;		vertsUsed+=n;
	add.l	d2,$26(a2)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L322
	move.l	a3,d0
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "SetVertices__DRAWLIST__TP07DVERTEX:0",CODE


;sint32 DRAWLIST::SetVertices(DVERTEX* v) // sets the current vertex 
	XDEF	SetVertices__DRAWLIST__TP07DVERTEX
SetVertices__DRAWLIST__TP07DVERTEX
	movem.l	a2/a3,-(a7)
	movem.l	$C(a7),a2/a3
L323
;	if (instsUsed+1 > iBufSize)
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L325
L324
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L325
;	commandReg = currInst->opcode = PUSH_DVS;
	move.l	$1A(a2),a0
	move.l	#$1B,(a0)
	move.l	#$1B,$2E(a2)
; (currInst++)->vertBase = v;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	a3,4(a1)
;	instsUsed++;
	addq.l	#1,$2A(a2)
	moveq	#0,d0
	movem.l	(a7)+,a2/a3
	rts

	SECTION "RestoreVertices__DRAWLIST__T:0",CODE


;sint32 DRAWLIST::RestoreVertices() // restores the previous vertex b
	XDEF	RestoreVertices__DRAWLIST__T
RestoreVertices__DRAWLIST__T
	move.l	a2,-(a7)
	move.l	$8(a7),a2
L326
;	if (instsUsed+1 > iBufSize)
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L328
L327
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L328
;	commandReg = currInst->opcode = POP_DVS;
	move.l	$1A(a2),a0
	move.l	#$1C,(a0)
	move.l	#$1C,$2E(a2)
;	instsUsed++;
	addq.l	#1,$2A(a2)
	moveq	#0,d0
	move.l	(a7)+,a2
	rts

	SECTION "Lines__DRAWLIST__Tj:0",CODE


;void DRAWLIST::Lines(sint32 n)
	XDEF	Lines__DRAWLIST__Tj
Lines__DRAWLIST__Tj
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a1
L329
;	if (commandReg==DRW_LINES)		
	move.l	$2E(a1),d0
	cmp.l	#7,d0
	bne.b	L331
L330
;	if (commandReg==DRW_LINES)		(currInst-
	move.l	$1A(a1),a0
	subq.w	#$8,a0
	add.l	d2,4(a0)
	bra	L340
L331
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a1,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L339
L332
	tst.l	d0
	beq.b	L334
L333
	or.l	#1,$A(a0)
	bra.b	L335
L334
	and.l	#-2,$A(a0)
L335
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L337
L336
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L338
L337
	move.l	$1A(a0),a2
	move.l	#$1A,(a2)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a2
	move.l	a2,$1A(a0)
	move.l	d0,4(a3)
	addq.l	#1,$2A(a0)
L338
L339
;		commandReg = currInst->opcode = DRW_LINES;
	move.l	$1A(a1),a0
	move.l	#7,(a0)
	move.l	#7,$2E(a1)
; (currInst++)->numVerts = n;
	move.l	$1A(a1),a2
	lea	$8(a2),a0
	move.l	a0,$1A(a1)
	move.l	d2,4(a2)
;		instsUsed++;
	addq.l	#1,$2A(a1)
L340
;	currVert += n;
	move.l	d2,d0
	moveq	#5,d1
	asl.l	d1,d0
	move.l	$16(a1),a0
	lea	0(a0,d0.l),a0
	move.l	a0,$16(a1)
;	vertsUsed += n;
	add.l	d2,$26(a1)
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "LineStrip__DRAWLIST__Tj:0",CODE


;void DRAWLIST::LineStrip(sint32 n)
	XDEF	LineStrip__DRAWLIST__Tj
LineStrip__DRAWLIST__Tj
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a1
L341
;	LockMode(LOCKED);
	moveq	#1,d0
	move.l	a1,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L349
L342
	tst.l	d0
	beq.b	L344
L343
	or.l	#1,$A(a0)
	bra.b	L345
L344
	and.l	#-2,$A(a0)
L345
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L347
L346
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L348
L347
	move.l	$1A(a0),a2
	move.l	#$1A,(a2)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a2
	move.l	a2,$1A(a0)
	move.l	d0,4(a3)
	addq.l	#1,$2A(a0)
L348
L349
;	commandReg = currInst->opcode = DRW_LINESTRIP;
	move.l	$1A(a1),a0
	move.l	#$8,(a0)
	move.l	#$8,$2E(a1)
; (currInst++)->numVerts = n;
	move.l	$1A(a1),a2
	lea	$8(a2),a0
	move.l	a0,$1A(a1)
	move.l	d2,4(a2)
;	instsUsed++;
	addq.l	#1,$2A(a1)
;	currVert += n;
	move.l	d2,d0
	moveq	#5,d1
	asl.l	d1,d0
	move.l	$16(a1),a0
	lea	0(a0,d0.l),a0
	move.l	a0,$16(a1)
;	vertsUsed += n;
	add.l	d2,$26(a1)
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "Tris__DRAWLIST__Tj:0",CODE


;void DRAWLIST::Tris(sint32 n)
	XDEF	Tris__DRAWLIST__Tj
Tris__DRAWLIST__Tj
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a1
L350
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a1),d0
	cmp.l	#$9,d0
	bne.b	L352
L351
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a1),a0
	subq.w	#$8,a0
	add.l	d2,4(a0)
	bra	L361
L352
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a1,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L360
L353
	tst.l	d0
	beq.b	L355
L354
	or.l	#1,$A(a0)
	bra.b	L356
L355
	and.l	#-2,$A(a0)
L356
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L358
L357
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L359
L358
	move.l	$1A(a0),a2
	move.l	#$1A,(a2)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a2
	move.l	a2,$1A(a0)
	move.l	d0,4(a3)
	addq.l	#1,$2A(a0)
L359
L360
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a1),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a1)
; (currInst++)->numVerts = n;
	move.l	$1A(a1),a2
	lea	$8(a2),a0
	move.l	a0,$1A(a1)
	move.l	d2,4(a2)
;		instsUsed++;
	addq.l	#1,$2A(a1)
L361
;	currVert += n;
	move.l	d2,d0
	moveq	#5,d1
	asl.l	d1,d0
	move.l	$16(a1),a0
	lea	0(a0,d0.l),a0
	move.l	a0,$16(a1)
;	vertsUsed += n;
	add.l	d2,$26(a1)
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "TriStrip__DRAWLIST__Tj:0",CODE


;void DRAWLIST::TriStrip(sint32 n)
	XDEF	TriStrip__DRAWLIST__Tj
TriStrip__DRAWLIST__Tj
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a1
L362
;	LockMode(LOCKED);
	moveq	#1,d0
	move.l	a1,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L370
L363
	tst.l	d0
	beq.b	L365
L364
	or.l	#1,$A(a0)
	bra.b	L366
L365
	and.l	#-2,$A(a0)
L366
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L368
L367
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L369
L368
	move.l	$1A(a0),a2
	move.l	#$1A,(a2)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a2
	move.l	a2,$1A(a0)
	move.l	d0,4(a3)
	addq.l	#1,$2A(a0)
L369
L370
;	commandReg = currInst->opcode = DRW_TRISTRIP;
	move.l	$1A(a1),a0
	move.l	#$B,(a0)
	move.l	#$B,$2E(a1)
; (currInst++)->numVerts = n;
	move.l	$1A(a1),a2
	lea	$8(a2),a0
	move.l	a0,$1A(a1)
	move.l	d2,4(a2)
;	instsUsed++;
	addq.l	#1,$2A(a1)
;	currVert += n;
	move.l	d2,d0
	moveq	#5,d1
	asl.l	d1,d0
	move.l	$16(a1),a0
	lea	0(a0,d0.l),a0
	move.l	a0,$16(a1)
;	vertsUsed += n;
	add.l	d2,$26(a1)
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "TriFan__DRAWLIST__Tj:0",CODE


;void DRAWLIST::TriFan(sint32 n)
	XDEF	TriFan__DRAWLIST__Tj
TriFan__DRAWLIST__Tj
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a1
L371
;	LockMode(LOCKED);
	moveq	#1,d0
	move.l	a1,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L379
L372
	tst.l	d0
	beq.b	L374
L373
	or.l	#1,$A(a0)
	bra.b	L375
L374
	and.l	#-2,$A(a0)
L375
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L377
L376
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L378
L377
	move.l	$1A(a0),a2
	move.l	#$1A,(a2)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a2
	move.l	a2,$1A(a0)
	move.l	d0,4(a3)
	addq.l	#1,$2A(a0)
L378
L379
;	commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a1),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a1)
; (currInst++)->numVerts = n;
	move.l	$1A(a1),a2
	lea	$8(a2),a0
	move.l	a0,$1A(a1)
	move.l	d2,4(a2)
;	instsUsed++;
	addq.l	#1,$2A(a1)
;	currVert += n;
	move.l	d2,d0
	moveq	#5,d1
	asl.l	d1,d0
	move.l	$16(a1),a0
	lea	0(a0,d0.l),a0
	move.l	a0,$16(a1)
;	vertsUsed += n;
	add.l	d2,$26(a1)
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "Flush__DRAWLIST__T:0",CODE


;sint32 DRAWLIST::Flush()
	XDEF	Flush__DRAWLIST__T
Flush__DRAWLIST__T
	movem.l	d2/a2,-(a7)
	move.l	$C(a7),a2
L380
;	if (currFlushCnt++ == 0 && instsUsed)
	move.l	$52(a2),d1
	move.l	d1,d0
	addq.l	#1,d0
	move.l	d0,$52(a2)
	tst.l	d1
	bne.b	L383
L381
	tst.l	$2A(a2)
	beq.b	L383
L382
;		VGPU::ExecuteBuffer(TRUE, instBuf, vertBuf, instsUsed, vBu
	move.l	$1E(a2),-(a7)
	move.l	$2A(a2),-(a7)
	move.l	$E(a2),-(a7)
	move.l	$12(a2),-(a7)
	move.w	#1,-(a7)
	jsr	ExecuteBuffer__VGPU__sP08DCOMMANDP07DVERTEXjj
	add.w	#$12,a7
	bra.b	L385
L383
;	else if (instsUsed)
	tst.l	$2A(a2)
	beq.b	L385
L384
;		VGPU::ExecuteBuffer(FALSE, instBuf, vertBuf, instsUsed, vB
	move.l	$1E(a2),-(a7)
	move.l	$2A(a2),-(a7)
	move.l	$E(a2),-(a7)
	move.l	$12(a2),-(a7)
	clr.w	-(a7)
	jsr	ExecuteBuffer__VGPU__sP08DCOMMANDP07DVERTEXjj
	add.w	#$12,a7
L385
;	vertsUsed = 0;
	clr.l	$26(a2)
;	instsUsed = 0;
	clr.l	$2A(a2)
;	currVert = vertBuf;
	move.l	$E(a2),a0
	move.l	a0,$16(a2)
;	currInst = instBuf;
	move.l	$12(a2),a0
	move.l	a0,$1A(a2)
;	commandReg = NOOP;
	clr.l	$2E(a2)
	moveq	#0,d0
	movem.l	(a7)+,d2/a2
	rts

	SECTION "Begin__DRAWLIST__T:0",CODE


;sint32 DRAWLIST::Begin()
	XDEF	Begin__DRAWLIST__T
Begin__DRAWLIST__T
	move.l	d2,-(a7)
	move.l	$8(a7),a0
L386
;	if (nestCount++ == 0)
	move.l	$5A(a0),d1
	move.l	d1,d0
	addq.l	#1,d0
	move.l	d0,$5A(a0)
	tst.l	d1
	bne.b	L390
L387
;		breakCnt = 0;
	clr.l	$56(a0)
;		if (flags & MAKELIST) 
	move.l	$A(a0),d0
	and.l	#2,d0
	beq.b	L389
L388
	move.l	#-$3010000,d0
	move.l	(a7)+,d2
	rts
L389
;		flags |= MAKELIST|LOCKED;
	or.l	#3,$A(a0)
;		instsUsed = 0;
	clr.l	$2A(a0)
;		vertsUsed = 0;
	clr.l	$26(a0)
;		currVert = vertBuf;
	move.l	$E(a0),a1
	move.l	a1,$16(a0)
;		currInst = instBuf;
	move.l	$12(a0),a1
	move.l	a1,$1A(a0)
L390
	moveq	#0,d0
	move.l	(a7)+,d2
	rts

	SECTION "End__DRAWLIST__T:0",CODE


;sint32 DRAWLIST::End()
	XDEF	End__DRAWLIST__T
End__DRAWLIST__T
	move.l	a2,-(a7)
	move.l	$8(a7),a2
L391
;	if (!nestCount)
	tst.l	$5A(a2)
	bne.b	L393
L392
	move.l	#-$3050000,d0
	move.l	(a7)+,a2
	rts
L393
;	if (--nestCount == 0)
	move.l	$5A(a2),d0
	subq.l	#1,d0
	move.l	d0,$5A(a2)
	bne.b	L397
L394
;		if (flags & MAKELIST==0) 
	bra.b	L396
L395
	move.l	#-$3010000,d0
	move.l	(a7)+,a2
	rts
L396
;		flags &= ~(MAKELIST|LOCKED);
	and.l	#-4,$A(a2)
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
;		currFlushCnt == 0;
;		currVert = vertBuf;
	move.l	$E(a2),a0
	move.l	a0,$16(a2)
L397
	moveq	#0,d0
	move.l	(a7)+,a2
	rts

	SECTION "Enable__DRAWLIST__TE:0",CODE


;void DRAWLIST::Enable(x3D::STATE s)
	XDEF	Enable__DRAWLIST__TE
Enable__DRAWLIST__TE
	movem.l	d2/a2,-(a7)
	move.l	$10(a7),d2
	move.l	$C(a7),a2
L398
;	if (stateReg & s)						
	move.l	$32(a2),d0
	and.l	d2,d0
	beq.b	L400
L399
	movem.l	(a7)+,d2/a2
	rts
L400
;	if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L402
L401
;	if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L402
;	commandReg = currInst->opcode = ENABLE_STATE;
	move.l	$1A(a2),a0
	move.l	#$18,(a0)
	move.l	#$18,$2E(a2)
; (currInst++)->state = s;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
;	stateReg |= s;
	or.l	d2,$32(a2)
;	instsUsed++;
	addq.l	#1,$2A(a2)
	movem.l	(a7)+,d2/a2
	rts

	SECTION "Disable__DRAWLIST__TE:0",CODE


;void DRAWLIST::Disable(x3D::STATE s)
	XDEF	Disable__DRAWLIST__TE
Disable__DRAWLIST__TE
	movem.l	d2/a2,-(a7)
	move.l	$10(a7),d2
	move.l	$C(a7),a2
L403
;	if ((stateReg&s)==0)			
	move.l	$32(a2),d0
	and.l	d2,d0
	bne.b	L405
L404
	movem.l	(a7)+,d2/a2
	rts
L405
;	if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L407
L406
;	if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L407
;	commandReg = currInst->opcode = DISABLE_STATE;
	move.l	$1A(a2),a0
	move.l	#$19,(a0)
	move.l	#$19,$2E(a2)
; (currInst++)->state = s;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
;	stateReg &= ~s;
	not.l	d2
	and.l	d2,$32(a2)
;	instsUsed++;
	addq.l	#1,$2A(a2)
	movem.l	(a7)+,d2/a2
	rts

	SECTION "SetColour__DRAWLIST__TUj:0",CODE


;void DRAWLIST::SetColour(uint32 colour)
	XDEF	SetColour__DRAWLIST__TUj
SetColour__DRAWLIST__TUj
	movem.l	d2/a2,-(a7)
	move.l	$10(a7),d2
	move.l	$C(a7),a2
L408
;	if (colourReg==colour)			
	move.l	$36(a2),d0
	cmp.l	d2,d0
	bne.b	L410
L409
	movem.l	(a7)+,d2/a2
	rts
L410
;	if (commandReg==SET_COLOUR)	
	move.l	$2E(a2),d0
	cmp.l	#$12,d0
	bne.b	L412
L411
;	if (commandReg==SET_COLOUR)	(currInst-
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra.b	L415
L412
;		if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L414
L413
;		if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L414
;		commandReg = currInst->opcode = SET_COLOUR;
	move.l	$1A(a2),a0
	move.l	#$12,(a0)
	move.l	#$12,$2E(a2)
; colourReg = (currInst++)->colour = colour;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
	move.l	d2,$36(a2)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L415
	movem.l	(a7)+,d2/a2
	rts

	SECTION "SetTexture__DRAWLIST__TP08xTEXSURF:0",CODE


;void DRAWLIST::SetTexture(xTEXSURF* t)
	XDEF	SetTexture__DRAWLIST__TP08xTEXSURF
SetTexture__DRAWLIST__TP08xTEXSURF
	movem.l	a2/a3,-(a7)
	move.l	$10(a7),a0
	move.l	$C(a7),a2
L416
;	sysTEXTURE* tData = t->Rep();
	move.l	$C(a0),a3
;	if (texReg==tData)
	move.l	$3E(a2),a0
	cmp.l	a3,a0
	bne.b	L418
L417
	movem.l	(a7)+,a2/a3
	rts
L418
;	if (commandReg==SET_TEXTURE)	
	move.l	$2E(a2),d0
	cmp.l	#$13,d0
	bne.b	L420
L419
;	if (commandReg==SET_TEXTURE)	(currIns
	move.l	$1A(a2),a0
	move.l	a3,-4(a0)
	bra.b	L423
L420
;		if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L422
L421
;		if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L422
;		commandReg = currInst->opcode = SET_TEXTURE;
	move.l	$1A(a2),a0
	move.l	#$13,(a0)
	move.l	#$13,$2E(a2)
; texReg = (currInst++)->texture = tData;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	a3,4(a1)
	move.l	a3,$3E(a2)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L423
	movem.l	(a7)+,a2/a3
	rts

	SECTION "Clear__DRAWLIST__TUj:0",CODE


;void DRAWLIST::Clear(uint32 colour)
	XDEF	Clear__DRAWLIST__TUj
Clear__DRAWLIST__TUj
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a2
L424
;	if (commandReg==CLEAR_RGB)
	move.l	$2E(a2),d0
	cmp.l	#4,d0
	bne.b	L426
L425
;		(currInst-1)->colour = colour;
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra	L437
L426
;		if (instsUsed+2 > iBufSize)
	move.l	$2A(a2),d0
	addq.l	#2,d0
	cmp.l	$22(a2),d0
	ble.b	L428
L427
;			Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L428
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L436
L429
	tst.l	d0
	beq.b	L431
L430
	or.l	#1,$A(a0)
	bra.b	L432
L431
	and.l	#-2,$A(a0)
L432
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L434
L433
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L435
L434
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L435
L436
;		commandReg = currInst->opcode = CLEAR_RGB;
	move.l	$1A(a2),a0
	move.l	#4,(a0)
	move.l	#4,$2E(a2)
; (currInst++)->colour = colour;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L437
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "ClearDepth__DRAWLIST__Tf:0",CODE


;void DRAWLIST::ClearDepth(float32 z)
	XDEF	ClearDepth__DRAWLIST__Tf
ClearDepth__DRAWLIST__Tf
	movem.l	d2/a2/a3,-(a7)
	fmovem.x fp2,-(a7)
	move.l	$1C(a7),a2
	fmove.s	$20(a7),fp2
L438
;	if (commandReg==CLEAR_DEPTH)
	move.l	$2E(a2),d0
	cmp.l	#5,d0
	bne.b	L440
L439
;		(currInst-1)->depth = z;
	move.l	$1A(a2),a0
	fmove.s	fp2,-4(a0)
	bra	L451
L440
;		if (instsUsed+2 > iBufSize)
	move.l	$2A(a2),d0
	addq.l	#2,d0
	cmp.l	$22(a2),d0
	ble.b	L442
L441
;			Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L442
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L450
L443
	tst.l	d0
	beq.b	L445
L444
	or.l	#1,$A(a0)
	bra.b	L446
L445
	and.l	#-2,$A(a0)
L446
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L448
L447
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L449
L448
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L449
L450
;		commandReg = currInst->opcode = CLEAR_DEPTH;
	move.l	$1A(a2),a0
	move.l	#5,(a0)
	move.l	#5,$2E(a2)
; (currInst++)->depth = z;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	fmove.s	fp2,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L451
	fmovem.x (a7)+,fp2
	movem.l	(a7)+,d2/a2/a3
	rts

	SECTION "Blit__DRAWLIST__TP08xSURFACEssssss:0",CODE


;void DRAWLIST::Blit(xSURFACE* s, S_3CRD)
	XDEF	Blit__DRAWLIST__TP08xSURFACEssssss
Blit__DRAWLIST__TP08xSURFACEssssss
L472	EQU	0
	link	a5,#L472
	movem.l	d2-d7/a2/a3/a6,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1A(a5),d2
	move.w	$18(a5),d3
	move.w	$16(a5),d4
	move.w	$14(a5),d5
	move.w	$12(a5),d7
L452
;	if (s->Handle()==NOTSET)
	move.l	a6,a0
	tst.l	$C(a0)
	beq.b	L454
L453
	move.l	$C(a0),a0
	move.l	4(a0),a0
	bra.b	L455
L454
	sub.l	a0,a0
L455
	cmp.w	#0,a0
	bne.b	L457
L456
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts
L457
;	if (vertsUsed+1 > vBufSize || instsUsed+2 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#1,d0
	cmp.l	$1E(a2),d0
	bgt.b	L459
L458
	move.l	$2A(a2),d0
	addq.l	#2,d0
	cmp.l	$22(a2),d0
	ble.b	L460
L459
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L460
;	LockMode(UNLOCKED);
	moveq	#0,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L468
L461
	tst.l	d0
	beq.b	L463
L462
	or.l	#1,$A(a0)
	bra.b	L464
L463
	and.l	#-2,$A(a0)
L464
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L466
L465
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L467
L466
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L467
L468
;	commandReg =	currInst->opcode		= BLIT;
	move.l	$1A(a2),a0
	move.l	#$D,(a0)
	move.l	#$D,$2E(a2)
;	(currInst++)->surf	= s->Handle();
	move.l	a6,a0
	tst.l	$C(a0)
	beq.b	L470
L469
	move.l	$C(a0),a0
	move.l	4(a0),a3
	bra.b	L471
L470
	sub.l	a3,a3
L471
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	a3,4(a1)
;	register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;	v->x1 = x1;
	move.w	$10(a5),d0
	ext.l	d0
	move.l	d0,(a0)
; v->y1 = y1;
	move.w	d7,d0
	ext.l	d0
	move.l	d0,4(a0)
;	v->x2 = x2;
	move.w	d5,d0
	ext.l	d0
	move.l	d0,$8(a0)
; v->y2 = y2;
	move.w	d4,d0
	ext.l	d0
	move.l	d0,$C(a0)
;	v->x3 = x3, v->y3 = y3;
	move.w	d3,d0
	ext.l	d0
	move.l	d0,$10(a0)
	move.w	d2,d0
	ext.l	d0
	move.l	d0,$14(a0)
;	instsUsed++;
	addq.l	#1,$2A(a2)
;	vertsUsed++;
	addq.l	#1,$26(a2)
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "Clip__DRAWLIST__Tssss:0",CODE


;void DRAWLIST::Clip(S_2CRD)
	XDEF	Clip__DRAWLIST__Tssss
Clip__DRAWLIST__Tssss
	movem.l	d2-d5/a2,-(a7)
	move.w	$1C(a7),d2
	move.w	$22(a7),d3
	move.w	$20(a7),d4
	move.w	$1E(a7),d5
	move.l	$18(a7),a2
L473
;	if (vertsUsed+1 > vBufSize || instsUsed+1 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#1,d0
	cmp.l	$1E(a2),d0
	bgt.b	L475
L474
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L476
L475
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L476
;	commandReg = (currInst++)->opcode		= CLIP;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#3,(a1)
	move.l	#3,$2E(a2)
;	register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;	v->x1 = x1;
	move.w	d2,d0
	ext.l	d0
	move.l	d0,(a0)
; v->y1 = y1;
	move.w	d5,d0
	ext.l	d0
	move.l	d0,4(a0)
;	v->x2 = x2-x1;
	move.w	d4,d0
	ext.l	d0
	move.w	d2,d1
	ext.l	d1
	sub.l	d1,d0
	move.l	d0,$8(a0)
; v->y2 = y2-x1;
	move.w	d3,d0
	ext.l	d0
	move.w	d2,d1
	ext.l	d1
	sub.l	d1,d0
	move.l	d0,$C(a0)
;	instsUsed++;
	addq.l	#1,$2A(a2)
;	vertsUsed++;
	addq.l	#1,$26(a2)
	movem.l	(a7)+,d2-d5/a2
	rts

	SECTION "FogParms__DRAWLIST__TUjfffE:0",CODE


;void DRAWLIST::FogParms(uint32 colour, float32 start, float32 end, f
	XDEF	FogParms__DRAWLIST__TUjfffE
FogParms__DRAWLIST__TUjfffE
	movem.l	d2-d4/a2/a3,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	move.l	$50(a7),d2
	move.l	$40(a7),d3
	move.l	$3C(a7),a2
	fmove.s	$4C(a7),fp2
	fmove.s	$48(a7),fp3
	fmove.s	$44(a7),fp4
L477
;	if (commandReg == FOGPARMS)
	move.l	$2E(a2),d0
	cmp.l	#$10,d0
	bne.b	L479
L478
;		register DVERTEX* v = (currVert-1);
	move.l	$16(a2),a0
	sub.w	#$20,a0
;		v->data1 = colour;
	move.l	d3,(a0)
; v->fy1 = start;
	fmove.s	fp4,4(a0)
; v->fx2 = end;
	fmove.s	fp3,$8(a0)
; v->fy2 = density;
	fmove.s	fp2,$C(a0)
;		(currInst-1)->data = fmode;
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra	L491
L479
;		if (vertsUsed+1 > vBufSize || instsUsed+2 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#1,d0
	cmp.l	$1E(a2),d0
	bgt.b	L481
L480
	move.l	$2A(a2),d0
	addq.l	#2,d0
	cmp.l	$22(a2),d0
	ble.b	L482
L481
;			Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L482
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L490
L483
	tst.l	d0
	beq.b	L485
L484
	or.l	#1,$A(a0)
	bra.b	L486
L485
	and.l	#-2,$A(a0)
L486
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L488
L487
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L489
L488
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L489
L490
;		commandReg =	currInst->opcode	= FOGPARMS;
	move.l	$1A(a2),a0
	move.l	#$10,(a0)
	move.l	#$10,$2E(a2)
;		(currInst++)->data	= fmode;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		v->data1 = colour;
	move.l	d3,(a0)
; v->fy1 = start;
	fmove.s	fp4,4(a0)
; v->fx2 = end;
	fmove.s	fp3,$8(a0)
; v->fy2 = density;
	fmove.s	fp2,$C(a0)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		vertsUsed++;
	addq.l	#1,$26(a2)
L491
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d4/a2/a3
	rts

	SECTION "BlendMode__DRAWLIST__TEE:0",CODE


;void DRAWLIST::BlendMode(x3D::BFUNC sfac, x3D::BFUNC dfac)
	XDEF	BlendMode__DRAWLIST__TEE
BlendMode__DRAWLIST__TEE
	movem.l	d2/d3/a2,-(a7)
	movem.l	$14(a7),d2/d3
	move.l	$10(a7),a2
L492
;	if (commandReg == BLENDPARMS)
	move.l	$2E(a2),d0
	cmp.l	#$F,d0
	bne.b	L494
L493
;		(currInst-1)->data = ((sfac<<16) | (dfac));
	moveq	#$10,d0
	asl.l	d0,d2
	or.l	d3,d2
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra.b	L497
L494
;		if (instsUsed+1 > iBufSize)
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L496
L495
;			Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L496
;		commandReg =	currInst->opcode	= BLENDPARMS;
	move.l	$1A(a2),a0
	move.l	#$F,(a0)
	move.l	#$F,$2E(a2)
;		(currInst++)->data = ((sfac<<16) | (dfac));
	moveq	#$10,d0
	asl.l	d0,d2
	or.l	d3,d2
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L497
	movem.l	(a7)+,d2/d3/a2
	rts

	SECTION "AlphaCompareMode__DRAWLIST__TEf:0",CODE


;void DRAWLIST::AlphaCompareMode(x3D::AMODE amode, float32 ref)
	XDEF	AlphaCompareMode__DRAWLIST__TEf
AlphaCompareMode__DRAWLIST__TEf
	movem.l	d2/a2,-(a7)
	fmovem.x fp2,-(a7)
	move.l	$1C(a7),d2
	move.l	$18(a7),a2
	fmove.s	$20(a7),fp2
L498
;	if (commandReg==SET_AMODE)
	move.l	$2E(a2),d0
	cmp.l	#$17,d0
	bne.b	L500
L499
;		(currVert-1)->data1	= amode;
	move.l	$16(a2),a0
	move.l	d2,-$20(a0)
;		(currVert-1)->fy1		= ref;
	move.l	$16(a2),a0
	fmove.s	fp2,-$1C(a0)
	bra.b	L504
L500
;		if (vertsUsed+1 > vBufSize || instsUsed+1 > iBufSize)	
	move.l	$26(a2),d0
	addq.l	#1,d0
	cmp.l	$1E(a2),d0
	bgt.b	L502
L501
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L503
L502
;(vertsUsed+1 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L503
;		commandReg = (currInst++)->opcode = SET_AMODE;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#$17,(a1)
	move.l	#$17,$2E(a2)
;		currVert->data1		= amode;
	move.l	$16(a2),a0
	move.l	d2,(a0)
;		(currVert++)->fy1	= ref;
	move.l	$16(a2),a1
	lea	$20(a1),a0
	move.l	a0,$16(a2)
	fmove.s	fp2,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		vertsUsed++;
	addq.l	#1,$26(a2)
L504
	fmovem.x (a7)+,fp2
	movem.l	(a7)+,d2/a2
	rts

	SECTION "LogicMode__DRAWLIST__TE:0",CODE


;void DRAWLIST::LogicMode(x3D::LMODE lmode)
	XDEF	LogicMode__DRAWLIST__TE
LogicMode__DRAWLIST__TE
	movem.l	d2/a2,-(a7)
	move.l	$10(a7),d2
	move.l	$C(a7),a2
L505
;	if (logicReg==lmode)				
	move.l	$42(a2),d0
	cmp.l	d2,d0
	bne.b	L507
L506
	movem.l	(a7)+,d2/a2
	rts
L507
;	if (commandReg==SET_LOGIC)	
	move.l	$2E(a2),d0
	cmp.l	#$14,d0
	bne.b	L509
L508
;	if (commandReg==SET_LOGIC)	(currInst-1)
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra.b	L512
L509
;		if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L511
L510
;		if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L511
;		commandReg = currInst->opcode = SET_LOGIC;
	move.l	$1A(a2),a0
	move.l	#$14,(a0)
	move.l	#$14,$2E(a2)
; logicReg = (currInst++)->data = lmode;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
	move.l	d2,$42(a2)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L512
	movem.l	(a7)+,d2/a2
	rts

	SECTION "DepthCompareMode__DRAWLIST__TE:0",CODE


;void DRAWLIST::DepthCompareMode(x3D::ZMODE zmode)
	XDEF	DepthCompareMode__DRAWLIST__TE
DepthCompareMode__DRAWLIST__TE
	movem.l	d2/a2,-(a7)
	move.l	$10(a7),d2
	move.l	$C(a7),a2
L513
;	if (zTestReg==zmode)				
	move.l	$4A(a2),d0
	cmp.l	d2,d0
	bne.b	L515
L514
	movem.l	(a7)+,d2/a2
	rts
L515
;	if (commandReg==SET_ZMODE)	
	move.l	$2E(a2),d0
	cmp.l	#$16,d0
	bne.b	L517
L516
;	if (commandReg==SET_ZMODE)	(currInst-1)
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra.b	L520
L517
;		if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L519
L518
;		if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L519
;		commandReg = currInst->opcode = SET_ZMODE;
	move.l	$1A(a2),a0
	move.l	#$16,(a0)
	move.l	#$16,$2E(a2)
; zTestReg = (currInst++)->data = zmode;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
	move.l	d2,$4A(a2)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L520
	movem.l	(a7)+,d2/a2
	rts

	SECTION "FogMode__DRAWLIST__TE:0",CODE


;void DRAWLIST::FogMode(x3D::FMODE fmode)
	XDEF	FogMode__DRAWLIST__TE
FogMode__DRAWLIST__TE
	movem.l	d2/d3/a2/a3,-(a7)
	move.l	$18(a7),d2
	move.l	$14(a7),a2
L521
;	if (fogReg==fmode)				
	move.l	$46(a2),d0
	cmp.l	d2,d0
	bne.b	L523
L522
	movem.l	(a7)+,d2/d3/a2/a3
	rts
L523
;	if (commandReg==SET_FOG)	
	move.l	$2E(a2),d0
	cmp.l	#$15,d0
	bne.b	L525
L524
;	if (commandReg==SET_FOG)	(currInst-1)->da
	move.l	$1A(a2),a0
	move.l	d2,-4(a0)
	bra	L536
L525
;		if (instsUsed+2 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#2,d0
	cmp.l	$22(a2),d0
	ble.b	L527
L526
;		if (instsUsed+2 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L527
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L535
L528
	tst.l	d0
	beq.b	L530
L529
	or.l	#1,$A(a0)
	bra.b	L531
L530
	and.l	#-2,$A(a0)
L531
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L533
L532
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L534
L533
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L534
L535
;		commandReg = currInst->opcode = SET_FOG;
	move.l	$1A(a2),a0
	move.l	#$15,(a0)
	move.l	#$15,$2E(a2)
; fogReg = (currInst++)->data = fmode;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d2,4(a1)
	move.l	d2,$46(a2)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L536
	movem.l	(a7)+,d2/d3/a2/a3
	rts

	SECTION "XDebug_BreakPoint__DRAWLIST__T:0",CODE


;void DRAWLIST::XDebug_BreakPoint()
	XDEF	XDebug_BreakPoint__DRAWLIST__T
XDebug_BreakPoint__DRAWLIST__T
	movem.l	d2/a2,-(a7)
	move.l	$C(a7),a2
L537
;	if (commandReg==BREAKPT)	
	move.l	$2E(a2),d0
	cmp.l	#$1E,d0
	bne.b	L539
L538
	movem.l	(a7)+,d2/a2
	rts
L539
;		if (instsUsed+1 > iBufSize)	
	move.l	$2A(a2),d0
	addq.l	#1,d0
	cmp.l	$22(a2),d0
	ble.b	L541
L540
;		if (instsUsed+1 > iBufSize)	Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L541
;		commandReg = currInst->opcode = BREAKPT;
	move.l	$1A(a2),a0
	move.l	#$1E,(a0)
	move.l	#$1E,$2E(a2)
; (currInst++)->data = breakCnt++;
	move.l	$56(a2),d1
	move.l	d1,d0
	addq.l	#1,d0
	move.l	d0,$56(a2)
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d1,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
	movem.l	(a7)+,d2/a2
	rts

	SECTION "Line__DRAWLIST__TUjssss:0",CODE


;void DRAWLIST::Line(uint32 colour, S_2CRD)
	XDEF	Line__DRAWLIST__TUjssss
Line__DRAWLIST__TUjssss
	movem.l	d2-d6/a2/a3,-(a7)
	move.w	$2E(a7),d2
	move.w	$2C(a7),d3
	move.w	$2A(a7),d4
	move.w	$28(a7),d5
	move.l	$24(a7),d6
	move.l	$20(a7),a2
L542
;	if (vertsUsed+2 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L544
L543
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L545
L544
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L545
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Disable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(colour);
	move.l	d6,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;	if (commandReg==DRW_LINES)		
	move.l	$2E(a2),d0
	cmp.l	#7,d0
	bne.b	L547
L546
;	if (commandReg==DRW_LINES)		(currInst-
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#2,4(a0)
	bra	L556
L547
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L555
L548
	tst.l	d0
	beq.b	L550
L549
	or.l	#1,$A(a0)
	bra.b	L551
L550
	and.l	#-2,$A(a0)
L551
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L553
L552
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L554
L553
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L554
L555
;		commandReg = currInst->opcode = DRW_LINES;
	move.l	$1A(a2),a0
	move.l	#7,(a0)
	move.l	#7,$2E(a2)
; (currInst++)->numVerts = 2;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#2,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L556
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		v->x = x1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	(v++)->z = depthReg;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	$3A(a2),$8(a1)
;		v->x = x2;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	(v++)->z = depthReg;
	move.l	a0,a1
	move.l	$3A(a2),$8(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed+=2;
	addq.l	#2,$26(a2)
	movem.l	(a7)+,d2-d6/a2/a3
	rts

	SECTION "LineShA__DRAWLIST__TPUjssss:0",CODE


;void DRAWLIST::LineShA(uint32* colour, S_2CRD)
	XDEF	LineShA__DRAWLIST__TPUjssss
LineShA__DRAWLIST__TPUjssss
	movem.l	d2-d6/a2/a3/a6,-(a7)
	movem.l	$24(a7),a2/a3
	move.w	$32(a7),d2
	move.w	$30(a7),d3
	move.w	$2E(a7),d4
	move.w	$2C(a7),d5
L557
;	if (vertsUsed+2 > vBufSize || instsUsed+4 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L559
L558
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L560
L559
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L560
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	if (commandReg==DRW_LINES)		
	move.l	$2E(a2),d0
	cmp.l	#7,d0
	bne.b	L562
L561
;	if (commandReg==DRW_LINES)		(currInst-
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#2,4(a0)
	bra	L571
L562
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L570
L563
	tst.l	d0
	beq.b	L565
L564
	or.l	#1,$A(a0)
	bra.b	L566
L565
	and.l	#-2,$A(a0)
L566
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L568
L567
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L569
L568
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L569
L570
;		currInst->opcode = commandReg = DRW_LINES;
	move.l	#7,$2E(a2)
	move.l	$1A(a2),a0
	move.l	#7,(a0)
; (currInst++)->numVerts = 2;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#2,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L571
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		v->x = x1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	v->z = depthReg;
	move.l	$3A(a2),$8(a0)
;	(v++)->colour = *(colour++);
	move.l	a0,a1
	add.w	#$20,a0
	move.l	(a3)+,$18(a1)
;		v->x = x2;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	v->z = depthReg;
	move.l	$3A(a2),$8(a0)
;	(v++)->colour = *colour;
	move.l	a3,a1
	move.l	(a1),d0
	move.l	a0,a1
	move.l	d0,$18(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed+=2;
	addq.l	#2,$26(a2)
	movem.l	(a7)+,d2-d6/a2/a3/a6
	rts

	SECTION "Tri__DRAWLIST__TUjssssss:0",CODE


;void DRAWLIST::Tri(uint32 colour, S_3CRD)
	XDEF	Tri__DRAWLIST__TUjssssss
Tri__DRAWLIST__TUjssssss
L587	EQU	0
	link	a5,#L587
	movem.l	d2-d7/a2/a3,-(a7)
	move.w	$1A(a5),d2
	move.w	$18(a5),d3
	move.w	$16(a5),d4
	move.w	$14(a5),d5
	move.l	$C(a5),d6
	move.w	$12(a5),d7
	move.l	$8(a5),a2
L572
;	if (vertsUsed+3 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#3,d0
	cmp.l	$1E(a2),d0
	bgt.b	L574
L573
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L575
L574
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L575
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Disable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(colour);
	move.l	d6,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L577
L576
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#3,4(a0)
	bra	L586
L577
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L585
L578
	tst.l	d0
	beq.b	L580
L579
	or.l	#1,$A(a0)
	bra.b	L581
L580
	and.l	#-2,$A(a0)
L581
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L583
L582
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L584
L583
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L584
L585
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 3;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#3,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L586
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	(v++)->z = depthReg;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	$3A(a2),$8(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	(v++)->z = depthReg;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	$3A(a2),$8(a1)
;		v->x = x3;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y3;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	(v++)->z = depthReg;
	move.l	a0,a1
	move.l	$3A(a2),$8(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	movem.l	(a7)+,d2-d7/a2/a3
	unlk	a5
	rts

	SECTION "TriShA__DRAWLIST__TPUjssssss:0",CODE


;void DRAWLIST::TriShA(uint32* colour, S_3CRD)
	XDEF	TriShA__DRAWLIST__TPUjssssss
TriShA__DRAWLIST__TPUjssssss
L603	EQU	0
	link	a5,#L603
	movem.l	d2-d7/a2/a3/a6,-(a7)
	movem.l	$8(a5),a2/a3
	move.w	$1A(a5),d2
	move.w	$18(a5),d3
	move.w	$16(a5),d4
	move.w	$14(a5),d5
	move.w	$12(a5),d7
L588
;	if (vertsUsed+3 > vBufSize || instsUsed+4 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#3,d0
	cmp.l	$1E(a2),d0
	bgt.b	L590
L589
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L591
L590
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L591
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L593
L592
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#3,4(a0)
	bra	L602
L593
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L601
L594
	tst.l	d0
	beq.b	L596
L595
	or.l	#1,$A(a0)
	bra.b	L597
L596
	and.l	#-2,$A(a0)
L597
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L599
L598
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L600
L599
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L600
L601
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 3;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#3,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L602
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	v->z = depthReg;
	move.l	$3A(a2),$8(a0)
;	(v++)->colour = *(colour++);
	move.l	a0,a1
	add.w	#$20,a0
	move.l	(a3)+,$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	v->z = depthReg;
	move.l	$3A(a2),$8(a0)
;	(v++)->colour = *(colour++);
	move.l	a0,a1
	add.w	#$20,a0
	move.l	(a3)+,$18(a1)
;		v->x = x3;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,(a0)
;	v->y = y3;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,4(a0)
;	v->z = depthReg;
	move.l	$3A(a2),$8(a0)
;	(v++)->colour = *colour;
	move.l	a3,a1
	move.l	(a1),d0
	move.l	a0,a1
	move.l	d0,$18(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "Rect__DRAWLIST__TUjssss:0",CODE


;void DRAWLIST::Rect(uint32 colour, S_2CRD)
	XDEF	Rect__DRAWLIST__TUjssss
Rect__DRAWLIST__TUjssss
	movem.l	d2-d6/a2/a3,-(a7)
	move.w	$2E(a7),d2
	move.w	$2C(a7),d3
	move.w	$2A(a7),d4
	move.w	$28(a7),d5
	move.l	$24(a7),d6
	move.l	$20(a7),a2
L604
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L606
L605
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L607
L606
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L607
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Disable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(colour);
	move.l	d6,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L609
L608
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L618
L609
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L617
L610
	tst.l	d0
	beq.b	L612
L611
	or.l	#1,$A(a0)
	bra.b	L613
L612
	and.l	#-2,$A(a0)
L613
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L615
L614
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L616
L615
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L616
L617
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L618
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp0
;		v->x = x1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	(v++)->z = depth;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$8(a1)
;		v->x = x2;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	(v++)->z = depth;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$8(a1)
;		v->x = x1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	(v++)->z = depth;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$8(a1)
;		v->x = x2;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	(v++)->z = depth;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$8(a1)
;		v->x = x2;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	(v++)->z = depth;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$8(a1)
;		v->x = x1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	(v++)->z = depth;
	move.l	a0,a1
	fmove.s	fp0,$8(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	movem.l	(a7)+,d2-d6/a2/a3
	rts

	SECTION "RectShH__DRAWLIST__TPUjssss:0",CODE


;void DRAWLIST::RectShH(uint32* colour, S_2CRD)
	XDEF	RectShH__DRAWLIST__TPUjssss
RectShH__DRAWLIST__TPUjssss
	movem.l	d2-d6/a2/a3/a6,-(a7)
	movem.l	$24(a7),a2/a6
	move.w	$2C(a7),d2
	move.w	$2E(a7),d3
	move.w	$32(a7),d4
	move.w	$30(a7),d5
L619
;	if (flags & ENFORCESTATE)
	move.l	$A(a2),d0
	and.l	#$10000000,d0
	beq.b	L621
L620
;		Tri(0, x1,y1, x1,y1, x1,y1);
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	clr.l	-(a7)
	move.l	a2,-(a7)
	jsr	Tri__DRAWLIST__TUjssssss
	add.w	#$14,a7
;		flags &= ~ENFORCESTATE;
	and.l	#$EFFFFFFF,$A(a2)
L621
;	if (vertsUsed+6 > vBufSize || instsUsed+4 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L623
L622
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L624
L623
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L624
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L626
L625
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L635
L626
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L634
L627
	tst.l	d0
	beq.b	L629
L628
	or.l	#1,$A(a0)
	bra.b	L630
L629
	and.l	#-2,$A(a0)
L630
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L632
L631
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L633
L632
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L633
L634
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L635
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp0
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	move.l	d0,$18(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	movem.l	(a7)+,d2-d6/a2/a3/a6
	rts

	SECTION "RectShV__DRAWLIST__TPUjssss:0",CODE


;void DRAWLIST::RectShV(uint32* colour, S_2CRD)
	XDEF	RectShV__DRAWLIST__TPUjssss
RectShV__DRAWLIST__TPUjssss
	movem.l	d2-d6/a2/a3/a6,-(a7)
	movem.l	$24(a7),a2/a6
	move.w	$2C(a7),d2
	move.w	$2E(a7),d3
	move.w	$32(a7),d4
	move.w	$30(a7),d5
L636
;	if (flags & ENFORCESTATE)
	move.l	$A(a2),d0
	and.l	#$10000000,d0
	beq.b	L638
L637
;		Tri(0, x1,y1, x1,y1, x1,y1);
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	clr.l	-(a7)
	move.l	a2,-(a7)
	jsr	Tri__DRAWLIST__TUjssssss
	add.w	#$14,a7
;		flags &= ~ENFORCESTATE;
	and.l	#$EFFFFFFF,$A(a2)
L638
;	if (vertsUsed+6 > vBufSize || instsUsed+4 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L640
L639
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L641
L640
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L641
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L643
L642
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L652
L643
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L651
L644
	tst.l	d0
	beq.b	L646
L645
	or.l	#1,$A(a0)
	bra.b	L647
L646
	and.l	#-2,$A(a0)
L647
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L649
L648
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L650
L649
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L650
L651
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L652
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp0
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	move.l	4(a6),$18(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	movem.l	(a7)+,d2-d6/a2/a3/a6
	rts

	SECTION "RectShA__DRAWLIST__TPUjssss:0",CODE


;void DRAWLIST::RectShA(uint32* colour, S_2CRD)
	XDEF	RectShA__DRAWLIST__TPUjssss
RectShA__DRAWLIST__TPUjssss
	movem.l	d2-d6/a2/a3/a6,-(a7)
	movem.l	$24(a7),a2/a6
	move.w	$2C(a7),d2
	move.w	$2E(a7),d3
	move.w	$32(a7),d4
	move.w	$30(a7),d5
L653
;	if (flags & ENFORCESTATE)
	move.l	$A(a2),d0
	and.l	#$10000000,d0
	beq.b	L655
L654
;		Tri(0, x1,y1, x1,y1, x1,y1);
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	clr.l	-(a7)
	move.l	a2,-(a7)
	jsr	Tri__DRAWLIST__TUjssssss
	add.w	#$14,a7
;		flags &= ~ENFORCESTATE;
	and.l	#$EFFFFFFF,$A(a2)
L655
;	if (vertsUsed+6 > vBufSize || instsUsed+4 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L657
L656
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L658
L657
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L658
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L660
L659
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L669
L660
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L668
L661
	tst.l	d0
	beq.b	L663
L662
	or.l	#1,$A(a0)
	bra.b	L664
L663
	and.l	#-2,$A(a0)
L664
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L666
L665
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L667
L666
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L667
L668
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L669
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp0
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),d0
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[2];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	$8(a6),$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[1];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	4(a6),$18(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[3];
	move.l	a0,a1
	add.w	#$20,a0
	move.l	$C(a6),$18(a1)
;		v->x = x1;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = colour[2];
	move.l	a0,a1
	move.l	$8(a6),$18(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	movem.l	(a7)+,d2-d6/a2/a3/a6
	rts

	SECTION "RectTlTx__DRAWLIST__TUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectTlTx(uint32 colour, S_2CRD, TEXARG)
	XDEF	RectTlTx__DRAWLIST__TUjssssP08xTEXSURFssff
RectTlTx__DRAWLIST__TUjssssP08xTEXSURFssff
L685	EQU	0
	link	a5,#L685
	movem.l	d2-d7/a2/a3,-(a7)
	fmovem.x fp2/fp3,-(a7)
	move.l	$C(a5),d2
	move.w	$1E(a5),d3
	move.w	$12(a5),d4
	move.w	$16(a5),d5
	move.w	$1C(a5),d7
	move.l	$8(a5),a2
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp2
	fmove.s	$20(a5),fp3
L670
;	if (vertsUsed+6 > vBufSize || instsUsed+6 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L672
L671
	move.l	$2A(a2),d0
	addq.l	#6,d0
	cmp.l	$22(a2),d0
	ble.b	L673
L672
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L673
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(colour);
	move.l	d2,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L675
L674
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L684
L675
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L683
L676
	tst.l	d0
	beq.b	L678
L677
	or.l	#1,$A(a0)
	bra.b	L679
L678
	and.l	#-2,$A(a0)
L679
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L681
L680
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L682
L681
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L682
L683
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L684
;		rfloat32 tu = ((x2-x1)/tSclX)+tOfsX;
	move.w	$14(a5),d0
	ext.l	d0
	move.w	$10(a5),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp1
	fdiv.x	fp3,fp1
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp1
;		rfloat32 tv = ((y2-y1)/tSclY)+tOfsY;
	move.w	d5,d0
	ext.l	d0
	move.w	d4,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp0
	fdiv.x	fp2,fp0
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp2
	fadd.x	fp2,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp2
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tOfsX;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tOfsX;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tOfsX;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3
	movem.l	(a7)+,d2-d7/a2/a3
	unlk	a5
	rts

	SECTION "RectTlTxShH__DRAWLIST__TPUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectTlTxShH(uint32* colour, S_2CRD, TEXARG)
	XDEF	RectTlTxShH__DRAWLIST__TPUjssssP08xTEXSURFssff
RectTlTxShH__DRAWLIST__TPUjssssP08xTEXSURFssff
L701	EQU	0
	link	a5,#L701
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1E(a5),d2
	move.w	$12(a5),d3
	move.w	$16(a5),d4
	move.w	$1C(a5),d5
	move.w	$10(a5),d7
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp2
	fmove.s	$20(a5),fp3
L686
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L688
L687
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L689
L688
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L689
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L691
L690
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L700
L691
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L699
L692
	tst.l	d0
	beq.b	L694
L693
	or.l	#1,$A(a0)
	bra.b	L695
L694
	and.l	#-2,$A(a0)
L695
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L697
L696
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L698
L697
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L698
L699
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L700
;		rfloat32 tu = ((x2-x1)/tSclX)+tOfsX;
	move.w	$14(a5),d0
	ext.l	d0
	move.w	d7,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp1
	fdiv.x	fp3,fp1
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp1
;		rfloat32 tv = ((y2-y1)/tSclY)+tOfsY;
	move.w	d4,d0
	ext.l	d0
	move.w	d3,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp0
	fdiv.x	fp2,fp0
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp2
	fadd.x	fp2,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp2
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectTlTxShV__DRAWLIST__TPUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectTlTxShV(uint32* colour, S_2CRD, TEXARG)
	XDEF	RectTlTxShV__DRAWLIST__TPUjssssP08xTEXSURFssff
RectTlTxShV__DRAWLIST__TPUjssssP08xTEXSURFssff
L717	EQU	0
	link	a5,#L717
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1E(a5),d2
	move.w	$12(a5),d3
	move.w	$16(a5),d4
	move.w	$1C(a5),d5
	move.w	$10(a5),d7
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp2
	fmove.s	$20(a5),fp3
L702
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L704
L703
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L705
L704
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L705
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L707
L706
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L716
L707
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L715
L708
	tst.l	d0
	beq.b	L710
L709
	or.l	#1,$A(a0)
	bra.b	L711
L710
	and.l	#-2,$A(a0)
L711
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L713
L712
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L714
L713
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L714
L715
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L716
;		rfloat32 tu = ((x2-x1)/tSclX)+tOfsX;
	move.w	$14(a5),d0
	ext.l	d0
	move.w	d7,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp1
	fdiv.x	fp3,fp1
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp1
;		rfloat32 tv = ((y2-y1)/tSclY)+tOfsY;
	move.w	d4,d0
	ext.l	d0
	move.w	d3,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp0
	fdiv.x	fp2,fp0
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp2
	fadd.x	fp2,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp2
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectTlTxShA__DRAWLIST__TPUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectTlTxShA(uint32* colour, S_2CRD, TEXARG)
	XDEF	RectTlTxShA__DRAWLIST__TPUjssssP08xTEXSURFssff
RectTlTxShA__DRAWLIST__TPUjssssP08xTEXSURFssff
L733	EQU	0
	link	a5,#L733
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1E(a5),d2
	move.w	$12(a5),d3
	move.w	$16(a5),d4
	move.w	$1C(a5),d5
	move.w	$10(a5),d7
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp2
	fmove.s	$20(a5),fp3
L718
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L720
L719
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L721
L720
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L721
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L723
L722
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L732
L723
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L731
L724
	tst.l	d0
	beq.b	L726
L725
	or.l	#1,$A(a0)
	bra.b	L727
L726
	and.l	#-2,$A(a0)
L727
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L729
L728
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L730
L729
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L730
L731
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L732
;		rfloat32 tu = ((x2-x1)/tSclX)+tOfsX;
	move.w	$14(a5),d0
	ext.l	d0
	move.w	d7,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp1
	fdiv.x	fp3,fp1
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp1
;		rfloat32 tv = ((y2-y1)/tSclY)+tOfsY;
	move.w	d4,d0
	ext.l	d0
	move.w	d3,d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp0
	fdiv.x	fp2,fp0
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp2
	fadd.x	fp2,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp2
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[2];
	move.l	$8(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[3];
	move.l	$C(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp1,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,4(a0)
;	v->z = depth;
	fmove.s	fp2,$8(a0)
;	v->colour = colour[2];
	move.l	$8(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTx__DRAWLIST__TUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectScTx(uint32 colour, S_2CRD, TEXARG)
	XDEF	RectScTx__DRAWLIST__TUjssssP08xTEXSURFssff
RectScTx__DRAWLIST__TUjssssP08xTEXSURFssff
L749	EQU	0
	link	a5,#L749
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	move.l	$C(a5),d2
	move.w	$1E(a5),d3
	move.w	$1C(a5),d4
	move.w	$16(a5),d5
	move.w	$14(a5),d7
	move.l	$8(a5),a2
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp3
	fmove.s	$20(a5),fp4
L734
;	if (vertsUsed+6 > vBufSize || instsUsed+6 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L736
L735
	move.l	$2A(a2),d0
	addq.l	#6,d0
	cmp.l	$22(a2),d0
	ble.b	L737
L736
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L737
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(colour);
	move.l	d2,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L739
L738
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L748
L739
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L747
L740
	tst.l	d0
	beq.b	L742
L741
	or.l	#1,$A(a0)
	bra.b	L743
L742
	and.l	#-2,$A(a0)
L743
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L745
L744
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L746
L745
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L746
L747
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L748
;		rfloat32 tu = (t->Width()/tSclX)+tOfsX;
	move.l	a3,a0
	move.l	$8(a0),a1
	move.l	a0,d0
	add.l	$2C(a1),d0
	move.l	d0,-(a7)
	move.l	$28(a1),a1
	jsr	(a1)
	addq.w	#4,a7
	fmove.l	d0,fp2
	fdiv.x	fp4,fp2
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp2
;		rfloat32 tv = (t->Height()/tSclY)+tOfsY;
	move.l	a3,a1
	move.l	$8(a1),a0
	move.l	a3,d0
	add.l	$24(a0),d0
	move.l	d0,-(a7)
	move.l	$20(a0),a0
	jsr	(a0)
	addq.w	#4,a7
	fmove.l	d0,fp0
	fdiv.x	fp3,fp0
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fadd.x	fp1,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp1
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	$12(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tOfsX;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	$12(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tOfsX;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	$12(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,(a0)
;	v->y = y2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour;
	move.l	d2,$18(a0)
; v->u = tOfsX;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTxShH__DRAWLIST__TPUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectScTxShH(uint32* colour, S_2CRD, TEXARG)
	XDEF	RectScTxShH__DRAWLIST__TPUjssssP08xTEXSURFssff
RectScTxShH__DRAWLIST__TPUjssssP08xTEXSURFssff
L765	EQU	-4
	link	a5,#L765
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1E(a5),d2
	move.w	$1C(a5),d3
	move.w	$16(a5),d4
	move.w	$14(a5),d5
	move.w	$12(a5),d7
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp3
	fmove.s	$20(a5),fp4
L750
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L752
L751
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L753
L752
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L753
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L755
L754
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L764
L755
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L763
L756
	tst.l	d0
	beq.b	L758
L757
	or.l	#1,$A(a0)
	bra.b	L759
L758
	and.l	#-2,$A(a0)
L759
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L761
L760
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L762
L761
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),-4(a5)
	move.l	-4(a5),a1
	lea	$8(a1),a1
	move.l	a1,$1A(a0)
	move.l	-4(a5),a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L762
L763
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L764
;		rfloat32 tu = (t->Width()/tSclX)+tOfsX;
	move.l	a3,a0
	move.l	$8(a0),a1
	move.l	a0,d0
	add.l	$2C(a1),d0
	move.l	d0,-(a7)
	move.l	$28(a1),a1
	jsr	(a1)
	addq.w	#4,a7
	fmove.l	d0,fp2
	fdiv.x	fp4,fp2
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp2
;		rfloat32 tv = (t->Height()/tSclY)+tOfsY;
	move.l	a3,a1
	move.l	$8(a1),a0
	move.l	a3,d0
	add.l	$24(a0),d0
	move.l	d0,-(a7)
	move.l	$20(a0),a0
	jsr	(a0)
	addq.w	#4,a7
	fmove.l	d0,fp0
	fdiv.x	fp3,fp0
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fadd.x	fp1,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp1
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTxShV__DRAWLIST__TPUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectScTxShV(uint32* colour, S_2CRD, TEXARG)
	XDEF	RectScTxShV__DRAWLIST__TPUjssssP08xTEXSURFssff
RectScTxShV__DRAWLIST__TPUjssssP08xTEXSURFssff
L781	EQU	-4
	link	a5,#L781
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1E(a5),d2
	move.w	$1C(a5),d3
	move.w	$16(a5),d4
	move.w	$14(a5),d5
	move.w	$12(a5),d7
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp3
	fmove.s	$20(a5),fp4
L766
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L768
L767
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L769
L768
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L769
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L771
L770
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L780
L771
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L779
L772
	tst.l	d0
	beq.b	L774
L773
	or.l	#1,$A(a0)
	bra.b	L775
L774
	and.l	#-2,$A(a0)
L775
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L777
L776
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L778
L777
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),-4(a5)
	move.l	-4(a5),a1
	lea	$8(a1),a1
	move.l	a1,$1A(a0)
	move.l	-4(a5),a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L778
L779
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L780
;		rfloat32 tu = (t->Width()/tSclX)+tOfsX;
	move.l	a3,a0
	move.l	$8(a0),a1
	move.l	a0,d0
	add.l	$2C(a1),d0
	move.l	d0,-(a7)
	move.l	$28(a1),a1
	jsr	(a1)
	addq.w	#4,a7
	fmove.l	d0,fp2
	fdiv.x	fp4,fp2
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp2
;		rfloat32 tv = (t->Height()/tSclY)+tOfsY;
	move.l	a3,a1
	move.l	$8(a1),a0
	move.l	a3,d0
	add.l	$24(a0),d0
	move.l	d0,-(a7)
	move.l	$20(a0),a0
	jsr	(a0)
	addq.w	#4,a7
	fmove.l	d0,fp0
	fdiv.x	fp3,fp0
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fadd.x	fp1,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp1
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "RectScTxShA__DRAWLIST__TPUjssssP08xTEXSURFssff:0",CODE


;void DRAWLIST::RectScTxShA(uint32* colour, S_2CRD, TEXARG)
	XDEF	RectScTxShA__DRAWLIST__TPUjssssP08xTEXSURFssff
RectScTxShA__DRAWLIST__TPUjssssP08xTEXSURFssff
L797	EQU	-4
	link	a5,#L797
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	movem.l	$8(a5),a2/a6
	move.w	$1E(a5),d2
	move.w	$1C(a5),d3
	move.w	$16(a5),d4
	move.w	$14(a5),d5
	move.w	$12(a5),d7
	move.l	$18(a5),a3
	fmove.s	$24(a5),fp3
	fmove.s	$20(a5),fp4
L782
;	if (vertsUsed+6 > vBufSize || instsUsed+5 > iBufSize)
	move.l	$26(a2),d0
	addq.l	#6,d0
	cmp.l	$1E(a2),d0
	bgt.b	L784
L783
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L785
L784
;		Flush();
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L785
;	Enable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetTexture(t);
	move.l	a3,-(a7)
	move.l	a2,-(a7)
	jsr	SetTexture__DRAWLIST__TP08xTEXSURF
	addq.w	#$8,a7
;	if (commandReg==DRW_TRIANGLES)		
	move.l	$2E(a2),d0
	cmp.l	#$9,d0
	bne.b	L787
L786
;	if (commandReg==DRW_TRIANGLES)		(c
	move.l	$1A(a2),a0
	subq.w	#$8,a0
	addq.l	#6,4(a0)
	bra	L796
L787
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L795
L788
	tst.l	d0
	beq.b	L790
L789
	or.l	#1,$A(a0)
	bra.b	L791
L790
	and.l	#-2,$A(a0)
L791
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L793
L792
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L794
L793
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),-4(a5)
	move.l	-4(a5),a1
	lea	$8(a1),a1
	move.l	a1,$1A(a0)
	move.l	-4(a5),a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L794
L795
;		commandReg = currInst->opcode = DRW_TRIANGLES;
	move.l	$1A(a2),a0
	move.l	#$9,(a0)
	move.l	#$9,$2E(a2)
; (currInst++)->numVerts = 6;
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	#6,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
L796
;		rfloat32 tu = (t->Width()/tSclX)+tOfsX;
	move.l	a3,a0
	move.l	$8(a0),a1
	move.l	a0,d0
	add.l	$2C(a1),d0
	move.l	d0,-(a7)
	move.l	$28(a1),a1
	jsr	(a1)
	addq.w	#4,a7
	fmove.l	d0,fp2
	fdiv.x	fp4,fp2
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp0
	fadd.x	fp0,fp2
;		rfloat32 tv = (t->Height()/tSclY)+tOfsY;
	move.l	a3,a1
	move.l	$8(a1),a0
	move.l	a3,d0
	add.l	$24(a0),d0
	move.l	d0,-(a7)
	move.l	$20(a0),a0
	jsr	(a0)
	addq.w	#4,a7
	fmove.l	d0,fp0
	fdiv.x	fp3,fp0
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp1
	fadd.x	fp1,fp0
;		register DVERTEX* v = currVert;
	move.l	$16(a2),a0
;		rfloat32 depth = depthReg;
	fmove.s	$3A(a2),fp1
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[0];
	move.l	a6,a1
	move.l	(a1),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[2];
	move.l	$8(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[1];
	move.l	4(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tOfsY;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp3
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp3,$14(a1)
;		v->x = x2;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp3
	fmove.s	fp3,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[3];
	move.l	$C(a6),$18(a0)
;	v->u = tu;
	fmove.s	fp2,$10(a0)
; 		(v++)->v = tv;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$14(a1)
;		v->x = x1;
	move.w	$10(a5),d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,(a0)
;	v->y = y2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp2
	fmove.s	fp2,4(a0)
;	v->z = depth;
	fmove.s	fp1,$8(a0)
;	v->colour = colour[2];
	move.l	$8(a6),$18(a0)
;	v->u = tOfsX;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp1
	fmove.s	fp1,$10(a0)
; (v++)->v = tv;
	move.l	a0,a1
	fmove.s	fp0,$14(a1)
;		currVert = v;
	lea	$20(a0),a0
	move.l	a0,$16(a2)
;		vertsUsed += 6;
	addq.l	#6,$26(a2)
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "Circle__DRAWLIST__TUjsss:0",CODE


;void DRAWLIST::Circle(uint32 colour, S_1CRD, sint16 rad)
	XDEF	Circle__DRAWLIST__TUjsss
Circle__DRAWLIST__TUjsss
	movem.l	d2-d6/a2/a3,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.w	$74(a7),d3
	move.w	$72(a7),d4
	move.w	$70(a7),d5
	move.l	$6C(a7),d6
	move.l	$68(a7),a2
L798
;	if (rad > 96)				
	cmp.w	#$60,d3
	ble.b	L800
L799
;	if (rad > 96)				segs = 4*DRAW_TSIZE;
	moveq	#$40,d2
	bra.b	L805
L800
;	else if (rad > 48)	
	cmp.w	#$30,d3
	ble.b	L802
L801
;	else if (rad > 48)	segs = 2*DRAW_TSIZE;
	moveq	#$20,d2
	bra.b	L805
L802
;	else if (rad > 12)	
	cmp.w	#$C,d3
	ble.b	L804
L803
;	else if (rad > 12)	segs = DRAW_TSIZE;
	moveq	#$10,d2
	bra.b	L805
L804
;	else								segs = DRAW_TSIZE/2;
	moveq	#$8,d2
L805
;	if (vertsUsed+segs+2 > vBufSize || instsUsed+5 > iBufSize) 
	move.l	$26(a2),d0
	add.l	d2,d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L807
L806
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L808
L807
;sUsed+segs+2 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L808
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Disable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(colour);
	move.l	d6,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L816
L809
	tst.l	d0
	beq.b	L811
L810
	or.l	#1,$A(a0)
	bra.b	L812
L811
	and.l	#-2,$A(a0)
L812
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L814
L813
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L815
L814
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L815
L816
;		commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a2),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a2)
; (currInst++)->numVerts = segs+2;
	move.l	d2,d0
	addq.l	#2,d0
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d0,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		rfloat32 fx = x;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp2
;		rfloat32 fy = y;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 fr = rad;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp5
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		rfloat32 fd = depthReg;
	fmove.s	$3A(a2),fp0
;		v->x = fx;
	fmove.s	fp2,(a0)
;			v->y = fy;
	fmove.s	fp1,4(a0)
;			(v++)->z = fd;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp0,$8(a1)
;		segs = (4*DRAW_TSIZE)/segs;
	moveq	#$40,d0
	divsl.l	d2,d0
	move.l	d0,d2
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	moveq	#$10,d1
	divsl.l	d2,d1
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp2,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp2,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp1,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp2,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp2,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp1,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp2,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	moveq	#1,d3
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d2,d0
	bra	L818
L817
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.x	fp5,fp4
	fmul.s	0(a1,d0.l*4),fp4
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	moveq	#$10,d4
	sub.l	d0,d4
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d4.l*4),fp3
	fmul.x	fp5,fp3
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d3,d4
	asl.l	#5,d4
	move.l	$16(a2),a0
	add.l	d4,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp2,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d4
	moveq	#5,d5
	asl.l	d5,d4
	add.l	d4,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp2,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d4
	moveq	#5,d5
	asl.l	d5,d4
	add.l	d4,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp2,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	move.l	d1,d4
	moveq	#5,d5
	asl.l	d5,d4
	add.l	d4,a0
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp2,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.x	fp1,fp3
	fsub.x	fp4,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	fmove.s	fp0,$8(a0)
	addq.l	#1,d3
	add.l	d2,d0
L818
	cmp.l	#$10,d0
	blt	L817
L819
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
;		CIRCLE_EDGE(v,fx,fy,fr,fd,segs)
	lea	$40(a0),a0
	move.l	a0,$16(a2)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a3
	rts

	SECTION "CircleShC__DRAWLIST__TPUjsss:0",CODE


;void DRAWLIST::CircleShC(uint32* colour, S_1CRD, sint16 rad)
	XDEF	CircleShC__DRAWLIST__TPUjsss
CircleShC__DRAWLIST__TPUjsss
	movem.l	d2-d6/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	movem.l	$6C(a7),a2/a3
	move.w	$78(a7),d2
	move.w	$76(a7),d4
	move.w	$74(a7),d5
L820
;	if (rad > 96)				
	cmp.w	#$60,d2
	ble.b	L822
L821
;	if (rad > 96)				segs = 4*DRAW_TSIZE;
	moveq	#$40,d3
	bra.b	L827
L822
;	else if (rad > 48)	
	cmp.w	#$30,d2
	ble.b	L824
L823
;	else if (rad > 48)	segs = 2*DRAW_TSIZE;
	moveq	#$20,d3
	bra.b	L827
L824
;	else if (rad > 12)	
	cmp.w	#$C,d2
	ble.b	L826
L825
;	else if (rad > 12)	segs = DRAW_TSIZE;
	moveq	#$10,d3
	bra.b	L827
L826
;	else								segs = DRAW_TSIZE/2;
	moveq	#$8,d3
L827
;	if (vertsUsed+segs+2 > vBufSize || instsUsed+4 > iBufSize) 
	move.l	$26(a2),d0
	add.l	d3,d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L829
L828
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L830
L829
;sUsed+segs+2 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L830
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L838
L831
	tst.l	d0
	beq.b	L833
L832
	or.l	#1,$A(a0)
	bra.b	L834
L833
	and.l	#-2,$A(a0)
L834
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L836
L835
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L837
L836
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L837
L838
;		commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a2),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a2)
; (currInst++)->numVerts = segs+2;
	move.l	d3,d0
	addq.l	#2,d0
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d0,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		rfloat32 fx = x;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp2
;		rfloat32 fy = y;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 fr = rad;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp5
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		rfloat32 fd = depthReg;
	fmove.s	$3A(a2),fp0
;		ruint32 clr = *(colour++);
	move.l	(a3)+,d0
;		v->x = fx;
	fmove.s	fp2,(a0)
;			v->y = fy;
	fmove.s	fp1,4(a0)
;			v->z = fd;
	fmove.s	fp0,$8(a0)
;	(v++)->colour = clr;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		clr = *colour;
	move.l	a3,a1
	move.l	(a1),d0
;		segs = (4*DRAW_TSIZE)/segs;
	moveq	#$40,d1
	divsl.l	d3,d1
	move.l	d1,d3
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	moveq	#$10,d2
	divsl.l	d3,d2
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp2,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp1,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp2,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp1,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	moveq	#1,d4
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d3,d1
	bra	L840
L839
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.x	fp5,fp4
	fmul.s	0(a1,d1.l*4),fp4
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	moveq	#$10,d5
	sub.l	d1,d5
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d5.l*4),fp3
	fmul.x	fp5,fp3
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d4,d5
	asl.l	#5,d5
	move.l	$16(a2),a0
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp2,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp2,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp2,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp2,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp3
	fsub.x	fp4,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
	addq.l	#1,d4
	add.l	d3,d1
L840
	cmp.l	#$10,d1
	blt	L839
L841
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	lea	$40(a0),a0
	move.l	a0,$16(a2)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d6/a2/a3/a6
	rts

	SECTION "CircleShPt__DRAWLIST__TPUjsssss:0",CODE


;void DRAWLIST::CircleShPt(uint32* colour, S_2CRD, sint16 rad)
	XDEF	CircleShPt__DRAWLIST__TPUjsssss
CircleShPt__DRAWLIST__TPUjsssss
L864	EQU	-$14
	link	a5,#L864
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	movem.l	$8(a5),a2/a3
	move.w	$18(a5),d2
	move.w	$12(a5),d4
	move.w	$10(a5),d5
	move.w	$16(a5),d7
L842
;	if (rad > 96)				
	cmp.w	#$60,d2
	ble.b	L844
L843
;	if (rad > 96)				segs = 4*DRAW_TSIZE;
	moveq	#$40,d3
	bra.b	L849
L844
;	else if (rad > 48)	
	cmp.w	#$30,d2
	ble.b	L846
L845
;	else if (rad > 48)	segs = 2*DRAW_TSIZE;
	moveq	#$20,d3
	bra.b	L849
L846
;	else if (rad > 12)	
	cmp.w	#$C,d2
	ble.b	L848
L847
;	else if (rad > 12)	segs = DRAW_TSIZE;
	moveq	#$10,d3
	bra.b	L849
L848
;	else								segs = DRAW_TSIZE/2;
	moveq	#$8,d3
L849
;	if (vertsUsed+segs+2 > vBufSize || instsUsed+4 > iBufSize) 
	move.l	$26(a2),d0
	add.l	d3,d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L851
L850
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L852
L851
;sUsed+segs+2 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L852
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L860
L853
	tst.l	d0
	beq.b	L855
L854
	or.l	#1,$A(a0)
	bra.b	L856
L855
	and.l	#-2,$A(a0)
L856
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L858
L857
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L859
L858
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L859
L860
;		commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a2),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a2)
; (currInst++)->numVerts = segs+2;
	move.l	d3,d0
	addq.l	#2,d0
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d0,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		rfloat32 fx = x2;
	move.w	$14(a5),d0
	ext.l	d0
	fmove.l	d0,fp1
;		rfloat32 fy = y2;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp0
;		rfloat32 fr = rad;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp5
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		rfloat32 fd = depthReg;
	fmove.s	$3A(a2),fp2
;		ruint32 clr = *(colour++);
	move.l	(a3)+,d0
;		v->x = fx;
	fmove.s	fp1,(a0)
;			v->y = fy;
	fmove.s	fp0,4(a0)
;			v->z = fd;
	fmove.s	fp2,$8(a0)
;	(v++)->colour = clr;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		fx = x1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp1
; fy = y1;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
;		clr = *colour;
	move.l	a3,a1
	move.l	(a1),d0
;		segs = (4*DRAW_TSIZE)/segs;
	moveq	#$40,d1
	divsl.l	d3,d1
	move.l	d1,d3
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	moveq	#$10,d2
	divsl.l	d3,d2
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp1,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp1,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp3
	fadd.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp0,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp1,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp3
	fsub.x	fp5,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	moveq	#1,d4
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d3,d1
	bra	L862
L861
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.x	fp5,fp4
	fmul.s	0(a1,d1.l*4),fp4
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	moveq	#$10,d5
	sub.l	d1,d5
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d5.l*4),fp3
	fmul.x	fp5,fp3
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d4,d5
	asl.l	#5,d5
	move.l	$16(a2),a0
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp1,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.x	fp0,fp3
	fsub.x	fp4,fp3
	fmove.s	fp3,4(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	fmove.s	fp2,$8(a0)
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	move.l	d0,$18(a0)
	addq.l	#1,d4
	add.l	d3,d1
L862
	cmp.l	#$10,d1
	blt	L861
L863
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
;		CIRCLE_EDGE_CLR(v,fx,fy,fr
	lea	$40(a0),a0
	move.l	a0,$16(a2)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "Elipse__DRAWLIST__TUjssss:0",CODE


;void DRAWLIST::Elipse(uint32 col, S_2CRD)
	XDEF	Elipse__DRAWLIST__TUjssss
Elipse__DRAWLIST__TUjssss
L890	EQU	-$1C
	link	a5,#L890
	movem.l	d2-d7/a2/a3,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.w	$16(a5),d3
	move.w	$14(a5),d4
	move.w	$12(a5),d5
	move.l	$C(a5),d6
	move.w	$10(a5),d7
	move.l	$8(a5),a2
L865
;		sint32 rad = (x2>y2) ? x2 : y2;
	cmp.w	d3,d4
	ble.b	L867
L866
	move.w	d4,d0
	bra.b	L868
L867
	move.w	d3,d0
L868
	ext.l	d0
;		if (rad > 96)				
	cmp.l	#$60,d0
	ble.b	L870
L869
;		if (rad > 96)				segs = 4*DRAW_TSIZE;
	moveq	#$40,d2
	bra.b	L875
L870
;		else if (rad > 48)	
	cmp.l	#$30,d0
	ble.b	L872
L871
;		else if (rad > 48)	segs = 2*DRAW_TSIZE;
	moveq	#$20,d2
	bra.b	L875
L872
;		else if (rad > 12)	
	cmp.l	#$C,d0
	ble.b	L874
L873
;		else if (rad > 12)	segs = DRAW_TSIZE;
	moveq	#$10,d2
	bra.b	L875
L874
;		else								segs = DRAW_TSIZE/2;
	moveq	#$8,d2
L875
;	if (vertsUsed+segs+2 > vBufSize || instsUsed+5 > iBufSize) 
	move.l	$26(a2),d0
	add.l	d2,d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L877
L876
	move.l	$2A(a2),d0
	addq.l	#5,d0
	cmp.l	$22(a2),d0
	ble.b	L878
L877
;sUsed+segs+2 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L878
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Disable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	SetColour(col);
	move.l	d6,-(a7)
	move.l	a2,-(a7)
	jsr	SetColour__DRAWLIST__TUj
	addq.w	#$8,a7
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L886
L879
	tst.l	d0
	beq.b	L881
L880
	or.l	#1,$A(a0)
	bra.b	L882
L881
	and.l	#-2,$A(a0)
L882
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L884
L883
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L885
L884
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a3
	lea	$8(a3),a1
	move.l	a1,$1A(a0)
	move.l	a3,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L885
L886
;		commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a2),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a2)
; (currInst++)->numVerts = segs+2;
	move.l	d2,d0
	addq.l	#2,d0
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d0,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		rfloat32 fx = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp4
;		rfloat32 fy = y1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 frx = x2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,-$1C(a5)
; rfloat32 fry = y2;
	move.w	d3,d0
	ext.l	d0
	fmove.l	d0,fp5
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		rfloat32 fd = depthReg;
	fmove.s	$3A(a2),fp2
;		v->x = fx;
	fmove.s	fp4,(a0)
;			v->y = fy;
	fmove.s	fp3,4(a0)
;			(v++)->z = fd;
	move.l	a0,a1
	add.w	#$20,a0
	fmove.s	fp2,$8(a1)
;		segs = (4*DRAW_TSIZE)/segs;
	moveq	#$40,d0
	divsl.l	d2,d0
	move.l	d0,d2
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	moveq	#$10,d1
	divsl.l	d2,d1
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp4,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp3,fp0
	fsub.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp4,fp0
	fadd.s	-$1C(a5),fp0
	fmove.s	fp0,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp3,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp4,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp3,fp0
	fadd.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp4,fp0
	fsub.s	-$1C(a5),fp0
	fmove.s	fp0,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp3,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d0
	moveq	#5,d3
	asl.l	d3,d0
	add.l	d0,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp4,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp3,fp0
	fsub.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	moveq	#1,d3
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d2,d0
	bra	L888
L887
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d0.l*4),fp1
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	moveq	#$10,d4
	sub.l	d0,d4
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d4.l*4),fp0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d3,d4
	asl.l	#5,d4
	move.l	$16(a2),a0
	add.l	d4,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp1,fp6
	fmul.s	-$1C(a5),fp6
	fmove.s	fp4,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp0,fp6
	fmul.x	fp5,fp6
	fmove.s	fp3,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d4
	moveq	#5,d5
	asl.l	d5,d4
	add.l	d4,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp0,fp6
	fmul.s	-$1C(a5),fp6
	fmove.s	fp4,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp1,fp6
	fmul.x	fp5,fp6
	fmove.s	fp3,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d4
	moveq	#5,d5
	asl.l	d5,d4
	add.l	d4,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp1,fp6
	fmul.s	-$1C(a5),fp6
	fmove.s	fp4,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.x	fp0,fp6
	fmul.x	fp5,fp6
	fmove.s	fp3,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	move.l	d1,d4
	moveq	#5,d5
	asl.l	d5,d4
	add.l	d4,a0
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmul.s	-$1C(a5),fp0
	fmove.x	fp4,fp6
	fsub.x	fp0,fp6
	fmove.s	fp6,(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmul.x	fp5,fp1
	fmove.x	fp3,fp0
	fsub.x	fp1,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	fmove.s	fp2,$8(a0)
	addq.l	#1,d3
	add.l	d2,d0
L888
	cmp.l	#$10,d0
	blt	L887
L889
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
;		ELIPSE_EDGE(v,fx,fy,frx,fry,f
	lea	$40(a0),a0
	move.l	a0,$16(a2)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d7/a2/a3
	unlk	a5
	rts

	SECTION "ElipseShC__DRAWLIST__TPUjssss:0",CODE


;void DRAWLIST::ElipseShC(uint32* col, S_2CRD)
	XDEF	ElipseShC__DRAWLIST__TPUjssss
ElipseShC__DRAWLIST__TPUjssss
L916	EQU	-$20
	link	a5,#L916
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	movem.l	$8(a5),a2/a3
	move.w	$16(a5),d2
	move.w	$14(a5),d4
	move.w	$12(a5),d5
	move.w	$10(a5),d7
L891
;		sint32 rad = (x2>y2) ? x2 : y2;
	cmp.w	d2,d4
	ble.b	L893
L892
	move.w	d4,d0
	bra.b	L894
L893
	move.w	d2,d0
L894
	ext.l	d0
;		if (rad > 96)				
	cmp.l	#$60,d0
	ble.b	L896
L895
;		if (rad > 96)				segs = 4*DRAW_TSIZE;
	moveq	#$40,d3
	bra.b	L901
L896
;		else if (rad > 48)	
	cmp.l	#$30,d0
	ble.b	L898
L897
;		else if (rad > 48)	segs = 2*DRAW_TSIZE;
	moveq	#$20,d3
	bra.b	L901
L898
;		else if (rad > 12)	
	cmp.l	#$C,d0
	ble.b	L900
L899
;		else if (rad > 12)	segs = DRAW_TSIZE;
	moveq	#$10,d3
	bra.b	L901
L900
;		else								segs = DRAW_TSIZE/2;
	moveq	#$8,d3
L901
;	if (vertsUsed+segs+2 > vBufSize || instsUsed+4 > iBufSize) 
	move.l	$26(a2),d0
	add.l	d3,d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L903
L902
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L904
L903
;sUsed+segs+2 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L904
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L912
L905
	tst.l	d0
	beq.b	L907
L906
	or.l	#1,$A(a0)
	bra.b	L908
L907
	and.l	#-2,$A(a0)
L908
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L910
L909
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L911
L910
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L911
L912
;		commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a2),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a2)
; (currInst++)->numVerts = segs+2;
	move.l	d3,d0
	addq.l	#2,d0
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d0,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		rfloat32 fx = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp4
;		rfloat32 fy = y1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 frx = x2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,-$20(a5)
; rfloat32 fry = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp5
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		rfloat32 fd = depthReg;
	fmove.s	$3A(a2),fp2
;		ruint32 clr = *(col++);
	move.l	(a3)+,d0
;		v->x = fx;
	fmove.s	fp4,(a0)
;			v->y = fy;
	fmove.s	fp3,4(a0)
;			v->z = fd;
	fmove.s	fp2,$8(a0)
;	(v++)->colour = clr;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		clr = *col;
	move.l	a3,a1
	move.l	(a1),d0
;		segs = (4*DRAW_TSIZE)/segs;
	moveq	#$40,d1
	divsl.l	d3,d1
	move.l	d1,d3
;		ELIPSE_EDGE_CLR(v,fx,
	moveq	#$10,d2
	divsl.l	d3,d2
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp3,fp0
	fsub.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp4,fp0
	fadd.s	-$20(a5),fp0
	fmove.s	fp0,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp3,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp3,fp0
	fadd.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp4,fp0
	fsub.s	-$20(a5),fp0
	fmove.s	fp0,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp3,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp3,fp0
	fsub.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	moveq	#1,d4
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d3,d1
	bra	L914
L913
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d1.l*4),fp1
;		ELIPSE_EDGE_CLR(v,fx,
	moveq	#$10,d5
	sub.l	d1,d5
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d5.l*4),fp0
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d4,d5
	asl.l	#5,d5
	move.l	$16(a2),a0
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp1,fp6
	fmul.s	-$20(a5),fp6
	fmove.s	fp4,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp0,fp6
	fmul.x	fp5,fp6
	fmove.s	fp3,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp0,fp6
	fmul.s	-$20(a5),fp6
	fmove.s	fp4,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp1,fp6
	fmul.x	fp5,fp6
	fmove.s	fp3,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp1,fp6
	fmul.s	-$20(a5),fp6
	fmove.s	fp4,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp0,fp6
	fmul.x	fp5,fp6
	fmove.s	fp3,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmul.s	-$20(a5),fp0
	fmove.x	fp4,fp6
	fsub.x	fp0,fp6
	fmove.s	fp6,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmul.x	fp5,fp1
	fmove.x	fp3,fp0
	fsub.x	fp1,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
	addq.l	#1,d4
	add.l	d3,d1
L914
	cmp.l	#$10,d1
	blt	L913
L915
;		ELIPSE_EDGE_CLR(v,fx,
;		ELIPSE_EDGE_CLR(v,fx,
	lea	$40(a0),a0
	move.l	a0,$16(a2)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	SECTION "ElipseShPt__DRAWLIST__TPUjssssss:0",CODE


;void DRAWLIST::ElipseShPt(uint32* col, S_3CRD)
	XDEF	ElipseShPt__DRAWLIST__TPUjssssss
ElipseShPt__DRAWLIST__TPUjssssss
L942	EQU	-$20
	link	a5,#L942
	movem.l	d2-d7/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	movem.l	$8(a5),a2/a3
	move.w	$16(a5),d2
	move.w	$14(a5),d4
	move.w	$12(a5),d5
	move.w	$10(a5),d7
L917
;		sint32 rad = (x2>y2) ? x2 : y2;
	cmp.w	d2,d4
	ble.b	L919
L918
	move.w	d4,d0
	bra.b	L920
L919
	move.w	d2,d0
L920
	ext.l	d0
;		if (rad > 96)				
	cmp.l	#$60,d0
	ble.b	L922
L921
;		if (rad > 96)				segs = 4*DRAW_TSIZE;
	moveq	#$40,d3
	bra.b	L927
L922
;		else if (rad > 48)	
	cmp.l	#$30,d0
	ble.b	L924
L923
;		else if (rad > 48)	segs = 2*DRAW_TSIZE;
	moveq	#$20,d3
	bra.b	L927
L924
;		else if (rad > 12)	
	cmp.l	#$C,d0
	ble.b	L926
L925
;		else if (rad > 12)	segs = DRAW_TSIZE;
	moveq	#$10,d3
	bra.b	L927
L926
;		else								segs = DRAW_TSIZE/2;
	moveq	#$8,d3
L927
;	if (vertsUsed+segs+2 > vBufSize || instsUsed+4 > iBufSize) 
	move.l	$26(a2),d0
	add.l	d3,d0
	addq.l	#2,d0
	cmp.l	$1E(a2),d0
	bgt.b	L929
L928
	move.l	$2A(a2),d0
	addq.l	#4,d0
	cmp.l	$22(a2),d0
	ble.b	L930
L929
;sUsed+segs+2 > vB
	move.l	a2,-(a7)
	jsr	Flush__DRAWLIST__T
	addq.w	#4,a7
L930
;	Disable(TEXTURE);
	pea	$100.w
	move.l	a2,-(a7)
	jsr	Disable__DRAWLIST__TE
	addq.w	#$8,a7
;	Enable(GOURAUD);
	pea	$400.w
	move.l	a2,-(a7)
	jsr	Enable__DRAWLIST__TE
	addq.w	#$8,a7
;		LockMode(LOCKED);
	moveq	#1,d0
	move.l	a2,a0
	move.l	$A(a0),d1
	and.l	#1,d1
	cmp.l	d0,d1
	beq.b	L938
L931
	tst.l	d0
	beq.b	L933
L932
	or.l	#1,$A(a0)
	bra.b	L934
L933
	and.l	#-2,$A(a0)
L934
	move.l	$2E(a0),d1
	cmp.l	#$1A,d1
	bne.b	L936
L935
	move.l	$1A(a0),a0
	move.l	d0,-4(a0)
	bra.b	L937
L936
	move.l	$1A(a0),a1
	move.l	#$1A,(a1)
	move.l	#$1A,$2E(a0)
	move.l	$1A(a0),a6
	lea	$8(a6),a1
	move.l	a1,$1A(a0)
	move.l	a6,a1
	move.l	d0,4(a1)
	addq.l	#1,$2A(a0)
L937
L938
;		commandReg = currInst->opcode = DRW_TRIFAN;
	move.l	$1A(a2),a0
	move.l	#$A,(a0)
	move.l	#$A,$2E(a2)
; (currInst++)->numVerts = segs+2;
	move.l	d3,d0
	addq.l	#2,d0
	move.l	$1A(a2),a1
	lea	$8(a1),a0
	move.l	a0,$1A(a2)
	move.l	d0,4(a1)
;		instsUsed++;
	addq.l	#1,$2A(a2)
;		rfloat32 fx = x3;
	move.w	$18(a5),d0
	ext.l	d0
	fmove.l	d0,fp3
;		rfloat32 fy = y3;
	move.w	$1A(a5),d0
	ext.l	d0
	fmove.l	d0,fp2
;		rfloat32 frx = x2;
	move.w	d4,d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	fp0,-$20(a5)
; rfloat32 fry = y2;
	move.w	d2,d0
	ext.l	d0
	fmove.l	d0,fp5
;		register DVERTEX* v = currVert++;
	move.l	$16(a2),a0
	lea	$20(a0),a1
	move.l	a1,$16(a2)
;		rfloat32 fd = depthReg;
	fmove.s	$3A(a2),fp4
;		ruint32 clr = *(col++);
	move.l	(a3)+,d0
;		v->x = fx;
	fmove.s	fp3,(a0)
;			v->y = fy;
	fmove.s	fp2,4(a0)
;			v->z = fd;
	fmove.s	fp4,$8(a0)
;	(v++)->colour = clr;
	move.l	a0,a1
	add.w	#$20,a0
	move.l	d0,$18(a1)
;		fx = x1;
	move.w	d7,d0
	ext.l	d0
	fmove.l	d0,fp3
; fy = y1;
	move.w	d5,d0
	ext.l	d0
	fmove.l	d0,fp2
;		clr = *col;
	move.l	a3,a1
	move.l	(a1),d0
;		segs = (4*DRAW_TSIZE)/segs;
	moveq	#$40,d1
	divsl.l	d3,d1
	move.l	d1,d3
;		ELIPSE_EDGE_CLR(v,fx,
	moveq	#$10,d2
	divsl.l	d3,d2
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp3,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp2,fp0
	fsub.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp3,fp0
	fadd.s	-$20(a5),fp0
	fmove.s	fp0,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp3,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp2,fp0
	fadd.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp3,fp0
	fsub.s	-$20(a5),fp0
	fmove.s	fp0,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp2,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d1
	moveq	#5,d4
	asl.l	d4,d1
	add.l	d1,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp3,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp2,fp0
	fsub.x	fp5,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	moveq	#1,d4
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d3,d1
	bra	L940
L939
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d1.l*4),fp1
;		ELIPSE_EDGE_CLR(v,fx,
	moveq	#$10,d5
	sub.l	d1,d5
	move.l	#_qTrigTab__DRAWLIST,a1
	fmove.s	0(a1,d5.l*4),fp0
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d4,d5
	asl.l	#5,d5
	move.l	$16(a2),a0
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp1,fp6
	fmul.s	-$20(a5),fp6
	fmove.s	fp3,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp0,fp6
	fmul.x	fp5,fp6
	fmove.s	fp2,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp0,fp6
	fmul.s	-$20(a5),fp6
	fmove.s	fp3,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp1,fp6
	fmul.x	fp5,fp6
	fmove.s	fp2,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp1,fp6
	fmul.s	-$20(a5),fp6
	fmove.s	fp3,fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.x	fp0,fp6
	fmul.x	fp5,fp6
	fmove.s	fp2,fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d2,d5
	moveq	#5,d6
	asl.l	d6,d5
	add.l	d5,a0
;		ELIPSE_EDGE_CLR(v,fx,
	fmul.s	-$20(a5),fp0
	fmove.x	fp3,fp6
	fsub.x	fp0,fp6
	fmove.s	fp6,(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmul.x	fp5,fp1
	fmove.x	fp2,fp0
	fsub.x	fp1,fp0
	fmove.s	fp0,4(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	fmove.s	fp4,$8(a0)
;		ELIPSE_EDGE_CLR(v,fx,
	move.l	d0,$18(a0)
	addq.l	#1,d4
	add.l	d3,d1
L940
	cmp.l	#$10,d1
	blt	L939
L941
;		ELIPSE_EDGE_CLR(v,fx,
;		ELIPSE_EDGE_CLR(v,fx,
	lea	$40(a0),a0
	move.l	a0,$16(a2)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,d2-d7/a2/a3/a6
	unlk	a5
	rts

	END
