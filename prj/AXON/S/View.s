
; Storm C Compiler
; Mendoza:Extropia/eXtropia/prj/AXON/View.cpp
	mc68030
	mc68881
	XREF	_0dt__BUILDING__T
	XREF	Render__BUILDING__TR04VIEW
	XREF	Place__BUILDING__TRC05VEC3Dfsss
	XREF	_0dt__PINETREE__T
	XREF	Render__PINETREE__TR04VIEW
	XREF	Place__PINETREE__TRC05VEC3Dfsss
	XREF	Render__RGBCUBE__TR04VIEW
	XREF	Place__RGBCUBE__TRC05VEC3Dfsss
	XREF	Render__MODEL__TR04VIEW
	XREF	Rotate__MODEL__Tsss
	XREF	Move__MODEL__TRC05VEC3D
	XREF	Place__MODEL__TRC05VEC3Dfsss
	XREF	ClipBox__MODEL__T
	XREF	_0dt__MAPCELL__T
	XREF	Visibility__MAPCELL__TR04VIEW
	XREF	op__multAsgn__TRANSFORM__TRC09TRANSFORM
	XREF	Rotate__TRANSFORM__Tfff
	XREF	Define__PLANE__TP03C3DP03C3DP03C3D
	XREF	Define__PLANE__TP05VEC3DP05VEC3DP05VEC3D
	XREF	_sqrt__r
	XREF	Release__xDRAW_
	XREF	Bind__xDRAW__P08xSURFACE
	XREF	FreeDepthBuffer__xDRAW_
	XREF	AllocDepthBuffer__xDRAW_
	XREF	Delete__xTEXTURE__T
	XREF	Create__xTEXTURE__TsssPvPUj
	XREF	Close__xDBWIN__T
	XREF	Open__xDBWIN__T
	XREF	Set__xDBWIN__TsssssPCc
	XREF	Idle__xDISPLAYIO_ASYNC__T
	XREF	Done__xDISPLAYIO_ASYNC__T
	XREF	Init__xDISPLAYIO_ASYNC__T
	XREF	MoveEvent__xDISPLAYIO__T
	XREF	ResizeEvent__xDISPLAYIO__T
	XREF	Idle__xDISPLAYIO__T
	XREF	HandleEvent__xDISPLAYIO__T
	XREF	ApplyInputModification__xDISPLAYIO__T
	XREF	ViewSurface__xDISPLAY__T
	XREF	DrawSurface__xDISPLAY__T
	XREF	Refresh__xDISPLAY__T
	XREF	Close__xDISPLAY__T
	XREF	Open__xDISPLAY__T
	XREF	_0dt__xSURFACE__T
	XREF	_0dt__POOL_ST__T
	XREF	_0ct__POOL_ST__TUsUj
	XREF	FreeT__POOL_ST__TPv
	XREF	NewT__POOL_ST__TPvUs
	XREF	NewT__POOL_ST__TPv
	XREF	Create__POOL_ST__TUsUj
	XREF	PrintAlloc__POOL_ST__TR07ostreamjj
	XREF	_0dt__POOL_LT__T
	XREF	Close__xFILEIO__T
	XREF	Write__xFILEIO__TPvUiUi
	XREF	Read__xFILEIO__TPvUiUi
	XREF	Open__xFILEIO__TPCcjj
	XREF	SendPacket__xFILEIO__TPv
	XREF	WaitPacket__xFILEIO__T
	XREF	InputQueued__xINPUT__T
	XREF	Idle__xINPUT__T
	XREF	ExitEvent__xINPUT__T
	XREF	KeyEvent__xINPUT__Tjs
	XREF	MouseEvent__xINPUT__Tjjj
	XREF	ApplyInputModification__xINPUT__T
	XREF	UnLink__xCHAINABLE__T
	XREF	_0ct__xTHREADABLE__TPCcUjjs
	XREF	ShutDown__xTHREADABLE__T
	XREF	Done__xTHREADABLE__T
	XREF	Init__xTHREADABLE__T
	XREF	_0dt__xLOCKABLE__T
	XREF	FreeLock__xLOCKABLE__Ts
	XREF	WaitLock__xLOCKABLE__T
	XREF	DebugInfo__MEM_
	XREF	_0dt__sysRTLIB__T
	XREF	MessageBox__sysBASELIB__PcPcPce
	XREF	_system
	XREF	op__leftshift__ostream__Td
	XREF	op__leftshift__ostream__Tf
	XREF	op__leftshift__ostream__TUj
	XREF	op__leftshift__ostream__Tj
	XREF	op__leftshift__ostream__TPCc
	XREF	op__leftshift__ostream__Tc
	XREF	opfx__ostream__T
	XREF	read__istream__TPci
	XREF	get__istream__TRc
	XREF	getline__istream__TPcic
	XREF	get__istream__TPcic
	XREF	op__rightshift__istream__TRc
	XREF	op__rightshift__istream__TPc
	XREF	doallocate__streambuf__T
	XREF	xsgetn__streambuf__TPci
	XREF	xsputn__streambuf__TPCci
	XREF	underflow__streambuf__T
	XREF	overflow__streambuf__Ti
	XREF	setbuf__streambuf__TPcUi
	XREF	sputn__streambuf__TPCci
	XREF	_0dt__streambuf__T
	XREF	userword__ios__Ti
	XREF	init__ios__TP09streambuf
	XREF	_ftell
	XREF	_fseek
	XREF	_fwrite
	XREF	_fread
	XREF	_vfprintf
	XREF	_sprintf
	XREF	_fflush
	XREF	_feof
	XREF	_fclose
	XREF	_fopen
	XREF	_fgets
	XREF	_memset
	XREF	_memmove
	XREF	_strncpy
	XREF	_std__in
	XREF	_std__out
	XREF	_std__err
	XREF	_basefield__ios
	XREF	_adjustfield__ios
	XREF	_floatfield__ios
	XREF	_aNextBit__ios
	XREF	_aNextWord__ios
	XREF	_cin
	XREF	_cout
	XREF	_cerr
	XREF	_clog
	XREF	_st
	XREF	_gxSt
	XREF	_errBuff__xBASELIB
	XREF	_errSev__xBASELIB
	XREF	_errTbl__xBASELIB
	XREF	_SysBase
	XREF	_IntuitionBase
	XREF	_DOSBase
	XREF	_sysData__sysBASELIB
	XREF	_msgbuff__sysBASELIB
	XREF	_main__sysBASELIB
	XREF	_allocated__MEM
	XREF	_totSize__MEM
	XREF	_nextFree__MEM
	XREF	_cnt__MEM
	XREF	_maxAllocs__MEM
	XREF	_GfxBase
	XREF	_TimerBase
	XREF	_TimerBase__xTIMABLE
	XREF	_current__xTIMABLE
	XREF	_clockFreq__xTIMABLE
	XREF	_threadCnt__xTHREADABLE
	XREF	_main__xTHREADABLE
	XREF	_CyberGfxBase
	XREF	_Warp3DBase
	XREF	_graphics__x2D
	XREF	_cyberGfx__x2D
	XREF	_formatNames__x2D
	XREF	_surfaceTypes__x2D
	XREF	_warp3D__x3D
	XREF	_hw3D__x3D
	XREF	_pointRender__x3D
	XREF	_lineRender__x3D
	XREF	_triangleRender__x3D
	XREF	_otherPrimitives__x3D
	XREF	_shadingModes__x3D
	XREF	_textureModes__x3D
	XREF	_textureFmts__x3D
	XREF	_alpha__x3D
	XREF	_fogModes__x3D
	XREF	_zBuffer__x3D
	XREF	_stencil__x3D
	XREF	_misc__x3D
	XREF	_primNames__x3D
	XREF	_renderNames__x3D
	XREF	_shadingNames__x3D
	XREF	_texModeNames__x3D
	XREF	_texFormatNames__x3D
	XREF	_alphaNames__x3D
	XREF	_fogNames__x3D
	XREF	_zBufferNames__x3D
	XREF	_stencilNames__x3D
	XREF	_miscNames__x3D
	XREF	_drawSurface__x3D
	XREF	_context__x3D
	XREF	_drawRegion__x3D
	XREF	_fogData__x3D
	XREF	_flags__xGFX
	XREF	_mode__xGFX
	XREF	_numModes__xGFX
	XREF	_rPool__xSURFACE
	XREF	_DiskfontBase
	XREF	_fontInfo__xDRAW
	XREF	_fontData__xDRAW
	XREF	_fonts__xDRAW
	XREF	_flags__xDRAW
	XREF	_flushCnt__xDRAW
	XREF	_cTab__xDRAW
	XREF	_sTab__xDRAW
	XREF	_fault__xDRAW
	XREF	_vBufPos__xDRAW
	XREF	_zDepth__xDRAW
	XREF	_maxVBufPos__xDRAW
	XREF	_vArraySize__xDRAW
	XREF	_vArray__xDRAW
	XREF	_vBuffer__xDRAW
	XREF	_nestCount__xDRAW
	XREF	_currentCol__xDRAW
	XREF	_sineData__QTRIG
	XREF	_gradData__QTRIG
	XREF	_vCachePtr__AXON
	XREF	_vCache__AXON
	XREF	_heap__TEXTUREHEAP
	XREF	_keys__TEXTUREHEAP
	XREF	_index__TEXTUREHEAP
	XREF	_heapSize__TEXTUREHEAP
	XREF	_lastTexture__TEXTUREHEAP
	XREF	_lastKey__TEXTUREHEAP
	XREF	_dimension__WORLDMAP
	XREF	_logDim__WORLDMAP
	XREF	_fracLimit__WORLDMAP
	XREF	_worldGrid__WORLDMAP
	XREF	_minZ__WORLDMAP
	XREF	_maxZ__WORLDMAP
	XREF	_floodLevel__WORLDMAP
	XREF	_scale__WORLDMAP
	XREF	_unitName__WORLDMAP
	XREF	_detailLevel__WORLDMAP
	XREF	_cell__WORLDMAP
	XREF	_visible__WORLDMAP
	XREF	_wet__WORLDMAP
	XREF	_things__WORLDMAP
	XREF	_frames__WORLDMAP
	XREF	_frameTime__WORLDMAP
	XREF	_totalTime__WORLDMAP
	XREF	_stopWatch__WORLDMAP
	XREF	_ground__WORLDMAP
	XREF	_water__WORLDMAP
	XREF	_count__PINETREE
	XREF	_texture__PINETREE
	XREF	_points__PINETREE
	XREF	_count__BUILDING
	XREF	_texture__BUILDING
	XREF	_points__BUILDING

	SECTION "_0ct__streampos__T:0",CODE

	rts

	SECTION "_0ct__VIEW__T:0",CODE


;VIEW::VIEW() 
	XDEF	_0ct__VIEW__T
_0ct__VIEW__T
	XREF	sym_handlers
L370	EQU	-$D0
	link	a5,#L370
	movem.l	a2/a3/a6,-(a7)
	fmovem.x fp2,-(a7)
L357
	move.l	sym_handlers,-$3C(a5)
	move.l	$8(a5),a3
	move.l	a3,-$38(a5)
	move.l	sym_handlers,-$34(a5)
	move.l	a3,-$58(a5)
	move.l	-$58(a5),-$30(a5)
	move.l	sym_handlers,-$2C(a5)
	move.l	-$58(a5),a0
	btst	#1,$8(a0)
	beq.b	L359
L358
	move.l	-$58(a5),a0
	move.l	(a0),a2
	move.l	a2,a1
	clr.l	4(a1)
	move.l	_SysBase,a6
	sub.l	a1,a1
	jsr	-$126(a6)
	move.l	a2,a1
	move.l	d0,(a1)
	pea	$2E.w
	clr.l	-(a7)
	pea	$8(a2)
	jsr	_memset
	add.w	#$C,a7
	move.l	_SysBase,a6
	lea	$8(a2),a0
	jsr	-$22E(a6)
	lea	-$70(a5),a0
	move.l	a2,-(a0)
	move.l	#_0dt__xLOCKABLE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
L359
	move.l	-$58(a5),a0
	btst	#0,$8(a0)
	beq.b	L361
L360
	move.l	-$58(a5),a0
	move.l	4(a0),a0
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$58(a5),a1
	move.l	a0,-(a1)
	move.l	#_0dt__AREA__T,-(a1)
	move.l	sym_handlers,-(a1)
	move.l	a1,sym_handlers
L361
	move.l	-$58(a5),a1
	clr.l	$4A(a1)
	move.l	-$58(a5),a1
	clr.l	$4E(a1)
	move.l	-$2C(a5),sym_handlers
	lea	-$A4(a5),a0
	move.l	-$30(a5),-(a0)
	move.l	#_0dt__xDISPLAY__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	a3,a0
	clr.l	$56(a0)
	move.l	a3,a0
	clr.w	$5A(a0)
	move.l	a3,a0
	clr.w	$5C(a0)
	lea	$5E(a3),a0
	move.l	sym_handlers,a1
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$3C(a5),a2
	move.l	a0,-(a2)
	move.l	#_0dt__AREA__T,-(a2)
	move.l	sym_handlers,-(a2)
	move.l	a2,sym_handlers
	clr.l	$C(a0)
	clr.l	$10(a0)
	clr.l	$14(a0)
	clr.l	$18(a0)
	clr.l	$1C(a0)
	move.l	a1,sym_handlers
	lea	-$B0(a5),a0
	lea	$5E(a3),a6
	move.l	a6,-(a0)
	move.l	#_0dt__xSURFACE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	lea	$7E(a3),a0
	move.l	sym_handlers,a1
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$48(a5),a2
	move.l	a0,-(a2)
	move.l	#_0dt__AREA__T,-(a2)
	move.l	sym_handlers,-(a2)
	move.l	a2,sym_handlers
	clr.l	$C(a0)
	clr.l	$10(a0)
	clr.l	$14(a0)
	clr.l	$18(a0)
	clr.l	$1C(a0)
	move.l	a1,sym_handlers
	lea	-$BC(a5),a0
	lea	$7E(a3),a6
	move.l	a6,-(a0)
	move.l	#_0dt__xSURFACE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	-$34(a5),sym_handlers
	lea	(a5),a0
	move.l	-$38(a5),-(a0)
	move.l	#_0dt__xDBWIN__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	$8(a5),-$28(a5)
	move.l	#$9E,d0
	add.l	-$28(a5),d0
	move.l	d0,-$8C(a5)
	move.l	-$8C(a5),-$28(a5)
	move.l	sym_handlers,-$24(a5)
	move.l	-$8C(a5),a0
	btst	#0,$C(a0)
	beq	L367
L362
	move.l	-$8C(a5),-$20(a5)
	move.l	-$20(a5),a0
	move.l	(a0),a3
	move.l	a3,-$20(a5)
	move.l	sym_handlers,-$1C(a5)
	move.l	a3,a0
	btst	#1,$8(a0)
	beq.b	L364
L363
	move.l	(a3),a2
	move.l	a2,a1
	clr.l	4(a1)
	move.l	_SysBase,a6
	sub.l	a1,a1
	jsr	-$126(a6)
	move.l	a2,a1
	move.l	d0,(a1)
	pea	$2E.w
	clr.l	-(a7)
	pea	$8(a2)
	jsr	_memset
	add.w	#$C,a7
	move.l	_SysBase,a6
	lea	$8(a2),a0
	jsr	-$22E(a6)
	lea	-$7C(a5),a0
	move.l	a2,-(a0)
	move.l	#_0dt__xLOCKABLE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
L364
	move.l	a3,a0
	btst	#0,$8(a0)
	beq.b	L366
L365
	move.l	4(a3),a0
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$64(a5),a1
	move.l	a0,-(a1)
	move.l	#_0dt__AREA__T,-(a1)
	move.l	sym_handlers,-(a1)
	move.l	a1,sym_handlers
L366
	move.l	a3,a1
	clr.l	$4A(a1)
	move.l	a3,a1
	clr.l	$4E(a1)
	move.l	-$1C(a5),sym_handlers
	lea	-$98(a5),a0
	move.l	-$20(a5),-(a0)
	move.l	#_0dt__xDISPLAY__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
L367
	move.l	-$8C(a5),a0
	addq.w	#4,a0
	move.l	#$8F,(a0)
	lea	-$8C(a5),a1
	move.l	a0,-(a1)
	move.l	#_0dt__xINPUT__T,-(a1)
	move.l	sym_handlers,-(a1)
	move.l	a1,sym_handlers
	move.l	-$24(a5),sym_handlers
	lea	-$C(a5),a0
	move.l	-$28(a5),-(a0)
	move.l	#_0dt__xDISPLAYIO__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	$8(a5),a1
	lea	$10C(a1),a0
	clr.l	(a0)
	clr.l	4(a0)
	clr.l	$8(a0)
	move.l	$8(a5),a1
	lea	$118(a1),a0
	moveq	#5,d0
L368
	add.w	#$C,a0
	subq.l	#1,d0
	tst.l	d0
	bpl.b	L368
L369
	move.l	$8(a5),a0
	move.l	#$41800000,$178(a0)
	move.l	$8(a5),a0
	move.l	#$10000,$180(a0)
	move.l	$8(a5),a0
	clr.w	$184(a0)
	move.l	$8(a5),a0
	move.w	#$5A,$186(a0)
;	aspect = 1F;
	move.l	$8(a5),a0
	move.l	#$3F800000,$17C(a0)
	move.l	-$3C(a5),sym_handlers
	fmovem.x (a7)+,fp2
	movem.l	(a7)+,a2/a3/a6
	unlk	a5
	rts

	SECTION "_0ct__VIEW__TsssssPCc:0",CODE


;VIEW::VIEW(S_RECT, sint16 d, const char* title) 
	XDEF	_0ct__VIEW__TsssssPCc
_0ct__VIEW__TsssssPCc
L388	EQU	-$DC
	link	a5,#L388
	movem.l	d2-d6/a2/a3/a6,-(a7)
	fmovem.x fp2,-(a7)
	move.w	$C(a5),d0
	move.w	$E(a5),d1
	move.w	$10(a5),d2
	move.w	$12(a5),d3
	move.w	$14(a5),d4
	move.l	$16(a5),a0
	move.l	$8(a5),a3
L371
	move.l	sym_handlers,-$3C(a5)
	move.l	a3,-$38(a5)
	move.l	a0,-$AC(a5)
	move.w	d4,d6
	move.w	d3,d5
	move.w	d2,d4
	move.w	d1,d3
	move.w	d0,d2
	move.l	-$38(a5),-$B0(a5)
	move.l	sym_handlers,-$34(a5)
	move.l	-$B0(a5),-$58(a5)
	move.l	-$58(a5),-$30(a5)
	move.l	sym_handlers,-$2C(a5)
	move.l	-$58(a5),a0
	btst	#1,$8(a0)
	beq.b	L373
L372
	move.l	-$58(a5),a0
	move.l	(a0),a2
	move.l	a2,a1
	clr.l	4(a1)
	move.l	_SysBase,a6
	sub.l	a1,a1
	jsr	-$126(a6)
	move.l	a2,a1
	move.l	d0,(a1)
	pea	$2E.w
	clr.l	-(a7)
	pea	$8(a2)
	jsr	_memset
	add.w	#$C,a7
	move.l	_SysBase,a6
	lea	$8(a2),a0
	jsr	-$22E(a6)
	lea	-$74(a5),a0
	move.l	a2,-(a0)
	move.l	#_0dt__xLOCKABLE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
L373
	move.l	-$58(a5),a0
	btst	#0,$8(a0)
	beq.b	L375
L374
	move.l	-$58(a5),a0
	move.l	4(a0),a0
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$5C(a5),a1
	move.l	a0,-(a1)
	move.l	#_0dt__AREA__T,-(a1)
	move.l	sym_handlers,-(a1)
	move.l	a1,sym_handlers
L375
	move.l	-$58(a5),a1
	clr.l	$4A(a1)
	move.l	-$58(a5),a1
	clr.l	$4E(a1)
	move.l	-$2C(a5),sym_handlers
	lea	-$C8(a5),a0
	move.l	-$30(a5),-(a0)
	move.l	#_0dt__xDISPLAY__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	-$B0(a5),a0
	clr.l	$56(a0)
	move.l	-$B0(a5),a0
	lea	$5E(a0),a6
	move.l	-$B0(a5),a1
	lea	$5E(a1),a0
	move.l	sym_handlers,a1
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$3C(a5),a2
	move.l	a0,-(a2)
	move.l	#_0dt__AREA__T,-(a2)
	move.l	sym_handlers,-(a2)
	move.l	a2,sym_handlers
	clr.l	$C(a0)
	clr.l	$10(a0)
	clr.l	$14(a0)
	clr.l	$18(a0)
	clr.l	$1C(a0)
	move.l	a1,sym_handlers
	lea	-$B0(a5),a0
	move.l	a6,-(a0)
	move.l	#_0dt__xSURFACE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	-$B0(a5),a0
	lea	$7E(a0),a6
	move.l	-$B0(a5),a1
	lea	$7E(a1),a0
	move.l	sym_handlers,a1
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$48(a5),a2
	move.l	a0,-(a2)
	move.l	#_0dt__AREA__T,-(a2)
	move.l	sym_handlers,-(a2)
	move.l	a2,sym_handlers
	clr.l	$C(a0)
	clr.l	$10(a0)
	clr.l	$14(a0)
	clr.l	$18(a0)
	clr.l	$1C(a0)
	move.l	a1,sym_handlers
	lea	-$BC(a5),a0
	move.l	a6,-(a0)
	move.l	#_0dt__xSURFACE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	-$AC(a5),-(a7)
	move.w	d6,-(a7)
	move.w	d5,-(a7)
	move.w	d4,-(a7)
	move.w	d3,-(a7)
	move.w	d2,-(a7)
	move.l	-$B0(a5),-(a7)
	jsr	Set__xDBWIN__TsssssPCc
	add.w	#$12,a7
	move.l	-$34(a5),sym_handlers
	lea	(a5),a0
	move.l	-$38(a5),-(a0)
	move.l	#_0dt__xDBWIN__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	move.l	a3,-$28(a5)
	move.l	#$9E,d0
	add.l	-$28(a5),d0
	move.l	d0,-$90(a5)
	move.l	-$90(a5),-$28(a5)
	move.l	sym_handlers,-$24(a5)
	move.l	-$90(a5),a0
	btst	#0,$C(a0)
	beq	L381
L376
	move.l	-$90(a5),-$20(a5)
	move.l	-$20(a5),a0
	move.l	(a0),-$5C(a5)
	move.l	-$5C(a5),-$20(a5)
	move.l	sym_handlers,-$1C(a5)
	move.l	-$5C(a5),a0
	btst	#1,$8(a0)
	beq.b	L378
L377
	move.l	-$5C(a5),a0
	move.l	(a0),a2
	move.l	a2,a1
	clr.l	4(a1)
	move.l	_SysBase,a6
	sub.l	a1,a1
	jsr	-$126(a6)
	move.l	a2,a1
	move.l	d0,(a1)
	pea	$2E.w
	clr.l	-(a7)
	pea	$8(a2)
	jsr	_memset
	add.w	#$C,a7
	move.l	_SysBase,a6
	lea	$8(a2),a0
	jsr	-$22E(a6)
	lea	-$80(a5),a0
	move.l	a2,-(a0)
	move.l	#_0dt__xLOCKABLE__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
L378
	move.l	-$5C(a5),a0
	btst	#0,$8(a0)
	beq.b	L380
L379
	move.l	-$5C(a5),a0
	move.l	4(a0),a0
	clr.w	(a0)
	clr.w	2(a0)
	clr.w	4(a0)
	move.w	#$F,6(a0)
	lea	-$68(a5),a1
	move.l	a0,-(a1)
	move.l	#_0dt__AREA__T,-(a1)
	move.l	sym_handlers,-(a1)
	move.l	a1,sym_handlers
L380
	move.l	-$5C(a5),a1
	clr.l	$4A(a1)
	move.l	-$5C(a5),a1
	clr.l	$4E(a1)
	move.l	-$1C(a5),sym_handlers
	lea	-$9C(a5),a0
	move.l	-$20(a5),-(a0)
	move.l	#_0dt__xDISPLAY__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
L381
	move.l	-$90(a5),a0
	addq.w	#4,a0
	move.l	#$8F,(a0)
	lea	-$90(a5),a1
	move.l	a0,-(a1)
	move.l	#_0dt__xINPUT__T,-(a1)
	move.l	sym_handlers,-(a1)
	move.l	a1,sym_handlers
	move.l	-$24(a5),sym_handlers
	lea	-$C(a5),a0
	move.l	-$28(a5),-(a0)
	move.l	#_0dt__xDISPLAYIO__T,-(a0)
	move.l	sym_handlers,-(a0)
	move.l	a0,sym_handlers
	lea	$10C(a3),a0
	clr.l	(a0)
	clr.l	4(a0)
	clr.l	$8(a0)
	lea	$118(a3),a0
	moveq	#5,d0
L382
	add.w	#$C,a0
	subq.l	#1,d0
	tst.l	d0
	bpl.b	L382
L383
	move.l	a3,a0
	move.l	#$41800000,$178(a0)
	move.l	a3,a0
	move.l	#$10070,$180(a0)
	move.l	a3,a0
	clr.w	$184(a0)
	move.l	a3,a0
	move.w	#$5A,$186(a0)
;	aspect = (float32)height/(float32)width;
	move.l	a3,a0
	cmp.w	#0,a0
	beq.b	L385
L384
	move.l	4(a0),a0
L385
	move.w	2(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a3,a0
	cmp.w	#0,a0
	beq.b	L387
L386
	move.l	4(a0),a0
L387
	move.w	(a0),d0
	ext.l	d0
	fmove.l	d0,fp1
	fdiv.x	fp1,fp0
	move.l	a3,a0
	fmove.s	fp0,$17C(a0)
	move.l	-$3C(a5),sym_handlers
	fmovem.x (a7)+,fp2
	movem.l	(a7)+,d2-d6/a2/a3/a6
	unlk	a5
	rts

	SECTION "_0dt__VIEW__T:0",CODE


;VIEW::~VIEW()
	XDEF	_0dt__VIEW__T
_0dt__VIEW__T
	move.l	a2,-(a7)
	move.l	$8(a7),a2
L389
;	Close();
	move.l	a2,-(a7)
	jsr	Close__VIEW__T
	addq.w	#4,a7
	lea	$9E(a2),a0
	btst	#0,$C(a0)
	beq.b	L395
L390
	move.l	(a0),a0
	btst	#0,$8(a0)
L391
L392
	btst	#1,$8(a0)
	beq.b	L394
L393
	move.l	(a0),-(a7)
	jsr	_0dt__xLOCKABLE__T
	addq.w	#4,a7
L394
L395
	move.l	a2,-(a7)
	jsr	Close__xDBWIN__T
	addq.w	#4,a7
	pea	$7E(a2)
	jsr	_0dt__xSURFACE__T
	addq.w	#4,a7
	pea	$5E(a2)
	jsr	_0dt__xSURFACE__T
	addq.w	#4,a7
	move.l	a2,a0
	btst	#0,$8(a0)
L396
L397
	btst	#1,$8(a0)
	beq.b	L399
L398
	move.l	(a0),-(a7)
	jsr	_0dt__xLOCKABLE__T
	addq.w	#4,a7
L399
	move.l	(a7)+,a2
	rts

	SECTION "Open__VIEW__T:0",CODE


;sint32 VIEW::Open()
	XDEF	Open__VIEW__T
Open__VIEW__T
	movem.l	d2/a2/a6,-(a7)
	move.l	$10(a7),a2
L403
;	aspect = (float32)height/(float32)width;
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L405
L404
	move.l	4(a0),a0
L405
	move.w	2(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L407
L406
	move.l	4(a0),a0
L407
	move.w	(a0),d0
	ext.l	d0
	fmove.l	d0,fp1
	fdiv.x	fp1,fp0
	move.l	a2,a0
	fmove.s	fp0,$17C(a0)
;	sint32 r = xDBWIN::Open();
	move.l	a2,-(a7)
	jsr	Open__xDBWIN__T
	addq.w	#4,a7
	move.l	d0,d2
;	if (r==OK)
	bne	L422
L408
;	
;		r = xDRAW::Bind(DrawSurface());
	move.l	a2,a0
	move.l	$52(a0),a1
	move.l	a0,d0
	add.l	$54(a1),d0
	move.l	d0,-(a7)
	move.l	$50(a1),a1
	jsr	(a1)
	addq.w	#4,a7
	move.l	d0,-(a7)
	jsr	Bind__xDRAW__P08xSURFACE
	addq.w	#4,a7
;		if (r==OK)
	tst.l	d0
	bne	L419
L409
;		
;			flags |= DRAW_BOUND;
	move.l	a2,a0
	move.l	$180(a0),d0
	or.l	#1,d0
	move.l	a2,a0
	move.l	d0,$180(a0)
;			r = xDRAW::AllocDepthBuffer();
	jsr	AllocDepthBuffer__xDRAW_
;			if (r==OK)
	tst.l	d0
	bne.b	L416
L410
;			
;				xDRAW::DepthCompareMode(xDRAW::DEPTH_LEQ);
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	moveq	#4,d1
	jsr	-$F6(a6)
	tst.l	d0
L411
L412
L413
;				flags |= ZBUFFER_OK;
	move.l	a2,a0
	move.l	$180(a0),d0
	or.l	#2,d0
	move.l	a2,a0
	move.l	d0,$180(a0)
;				SetInput(xINPUT::IDEFAULT);
	move.l	#$8F,d1
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L415
L414
	add.w	#$A2,a0
L415
	or.l	d1,(a0)
	move.l	4(a0),a1
	move.l	a0,d0
	add.l	$2C(a1),d0
	move.l	d0,-(a7)
	move.l	$28(a1),a1
	jsr	(a1)
	addq.w	#4,a7
	moveq	#0,d0
	movem.l	(a7)+,d2/a2/a6
	rts
L416
;			
;				cout << "VIEW::Open() : no z buffer available\n";
	move.l	#L400,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L418
L417
	addq.w	#4,a0
L418
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;				flags &= ~(DRAW_BOUND|ZBUFFER_OK);
	move.l	a2,a0
	move.l	$180(a0),d0
	and.l	#-4,d0
	move.l	a2,a0
	move.l	d0,$180(a0)
;				xDRAW::Release();
	jsr	Release__xDRAW_
;				xDBWIN::Close();
	move.l	a2,-(a7)
	jsr	Close__xDBWIN__T
	addq.w	#4,a7
	move.l	#-$3800000,d0
	movem.l	(a7)+,d2/a2/a6
	rts
L419
;		cout << "VIEW::Open() : couldn't Bind() draw surface\n";
	move.l	#L401,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L421
L420
	addq.w	#4,a0
L421
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;		xDBWIN::Close();
	move.l	a2,-(a7)
	jsr	Close__xDBWIN__T
	addq.w	#4,a7
	move.l	#-$3800000,d0
	movem.l	(a7)+,d2/a2/a6
	rts
L422
;	cout << "VIEW::Open() : couldn't create display\n";
	move.l	#L402,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L424
L423
	addq.w	#4,a0
L424
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d2,d0
	movem.l	(a7)+,d2/a2/a6
	rts

L401
	dc.b	'VIEW::Open() : couldn't Bind() draw surface',$A,0
L402
	dc.b	'VIEW::Open() : couldn't create display',$A,0
L400
	dc.b	'VIEW::Open() : no z buffer available',$A,0

	SECTION "Close__VIEW__T:0",CODE


;sint32 VIEW::Close()
	XDEF	Close__VIEW__T
Close__VIEW__T
	move.l	a2,-(a7)
	move.l	$8(a7),a2
L425
;	if (flags & ZBUFFER_OK)
	move.l	$180(a2),d0
	and.l	#2,d0
	beq.b	L427
L426
;	
;		flags &= ~ZBUFFER_OK;
	and.l	#-3,$180(a2)
;		xDRAW::FreeDepthBuffer();
	jsr	FreeDepthBuffer__xDRAW_
L427
;	if (flags & DRAW_BOUND)
	move.l	$180(a2),d0
	and.l	#1,d0
	beq.b	L429
L428
;	
;		flags &= ~DRAW_BOUND;
	and.l	#-2,$180(a2)
;		xDRAW::Release();
	jsr	Release__xDRAW_
L429
;	flags &= ~QUIT;
	and.l	#-$1000001,$180(a2)
	move.l	a2,-(a7)
	jsr	Close__xDBWIN__T
	addq.w	#4,a7
	move.l	(a7)+,a2
	rts

	SECTION "MouseEvent__VIEW__Tjjj:0",CODE


;void VIEW::MouseEvent(sint32 x, sint32 y, sint32 buttons)
	XDEF	MouseEvent__VIEW__Tjjj
MouseEvent__VIEW__Tjjj
	move.l	d2,-(a7)
	movem.l	$C(a7),d0-d2
L433
;	 cout << "Mouse [" << x << ", " << y << ", " << buttons << "]\n";
	move.l	#L430,-(a7)
	move.l	d2,-(a7)
	move.l	#L431,-(a7)
	move.l	d1,-(a7)
	move.l	#L431,-(a7)
	move.l	d0,-(a7)
	move.l	#L432,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L435
L434
	addq.w	#4,a0
L435
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	(a7)+,d2
	rts

L431
	dc.b	', ',0
L432
	dc.b	'Mouse [',0
L430
	dc.b	']',$A,0

	SECTION "KeyEvent__VIEW__Tjs:0",CODE


;void VIEW::KeyEvent(sint32 keyCode, bool state)
	XDEF	KeyEvent__VIEW__Tjs
KeyEvent__VIEW__Tjs
	move.l	$8(a7),d0
	move.w	$C(a7),d1
	move.l	4(a7),a0
L439
;	if (!state) // don't bother with key up events
	tst.w	d1
	bne.b	L441
L440
	rts
L441
;	switch (keyCode)
	cmp.l	#$4F,d0
	beq	L472
	bgt.b	L484
	cmp.l	#$3E,d0
	beq	L481
	bgt.b	L485
	cmp.l	#$1E,d0
	beq	L480
	bgt.b	L486
	cmp.l	#$B,d0
	beq	L476
	cmp.l	#$C,d0
	beq	L477
	bra	L482
L486
	cmp.l	#$2D,d0
	beq	L478
	cmp.l	#$2F,d0
	beq	L479
	bra	L482
L485
	cmp.l	#$4D,d0
	beq	L474
	bgt.b	L487
	cmp.l	#$45,d0
	beq.b	L442
	cmp.l	#$4C,d0
	beq	L475
	bra	L482
L487
	bgt	L473
L484
	sub.l	#$50,d0
	cmp.l	#$8,d0
	bhi	L482
	move.l	L488(pc,d0.l*4),a1
	jmp	(a1)
L488
	dc.l	L443
	dc.l	L444
	dc.l	L448
	dc.l	L452
	dc.l	L456
	dc.l	L460
	dc.l	L464
	dc.l	L468
	dc.l	L471
;	
;		
L442
;			flags |= QUIT;
	or.l	#$1000000,$180(a0)
;			
	bra	L483
L443
;			sysBASELIB::MessageBox("Info", "Proceed", "This is
	move.l	#L436,-(a7)
	move.l	#L437,-(a7)
	move.l	#L438,-(a7)
	jsr	MessageBox__sysBASELIB__PcPcPce
	add.w	#$C,a7
;			
	bra	L483
L444
;			if (flags & SHOWMAP)
	move.l	$180(a0),d0
	and.l	#4,d0
	beq.b	L446
L445
;				flags &= ~SHOWMAP;
	and.l	#-5,$180(a0)
	bra.b	L447
L446
;				flags |= SHOWMAP;
	or.l	#4,$180(a0)
L447
;			
	bra	L483
L448
;			if (flags & SHOWMAPC)
	move.l	$180(a0),d0
	and.l	#$8,d0
	beq.b	L450
L449
;				flags &= ~SHOWMAPC;
	and.l	#-$9,$180(a0)
	bra.b	L451
L450
;				flags |= SHOWMAPC;
	or.l	#$8,$180(a0)
L451
;			
	bra	L483
L452
;			if (flags & DETAIL)
	move.l	$180(a0),d0
	and.l	#$10,d0
	beq.b	L454
L453
;				flags &= ~DETAIL;
	and.l	#-$11,$180(a0)
	bra.b	L455
L454
;				flags |= DETAIL;
	or.l	#$10,$180(a0)
L455
;			
	bra	L483
L456
;			if (flags & MODELS)
	move.l	$180(a0),d0
	and.l	#$20,d0
	beq.b	L458
L457
;				flags &= ~MODELS;
	and.l	#-$21,$180(a0)
	bra.b	L459
L458
;				flags |= MODELS;
	or.l	#$20,$180(a0)
L459
;			
	bra	L483
L460
;			if (flags & WATER)
	move.l	$180(a0),d0
	and.l	#$40,d0
	beq.b	L462
L461
;				flags &= ~WATER;
	and.l	#-$41,$180(a0)
	bra.b	L463
L462
;				flags |= WATER;
	or.l	#$40,$180(a0)
L463
;			
	bra	L483
L464
;			if (flags & STATS)
	move.l	$180(a0),d0
	and.l	#$80,d0
	beq.b	L466
L465
;				flags &= ~STATS;
	and.l	#-$81,$180(a0)
	bra.b	L467
L466
;				flags |= STATS;
	or.l	#$80,$180(a0)
L467
;			
	bra	L483
L468
;			Dump(cout);
	move.l	_cout,a1
	cmp.w	#0,a1
	beq.b	L470
L469
	addq.w	#4,a1
L470
	move.l	a1,-(a7)
	move.l	a0,-(a7)
	jsr	Dump__VIEW__TR07ostream
	addq.w	#$8,a7
;			
	bra	L483
L471
;			MEM::DebugInfo();
	jsr	DebugInfo__MEM_
;			
	bra	L483
L472
;			Yaw(viewAngle+1);
	move.w	$184(a0),d0
	ext.l	d0
	addq.l	#1,d0
	move.w	d0,-(a7)
	move.l	a0,-(a7)
	jsr	Yaw__VIEW__Ts
	addq.w	#6,a7
;			
	bra	L483
L473
;			Yaw(viewAngle-1);
	move.w	$184(a0),d0
	ext.l	d0
	subq.l	#1,d0
	move.w	d0,-(a7)
	move.l	a0,-(a7)
	jsr	Yaw__VIEW__Ts
	addq.w	#6,a7
;			
	bra	L483
L474
;			Pitch(viewPitch-1);
	move.w	$186(a0),d0
	ext.l	d0
	subq.l	#1,d0
	move.w	d0,-(a7)
	move.l	a0,-(a7)
	jsr	Pitch__VIEW__Ts
	addq.w	#6,a7
;			
	bra	L483
L475
;			Pitch(viewPitch+1);
	move.w	$186(a0),d0
	ext.l	d0
	addq.l	#1,d0
	move.w	d0,-(a7)
	move.l	a0,-(a7)
	jsr	Pitch__VIEW__Ts
	addq.w	#6,a7
;			
	bra	L483
L476
;			Zoom(zoomLevel/1.01F);
	fmove.s	$178(a0),fp0
	fdiv.s	#$.3F8147AE,fp0
	fmove.s	fp0,-(a7)
	move.l	a0,-(a7)
	jsr	Zoom__VIEW__Tf
	addq.w	#$8,a7
;			
	bra	L483
L477
;			Zoom(zoomLevel*1.01F);
	fmove.s	$178(a0),fp0
	fmul.s	#$.3F8147AE,fp0
	fmove.s	fp0,-(a7)
	move.l	a0,-(a7)
	jsr	Zoom__VIEW__Tf
	addq.w	#$8,a7
;			
	bra	L483
L478
;			Move(prjOrigin.x-DeltaRight().x, prjOrigin.y-DeltaRight().y);
	lea	$118(a0),a1
	fmove.s	$110(a0),fp0
	fsub.s	$40(a1),fp0
	fmove.s	fp0,-(a7)
	lea	$118(a0),a1
	fmove.s	$10C(a0),fp0
	fsub.s	$3C(a1),fp0
	fmove.s	fp0,-(a7)
	move.l	a0,-(a7)
	jsr	Move__VIEW__Tff
	add.w	#$C,a7
;			
	bra	L483
L479
;			Move(prjOrigin.x+DeltaRight().x, prjOrigin.y+DeltaRight().y);
	lea	$118(a0),a1
	fmove.s	$110(a0),fp0
	fadd.s	$40(a1),fp0
	fmove.s	fp0,-(a7)
	lea	$118(a0),a1
	fmove.s	$10C(a0),fp0
	fadd.s	$3C(a1),fp0
	fmove.s	fp0,-(a7)
	move.l	a0,-(a7)
	jsr	Move__VIEW__Tff
	add.w	#$C,a7
;			
	bra.b	L483
L480
;			Move(prjOrigin.x-DeltaUp().x, prjOrigin.y-DeltaUp().y);
	lea	$118(a0),a1
	fmove.s	$110(a0),fp0
	fsub.s	$34(a1),fp0
	fmove.s	fp0,-(a7)
	lea	$118(a0),a1
	fmove.s	$10C(a0),fp0
	fsub.s	$30(a1),fp0
	fmove.s	fp0,-(a7)
	move.l	a0,-(a7)
	jsr	Move__VIEW__Tff
	add.w	#$C,a7
;			
	bra.b	L483
L481
;			Move(prjOrigin.x+DeltaUp().x, prjOrigin.y+DeltaUp().y);
	lea	$118(a0),a1
	fmove.s	$110(a0),fp0
	fadd.s	$34(a1),fp0
	fmove.s	fp0,-(a7)
	lea	$118(a0),a1
	fmove.s	$10C(a0),fp0
	fadd.s	$30(a1),fp0
	fmove.s	fp0,-(a7)
	move.l	a0,-(a7)
	jsr	Move__VIEW__Tff
	add.w	#$C,a7
;			
L482
;			
L483
	rts

L438
	dc.b	'Info',0
L437
	dc.b	'Proceed',0
L436
	dc.b	'This is not a PC.Pressing F1 isn't goint to help you!',$A,'Stop p'
	dc.b	'ressing useless keys!',0

	SECTION "ExitEvent__VIEW__T:0",CODE


;void VIEW::ExitEvent()
	XDEF	ExitEvent__VIEW__T
ExitEvent__VIEW__T
L490
;	cout << "Exit\n";
	move.l	#L489,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L492
L491
	addq.w	#4,a0
L492
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	rts

L489
	dc.b	'Exit',$A,0

	SECTION "ResizeEvent__VIEW__T:0",CODE


;void VIEW::ResizeEvent()
	XDEF	ResizeEvent__VIEW__T
ResizeEvent__VIEW__T
L494
;	cout << "Resize\n";
	move.l	#L493,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L496
L495
	addq.w	#4,a0
L496
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	rts

L493
	dc.b	'Resize',$A,0

	SECTION "MoveEvent__VIEW__T:0",CODE


;void VIEW::MoveEvent()
	XDEF	MoveEvent__VIEW__T
MoveEvent__VIEW__T
L498
;	cout << "Move\n";
	move.l	#L497,-(a7)
	move.l	_cout,a0
	cmp.w	#0,a0
	beq.b	L500
L499
	addq.w	#4,a0
L500
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	rts

L497
	dc.b	'Move',$A,0

	SECTION "Camera__VIEW__Tfffss:0",CODE


;void VIEW::Camera(float32 x, float32 y, float32 z, sint16 a, sint16 
	XDEF	Camera__VIEW__Tfffss
Camera__VIEW__Tfffss
	movem.l	d2-d4,-(a7)
	fmovem.x fp2/fp3/fp4,-(a7)
	move.w	$44(a7),d3
	move.w	$46(a7),d4
	move.l	$34(a7),a0
	fmove.s	$38(a7),fp0
	fmove.s	$40(a7),fp3
	fmove.s	$3C(a7),fp4
L501
;	flags |= CHANGED;
	or.l	#$20000,$180(a0)
;	prjOrigin.x = ClipFloat(x, 0.0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fcmp.x	fp1,fp0
	fboge.b	L503
L502
	fmove.x	fp1,fp0
	bra.b	L507
L503
	fcmp.x	fp2,fp0
	fbole.b	L505
L504
	fmove.x	fp2,fp0
L505
L506
L507
	fmove.s	fp0,$10C(a0)
;	prjOrigin.y = ClipFloat(y, 0.0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fmove.x	fp4,fp0
	fcmp.x	fp1,fp0
	fboge.b	L509
L508
	fmove.x	fp1,fp0
	bra.b	L513
L509
	fcmp.x	fp2,fp0
	fbole.b	L511
L510
	fmove.x	fp2,fp0
L511
L512
L513
	fmove.s	fp0,$110(a0)
;	zoomLevel		= ClipFloat(z, WORLDMAP::MinZoom(), WORLDMAP::MaxZoom())
	fmove.l	_dimension__WORLDMAP,fp0
	fmul.d	#$.3FE80000.00000000,fp0
	fmove.x	fp0,fp2
	fmove.l	_dimension__WORLDMAP,fp0
	fmul.d	#$.3FB00000.00000000,fp0
	fmove.x	fp0,fp1
	fmove.x	fp3,fp0
	fcmp.x	fp1,fp0
	fboge.b	L515
L514
	fmove.x	fp1,fp0
	bra.b	L519
L515
	fcmp.x	fp2,fp0
	fbole.b	L517
L516
	fmove.x	fp2,fp0
L517
L518
L519
	fmove.s	fp0,$178(a0)
;	viewAngle		= a;
	move.w	d3,$184(a0)
;	viewPitch		= ClipInt(p, 10, 90);
	moveq	#$5A,d2
	moveq	#$A,d1
	move.w	d4,d0
	ext.l	d0
	cmp.l	d1,d0
	bge.b	L521
L520
	move.l	d1,d0
	bra.b	L525
L521
	cmp.l	d2,d0
	ble.b	L523
L522
	move.l	d2,d0
L523
L524
L525
	move.w	d0,$186(a0)
;	vA = a % 360;
	move.w	d3,d0
	ext.l	d0
	divs	#$168,d0
	swap	d0
	ext.l	d0
	move.w	d0,$188(a0)
;	if (vA != 0)
	tst.w	$188(a0)
	beq.b	L530
L526
;		vA = (vA > 0) ? 360-vA : -vA;
	tst.w	$188(a0)
	beq.b	L528
L527
	moveq	#0,d0
	move.w	$188(a0),d0
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	bra.b	L529
L528
	moveq	#0,d0
	move.w	$188(a0),d0
	neg.l	d0
L529
	move.w	d0,$188(a0)
L530
;	if (vA%90==0)
	moveq	#0,d0
	move.w	$188(a0),d0
	divu	#$5A,d0
	swap	d0
	and.l	#$FFFF,d0
	bne.b	L532
L531
;		flags |= BOUNDS_PERP;
	or.l	#$10000,$180(a0)
	bra.b	L533
L532
;		flags &= ~BOUNDS_PERP;
	and.l	#-$10001,$180(a0)
L533
;	Project();
	move.l	a0,-(a7)
	jsr	Project__VIEW__T
	addq.w	#4,a7
	fmovem.x (a7)+,fp2/fp3/fp4
	movem.l	(a7)+,d2-d4
	rts

	SECTION "Display__VIEW__T:0",CODE


;void VIEW::Display()
	XDEF	Display__VIEW__T
Display__VIEW__T
L555	EQU	-$50
	link	a5,#L555
	movem.l	d2/d3/a2/a3/a6,-(a7)
	fmovem.x fp2/fp3,-(a7)
	move.l	$8(a5),a2
L534
;	register sysVERTEX* vt = Vertices(10);
	moveq	#$A,d2
	move.l	_vBufPos__xDRAW,d0
	add.l	d2,d0
	cmp.l	_vArraySize__xDRAW,d0
	blo.b	L538
L535
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	jsr	-$138(a6)
	move.l	_vBufPos__xDRAW,d0
	cmp.l	_maxVBufPos__xDRAW,d0
	ble.b	L537
L536
	move.l	_vBufPos__xDRAW,_maxVBufPos__xDRAW
L537
	clr.l	_vBufPos__xDRAW
	and.l	#-3,_flags__xDRAW
	addq.l	#1,_flushCnt__xDRAW
L538
	move.l	_vBufPos__xDRAW,d0
	asl.l	#6,d0
	move.l	_vBuffer__xDRAW,a1
	lea	0(a1,d0.l),a0
	add.l	d2,_vBufPos__xDRAW
	or.l	#$40,_flags__xDRAW
	move.l	a0,a3
;	
;		rfloat32 scaleF = width/WORLDMAP::Scale();
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L540
L539
	move.l	4(a0),a0
L540
	move.w	(a0),d0
	ext.l	d0
	fmove.l	d0,fp0
	fmove.s	_scale__WORLDMAP,fp1
	fdiv.x	fp1,fp0
;		rfloat32 offset = (height-width)/2F;
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L542
L541
	move.l	4(a0),a0
L542
	move.w	2(a0),d0
	ext.l	d0
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L544
L543
	move.l	4(a0),a0
L544
	move.w	(a0),d1
	ext.l	d1
	sub.l	d1,d0
	fmove.l	d0,fp1
	fdiv.s	#$.40000000,fp1
;		vt[0].x=scaleF*projected[0].x;
	fmove.s	$118(a2),fp2
	fmul.x	fp0,fp2
	move.l	a3,a0
	fmove.s	fp2,(a0)
;		vt[0].y=scaleF*(WORLDMAP::Scale()-projected[0].y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	fsub.s	$11C(a2),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	move.l	a3,a0
	fmove.s	fp2,4(a0)
;		vt[0].z=0;
	move.l	a3,a0
	clr.l	$8(a0)
	clr.l	$C(a0)
;		vt[1].x=scaleF*projected[1].x;
	lea	$118(a2),a0
	fmove.s	$C(a0),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$40(a3)
;		vt[1].y=scaleF*(WORLDMAP::Scale()-projected[1].y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	lea	$118(a2),a0
	fsub.s	$10(a0),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	fmove.s	fp2,$44(a3)
;		vt[1].z=0;
	clr.l	$48(a3)
	clr.l	$4C(a3)
;		vt[2].x=scaleF*projected[2].x;
	lea	$118(a2),a0
	fmove.s	$18(a0),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$80(a3)
;		vt[2].y=scaleF*(WORLDMAP::Scale()-projected[2].y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	lea	$118(a2),a0
	fsub.s	$1C(a0),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	fmove.s	fp2,$84(a3)
;		vt[2].z=0;
	clr.l	$88(a3)
	clr.l	$8C(a3)
;		vt[3].x=scaleF*projected[3].x;
	lea	$118(a2),a0
	fmove.s	$24(a0),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$C0(a3)
;		vt[3].y=scaleF*(WORLDMAP::Scale()-projected[3].y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	lea	$118(a2),a0
	fsub.s	$28(a0),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	fmove.s	fp2,$C4(a3)
;		vt[3].z=0;
	clr.l	$C8(a3)
	clr.l	$CC(a3)
;		vt[4].x=vt[0].x;
	move.l	a3,a0
	fmove.s	(a0),fp2
	fmove.s	fp2,$100(a3)
; vt[4].y=vt[0].y;
	move.l	a3,a0
	fmove.s	4(a0),fp2
	fmove.s	fp2,$104(a3)
; vt[4].z=0;
	clr.l	$108(a3)
	clr.l	$10C(a3)
;		vt[5].x=scaleF*boundTL.x;
	fmove.s	$160(a2),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$140(a3)
;					vt[5].y=scaleF*(WORLDMAP::Scale()-boundTL.y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	fsub.s	$164(a2),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	fmove.s	fp2,$144(a3)
;				vt[5].z=0;
	clr.l	$148(a3)
	clr.l	$14C(a3)
;		vt[6].x=scaleF*boundBR.x;
	fmove.s	$16C(a2),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$180(a3)
;					vt[6].y=scaleF*(WORLDMAP::Scale()-boundTL.y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	fsub.s	$164(a2),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	fmove.s	fp2,$184(a3)
;				vt[6].z=0;
	clr.l	$188(a3)
	clr.l	$18C(a3)
;		vt[7].x=scaleF*boundBR.x;
	fmove.s	$16C(a2),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$1C0(a3)
;					vt[7].y=scaleF*(WORLDMAP::Scale()-boundBR.y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	fsub.s	$170(a2),fp2
	fmul.x	fp0,fp2
	fadd.x	fp1,fp2
	fmove.s	fp2,$1C4(a3)
;				vt[7].z=0;
	clr.l	$1C8(a3)
	clr.l	$1CC(a3)
;		vt[8].x=scaleF*boundTL.x;
	fmove.s	$160(a2),fp2
	fmul.x	fp0,fp2
	fmove.s	fp2,$200(a3)
;					vt[8].y=scaleF*(WORLDMAP::Scale()-boundBR.y)+offset;
	fmove.s	_scale__WORLDMAP,fp2
	fsub.s	$170(a2),fp2
	fmul.x	fp2,fp0
	fadd.x	fp1,fp0
	fmove.s	fp0,$204(a3)
;				vt[8].z=0;
	clr.l	$208(a3)
	clr.l	$20C(a3)
;		vt[9].x=vt[5].x;
	move.l	$140(a3),$240(a3)
; vt[9].y=vt[5].y;
	move.l	$144(a3),$244(a3)
; vt[9].z=0;
	clr.l	$248(a3)
	clr.l	$24C(a3)
;	
;		SetColour(0xFFFFFF00);
	lea	-$10(a5),a0
	move.l	#-$100,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d3
	lsr.l	d3,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d3
	lsr.l	d3,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$10(a5),a1
	jsr	-$168(a6)
;		LineStrip(vt,5);
	moveq	#5,d2
	lea	-$38(a5),a0
	move.l	d2,(a0)+
	move.l	a3,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	cmp.l	#$C8,d2
	bls.b	L549
L545
	move.l	#$C9,-$38(a5)
	bra.b	L547
L546
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$38(a5),a1
	jsr	-$186(a6)
	lea	-$38(a5),a0
	move.l	4(a0),a0
	lea	$3200(a0),a0
	move.l	a0,-$34(a5)
	sub.l	#$C8,d2
L547
	cmp.l	#$C8,d2
	bhi.b	L546
L548
	move.l	d2,-$38(a5)
L549
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$38(a5),a1
	jsr	-$186(a6)
;		SetColour(0xFF0000FF);
	lea	-$20(a5),a0
	move.l	#-$FFFF01,d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d3
	lsr.l	d3,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d3
	lsr.l	d3,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d2.l*4),(a0)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	#_cTab__xDRAW,a2
	move.l	0(a2,d1.l*4),(a0)
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$20(a5),a1
	jsr	-$168(a6)
;		LineStrip(vt+5,5);
	moveq	#5,d2
	lea	-$50(a5),a0
	move.l	d2,(a0)+
	lea	$140(a3),a1
	move.l	a1,(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	clr.l	(a0)+
	cmp.l	#$C8,d2
	bls.b	L554
L550
	move.l	#$C9,-$50(a5)
	bra.b	L552
L551
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$50(a5),a1
	jsr	-$186(a6)
	lea	-$50(a5),a0
	move.l	4(a0),a0
	lea	$3200(a0),a0
	move.l	a0,-$4C(a5)
	sub.l	#$C8,d2
L552
	cmp.l	#$C8,d2
	bhi.b	L551
L553
	move.l	d2,-$50(a5)
L554
	move.l	_context__x3D,a0
	move.l	_Warp3DBase,a6
	lea	-$50(a5),a1
	jsr	-$186(a6)
	fmovem.x (a7)+,fp2/fp3
	movem.l	(a7)+,d2/d3/a2/a3/a6
	unlk	a5
	rts

	SECTION "Move__VIEW__Tff:0",CODE


;void VIEW::Move(float32 x, float32 y)
	XDEF	Move__VIEW__Tff
Move__VIEW__Tff
	fmovem.x fp2/fp3,-(a7)
	move.l	$1C(a7),a0
	fmove.s	$20(a7),fp0
	fmove.s	$24(a7),fp3
L556
;	RunAsyncProgram(st);
;	flags |= CHANGED;
	or.l	#$20000,$180(a0)
;	prjOrigin.x = ClipFloat(x, 0.0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fcmp.x	fp1,fp0
	fboge.b	L558
L557
	fmove.x	fp1,fp0
	bra.b	L562
L558
	fcmp.x	fp2,fp0
	fbole.b	L560
L559
	fmove.x	fp2,fp0
L560
L561
L562
	fmove.s	fp0,$10C(a0)
;	prjOrigin.y = ClipFloat(y, 0.0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fmove.x	fp3,fp0
	fcmp.x	fp1,fp0
	fboge.b	L564
L563
	fmove.x	fp1,fp0
	bra.b	L568
L564
	fcmp.x	fp2,fp0
	fbole.b	L566
L565
	fmove.x	fp2,fp0
L566
L567
L568
	fmove.s	fp0,$110(a0)
;	Project();
	move.l	a0,-(a7)
	jsr	Project__VIEW__T
	addq.w	#4,a7
	fmovem.x (a7)+,fp2/fp3
	rts

	SECTION "Zoom__VIEW__Tf:0",CODE


;void VIEW::Zoom(float32 z)
	XDEF	Zoom__VIEW__Tf
Zoom__VIEW__Tf
	fmovem.x fp2/fp3,-(a7)
	move.l	$1C(a7),a0
	fmove.s	$20(a7),fp3
L569
;	flags |= CHANGED;
	or.l	#$20000,$180(a0)
;	zoomLevel = ClipFloat(z, WORLDMAP::MinZoom(), WORLDMAP::MaxZoom());
	fmove.l	_dimension__WORLDMAP,fp0
	fmul.d	#$.3FE80000.00000000,fp0
	fmove.x	fp0,fp2
	fmove.l	_dimension__WORLDMAP,fp0
	fmul.d	#$.3FB00000.00000000,fp0
	fmove.x	fp0,fp1
	fmove.x	fp3,fp0
	fcmp.x	fp1,fp0
	fboge.b	L571
L570
	fmove.x	fp1,fp0
	bra.b	L575
L571
	fcmp.x	fp2,fp0
	fbole.b	L573
L572
	fmove.x	fp2,fp0
L573
L574
L575
	fmove.s	fp0,$178(a0)
	fmovem.x (a7)+,fp2/fp3
	rts

	SECTION "Yaw__VIEW__Ts:0",CODE


;void VIEW::Yaw(sint16 a)
	XDEF	Yaw__VIEW__Ts
Yaw__VIEW__Ts
	move.l	d2,-(a7)
	move.w	$C(a7),d1
	move.l	$8(a7),a0
L576
;	if (a != viewAngle)
	cmp.w	$184(a0),d1
	beq.b	L586
L577
;	
;		flags |= CHANGED;
	or.l	#$20000,$180(a0)
;		viewAngle = a%360;
	move.w	d1,d0
	ext.l	d0
	divs	#$168,d0
	swap	d0
	ext.l	d0
	move.w	d0,$184(a0)
;		if (viewAngle != 0)
	tst.w	$184(a0)
	beq.b	L582
L578
;			vA = (viewAngle > 0) ? 360-viewAngle : -viewAngle;
	move.w	$184(a0),d0
	cmp.w	#0,d0
	ble.b	L580
L579
	move.w	$184(a0),d0
	ext.l	d0
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	bra.b	L581
L580
	move.w	$184(a0),d0
	ext.l	d0
	neg.l	d0
L581
	move.w	d0,$188(a0)
	bra.b	L583
L582
;			vA = 0;
	clr.w	$188(a0)
L583
;		if (vA%90==0)
	moveq	#0,d0
	move.w	$188(a0),d0
	divu	#$5A,d0
	swap	d0
	and.l	#$FFFF,d0
	bne.b	L585
L584
;			flags |= BOUNDS_PERP;
	or.l	#$10000,$180(a0)
	bra.b	L586
L585
;			flags &= ~BOUNDS_PERP;
	and.l	#-$10001,$180(a0)
L586
	move.l	(a7)+,d2
	rts

	SECTION "Pitch__VIEW__Ts:0",CODE


;void VIEW::Pitch(sint16 p)
	XDEF	Pitch__VIEW__Ts
Pitch__VIEW__Ts
	movem.l	d2/d3,-(a7)
	move.w	$10(a7),d1
	move.l	$C(a7),a0
L587
;	p = ClipInt(p, 10, 90);
	moveq	#$5A,d3
	moveq	#$A,d2
	move.w	d1,d0
	ext.l	d0
	cmp.l	d2,d0
	bge.b	L589
L588
	move.l	d2,d0
	bra.b	L593
L589
	cmp.l	d3,d0
	ble.b	L591
L590
	move.l	d3,d0
L591
L592
L593
	move.w	d0,d1
;	if (p != viewPitch)
	cmp.w	$186(a0),d1
	beq.b	L595
L594
;	
;		flags |= CHANGED;
	or.l	#$20000,$180(a0)
;		viewPitch = p;
	move.w	d1,$186(a0)
L595
	movem.l	(a7)+,d2/d3
	rts

	SECTION "Project__VIEW__T:0",CODE


;void VIEW::Project()
	XDEF	Project__VIEW__T
Project__VIEW__T
L697	EQU	-$30
	link	a5,#L697
	movem.l	a2/a3,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6/fp7,-(a7)
	move.l	$8(a5),a0
L596
;	register VEC3D* vp = projected;
	lea	$118(a0),a1
;	
;		rfloat32 x2 = WORLDMAP::Scale()/(2F*zoomLevel);
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	$178(a0),fp0
	fmul.s	#$.40000000,fp0
	fdiv.x	fp0,fp2
;		rfloat32 y2 = (x2*aspect)/QTRIG::SinI(viewPitch);
	fmove.x	fp2,fp3
	fmul.s	$17C(a0),fp3
	move.w	$186(a0),d0
	ext.l	d0
	cmp.l	#$5A,d0
	bhs.b	L598
L597
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	bra.b	L605
L598
	cmp.l	#$B4,d0
	bhs.b	L600
L599
	move.l	#$B4,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	bra.b	L605
L600
	cmp.l	#$10E,d0
	bhs.b	L602
L601
	sub.l	#$B4,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	fneg.s	fp0
	bra.b	L605
L602
	cmp.l	#$168,d0
	bhs.b	L604
L603
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	fneg.s	fp0
	bra.b	L605
L604
	sub.l	#$168,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
L605
	fdiv.x	fp0,fp3
;		rfloat32 ox = QTRIG::CosI(vA);
	moveq	#0,d0
	move.w	$188(a0),d0
	cmp.l	#$5A,d0
	bhs.b	L607
L606
	moveq	#$5A,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	bra.b	L614
L607
	cmp.l	#$B4,d0
	bhs.b	L609
L608
	sub.l	#$5A,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	fneg.s	fp0
	bra.b	L614
L609
	cmp.l	#$10E,d0
	bhs.b	L611
L610
	move.l	#$10E,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	fneg.s	fp0
	bra.b	L614
L611
	cmp.l	#$168,d0
	bhs.b	L613
L612
	sub.l	#$10E,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
	bra.b	L614
L613
	move.l	#$1C2,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp0
L614
;		rfloat32 oy = QTRIG::SinI(vA);
	moveq	#0,d0
	move.w	$188(a0),d0
	cmp.l	#$5A,d0
	bhs.b	L616
L615
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp1
	bra	L623
L616
	cmp.l	#$B4,d0
	bhs.b	L618
L617
	move.l	#$B4,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp1
	bra.b	L623
L618
	cmp.l	#$10E,d0
	bhs.b	L620
L619
	sub.l	#$B4,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp1
	fneg.s	fp1
	bra.b	L623
L620
	cmp.l	#$168,d0
	bhs.b	L622
L621
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp1
	fneg.s	fp1
	bra.b	L623
L622
	sub.l	#$168,d0
	move.l	#_sineData__QTRIG,a3
	fmove.s	0(a3,d0.l*4),fp1
L623
;		rfloat32 x1 = x2*ox;
	fmove.x	fp2,fp5
	fmul.x	fp0,fp5
;		rfloat32 y1 = y2*oy;
	fmove.x	fp3,fp4
	fmul.x	fp1,fp4
;		x2 *= oy;
	fmul.x	fp1,fp2
;		y2 *= ox;
	fmul.x	fp0,fp3
;		ox = prjOrigin.x;
	fmove.s	$10C(a0),fp0
;		oy = prjOrigin.y;
	fmove.s	$110(a0),fp1
;		vp[0].x = ox - x1 - y1;
	fmove.x	fp0,fp6
	fsub.x	fp5,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,(a1)
;		vp[0].y = oy - x2 + y2;
	fmove.x	fp1,fp6
	fsub.x	fp2,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,4(a1)
;		vp[1].x = ox + x1 - y1;
	fmove.x	fp0,fp6
	fadd.x	fp5,fp6
	fsub.x	fp4,fp6
	fmove.s	fp6,$C(a1)
;		vp[1].y = oy + x2 + y2;
	fmove.x	fp1,fp6
	fadd.x	fp2,fp6
	fadd.x	fp3,fp6
	fmove.s	fp6,$10(a1)
;		vp[2].x = ox + x1 + y1;
	fmove.x	fp0,fp6
	fadd.x	fp5,fp6
	fadd.x	fp4,fp6
	fmove.s	fp6,$18(a1)
;		vp[2].y = oy + x2 - y2;
	fmove.x	fp1,fp6
	fadd.x	fp2,fp6
	fsub.x	fp3,fp6
	fmove.s	fp6,$1C(a1)
;		vp[3].x = ox - x1 + y1;
	fsub.x	fp5,fp0
	fadd.x	fp4,fp0
	fmove.s	fp0,$24(a1)
;		vp[3].y = oy - x2 - y2;
	fsub.x	fp2,fp1
	fsub.x	fp3,fp1
	fmove.s	fp1,$28(a1)
;		ox = 0.02F;
	fmove.s	#$.3CA3D70A,fp0
;		oy = -ox;
	fmove.x	fp0,fp1
	fneg.s	fp1
;		vp[4].x = oy*y1;
	fmul.x	fp4,fp1
	fmove.s	fp1,$30(a1)
;		vp[4].y = ox*y2;
	fmove.x	fp0,fp1
	fmul.x	fp3,fp1
	fmove.s	fp1,$34(a1)
;		vp[5].x = ox*x1;
	fmove.x	fp0,fp1
	fmul.x	fp5,fp1
	fmove.s	fp1,$3C(a1)
;		vp[5].y = ox*x2;
	fmul.x	fp2,fp0
	fmove.s	fp0,$40(a1)
;	
;		if (vA < 90)
	move.w	$188(a0),d0
	cmp.w	#$5A,d0
	bhs.b	L625
L624
;		
;			boundTL.x = vp[0].x;
	move.l	(a1),$160(a0)
;		boundBR.x = vp[2].x;
	move.l	$18(a1),$16C(a0)
;			boundTL.y = vp[1].y;
	move.l	$10(a1),$164(a0)
;		boundBR.y = vp[3].y;
	move.l	$28(a1),$170(a0)
	bra.b	L630
L625
;		else if (vA < 180)
	move.w	$188(a0),d0
	cmp.w	#$B4,d0
	bhs.b	L627
L626
;		
;			boundTL.x = vp[1].x;
	move.l	$C(a1),$160(a0)
;		boundBR.x = vp[3].x;
	move.l	$24(a1),$16C(a0)
;			boundTL.y = vp[2].y;
	move.l	$1C(a1),$164(a0)
;		boundBR.y = vp[0].y;
	move.l	4(a1),$170(a0)
	bra.b	L630
L627
;		else if (vA < 270)
	move.w	$188(a0),d0
	cmp.w	#$10E,d0
	bhs.b	L629
L628
;		
;			boundTL.x = vp[2].x;
	move.l	$18(a1),$160(a0)
;		boundBR.x = vp[0].x;
	move.l	(a1),$16C(a0)
;			boundTL.y = vp[3].y;
	move.l	$28(a1),$164(a0)
;		boundBR.y = vp[1].y;
	move.l	$10(a1),$170(a0)
	bra.b	L630
L629
;		
;			boundTL.x = vp[3].x;
	move.l	$24(a1),$160(a0)
;		boundBR.x = vp[1].x;
	move.l	$C(a1),$16C(a0)
;			boundTL.y = vp[0].y;
	move.l	4(a1),$164(a0)
;		boundBR.y = vp[2].y;
	move.l	$1C(a1),$170(a0)
L630
;	boundTL.x = ClipFloat(boundTL.x, 0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fmove.s	$160(a0),fp0
	fcmp.x	fp1,fp0
	fboge.b	L632
L631
	fmove.x	fp1,fp0
	bra.b	L636
L632
	fcmp.x	fp2,fp0
	fbole.b	L634
L633
	fmove.x	fp2,fp0
L634
L635
L636
	fmove.s	fp0,$160(a0)
;	boundTL.y = ClipFloat(boundTL.y, 0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fmove.s	$164(a0),fp0
	fcmp.x	fp1,fp0
	fboge.b	L638
L637
	fmove.x	fp1,fp0
	bra.b	L642
L638
	fcmp.x	fp2,fp0
	fbole.b	L640
L639
	fmove.x	fp2,fp0
L640
L641
L642
	fmove.s	fp0,$164(a0)
;	boundBR.x = ClipFloat(boundBR.x, 0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fmove.s	$16C(a0),fp0
	fcmp.x	fp1,fp0
	fboge.b	L644
L643
	fmove.x	fp1,fp0
	bra.b	L648
L644
	fcmp.x	fp2,fp0
	fbole.b	L646
L645
	fmove.x	fp2,fp0
L646
L647
L648
	fmove.s	fp0,$16C(a0)
;	boundBR.y = ClipFloat(boundBR.y, 0F, WORLDMAP::Scale());
	fmove.s	_scale__WORLDMAP,fp2
	fmove.s	#$.00000000,fp1
	fmove.s	$170(a0),fp0
	fcmp.x	fp1,fp0
	fboge.b	L650
L649
	fmove.x	fp1,fp0
	bra.b	L654
L650
	fcmp.x	fp2,fp0
	fbole.b	L652
L651
	fmove.x	fp2,fp0
L652
L653
L654
	fmove.s	fp0,$170(a0)
;	
;		
;			float32 Sz = QTRIG::SinI(360-vA);
	moveq	#0,d0
	move.w	$188(a0),d0
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	cmp.l	#$5A,d0
	bhs.b	L656
L655
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	bra	L663
L656
	cmp.l	#$B4,d0
	bhs.b	L658
L657
	move.l	#$B4,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	bra.b	L663
L658
	cmp.l	#$10E,d0
	bhs.b	L660
L659
	sub.l	#$B4,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	fneg.s	fp1
	bra.b	L663
L660
	cmp.l	#$168,d0
	bhs.b	L662
L661
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	fneg.s	fp1
	bra.b	L663
L662
	sub.l	#$168,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
L663
;			float32 Cz = QTRIG::CosI(360-vA);
	moveq	#0,d0
	move.w	$188(a0),d0
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	cmp.l	#$5A,d0
	bhs.b	L665
L664
	moveq	#$5A,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	bra	L672
L665
	cmp.l	#$B4,d0
	bhs.b	L667
L666
	sub.l	#$5A,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	fneg.s	fp3
	bra.b	L672
L667
	cmp.l	#$10E,d0
	bhs.b	L669
L668
	move.l	#$10E,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	fneg.s	fp3
	bra.b	L672
L669
	cmp.l	#$168,d0
	bhs.b	L671
L670
	sub.l	#$10E,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	bra.b	L672
L671
	move.l	#$1C2,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
L672
;			float32 Sx = QTRIG::SinI(viewPitch);
	move.w	$186(a0),d0
	ext.l	d0
	cmp.l	#$5A,d0
	bhs.b	L674
L673
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp0
	bra	L681
L674
	cmp.l	#$B4,d0
	bhs.b	L676
L675
	move.l	#$B4,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp0
	bra.b	L681
L676
	cmp.l	#$10E,d0
	bhs.b	L678
L677
	sub.l	#$B4,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp0
	fneg.s	fp0
	bra.b	L681
L678
	cmp.l	#$168,d0
	bhs.b	L680
L679
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp0
	fneg.s	fp0
	bra.b	L681
L680
	sub.l	#$168,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp0
L681
;			float32 Cx = QTRIG::CosI(viewPitch);
	move.w	$186(a0),d0
	ext.l	d0
	cmp.l	#$5A,d0
	bhs.b	L683
L682
	moveq	#$5A,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp2
	bra	L690
L683
	cmp.l	#$B4,d0
	bhs.b	L685
L684
	sub.l	#$5A,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp2
	fneg.s	fp2
	bra.b	L690
L685
	cmp.l	#$10E,d0
	bhs.b	L687
L686
	move.l	#$10E,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp2
	fneg.s	fp2
	bra.b	L690
L687
	cmp.l	#$168,d0
	bhs.b	L689
L688
	sub.l	#$10E,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp2
	bra.b	L690
L689
	move.l	#$1C2,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_sineData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp2
L690
;			float32 f4 = zoomLevel/WORLDMAP::Scale();
	move.l	$178(a0),-$14(a5)
	fmove.s	_scale__WORLDMAP,fp4
	fmove.s	-$14(a5),fp5
	fdiv.x	fp4,fp5
	fmove.s	fp5,-$14(a5)
;			float32 f5 = width*f4;
	move.l	a0,a1
	cmp.w	#0,a1
	beq.b	L692
L691
	move.l	4(a1),a1
L692
	move.w	(a1),d0
	ext.l	d0
	fmove.l	d0,fp4
	fmul.s	-$14(a5),fp4
;			rfloat32 *m = matrix1;
	lea	$AC(a0),a1
;			*(m++) = Cz*f5;
	fmove.x	fp3,fp5
	fmul.x	fp4,fp5
	fmove.s	fp5,(a1)+
;			*(m++) = -(Sz*f5);
	fmove.x	fp1,fp5
	fmul.x	fp4,fp5
	fneg.s	fp5
	fmove.s	fp5,(a1)+
;			*(m++) = 0;
	clr.l	(a1)+
;			*(m++) = (width*0.5F)+f5*(Sz*prjOrigin.y - Cz*prjOrigin.x);
	move.l	a0,a2
	cmp.w	#0,a2
	beq.b	L694
L693
	move.l	4(a2),a2
L694
	move.w	(a2),d0
	ext.l	d0
	fmove.l	d0,fp5
	fmul.s	#$.3F000000,fp5
	fmove.x	fp1,fp6
	fmul.s	$110(a0),fp6
	fmove.s	fp6,-$24(a5)
	fmove.x	fp3,fp6
	fmul.s	$10C(a0),fp6
	fmove.s	-$24(a5),fp7
	fsub.x	fp6,fp7
	fmove.s	fp7,-$24(a5)
	fmove.x	fp4,fp6
	fmul.s	-$24(a5),fp6
	fadd.x	fp6,fp5
	fmove.s	fp5,(a1)+
;			*(m++) = -(Sx*Sz*f5);
	fmove.x	fp0,fp5
	fmul.x	fp1,fp5
	fmul.x	fp4,fp5
	fneg.s	fp5
	fmove.s	fp5,(a1)+
;			*(m++) = -(Sx*Cz*f5);
	fmove.x	fp0,fp5
	fmul.x	fp3,fp5
	fmul.x	fp4,fp5
	fneg.s	fp5
	fmove.s	fp5,(a1)+
;			*(m++) = -(Cx*f5);
	fmove.x	fp2,fp5
	fmul.x	fp4,fp5
	fneg.s	fp5
	fmove.s	fp5,(a1)+
;			*(m++) = (aspect*width*0.5F)+(Sx*f5*(Sz*prjOrigin.x + Cz*prjOr
	fmove.s	$17C(a0),fp5
	move.l	a0,a2
	cmp.w	#0,a2
	beq.b	L696
L695
	move.l	4(a2),a2
L696
	move.w	(a2),d0
	ext.l	d0
	fmove.l	d0,fp6
	fmul.x	fp6,fp5
	fmul.s	#$.3F000000,fp5
	fmul.x	fp0,fp4
	fmove.x	fp1,fp6
	fmul.s	$10C(a0),fp6
	fmove.s	fp6,-$1C(a5)
	fmove.x	fp3,fp6
	fmul.s	$110(a0),fp6
	fmove.s	-$1C(a5),fp7
	fadd.x	fp6,fp7
	fmove.s	fp7,-$1C(a5)
	fmul.s	-$1C(a5),fp4
	fadd.x	fp4,fp5
	fmove.s	fp5,(a1)+
;			f5 = f4/(0.75F+(Sx*WORLDMAP::RangeWZ()/WORLDMAP::Scale()) + as
	fmove.s	_maxZ__WORLDMAP,fp4
	fsub.s	_minZ__WORLDMAP,fp4
	fmul.x	fp0,fp4
	fmove.s	_scale__WORLDMAP,fp5
	fdiv.x	fp5,fp4
	fadd.s	#$.3F400000,fp4
	fmove.x	fp2,fp6
	fdiv.x	fp0,fp6
	fmove.s	$17C(a0),fp5
	fmul.x	fp6,fp5
	fadd.x	fp5,fp4
	fmove.s	-$14(a5),fp5
	fdiv.x	fp4,fp5
	fmove.x	fp5,fp4
;			*(m++) = Cx*Sz*f5;
	fmove.x	fp2,fp5
	fmul.x	fp1,fp5
	fmul.x	fp4,fp5
	fmove.s	fp5,(a1)+
;			*(m++) = Cx*Cz*f5;
	fmove.x	fp2,fp5
	fmul.x	fp3,fp5
	fmul.x	fp4,fp5
	fmove.s	fp5,(a1)+
;			*(m++) = -(Sx*f5);
	fmul.x	fp4,fp0
	fneg.s	fp0
	fmove.s	fp0,(a1)+
;			*m     = 0.5F-(Cx*f5*(Sz*prjOrigin.x + Cz*prjOrigin.y));
	fmul.x	fp4,fp2
	fmul.s	$10C(a0),fp1
	fmul.s	$110(a0),fp3
	fadd.x	fp3,fp1
	fmul.x	fp1,fp2
	fmove.s	#$.3F000000,fp0
	fsub.x	fp2,fp0
	fmove.s	fp0,(a1)
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6/fp7
	movem.l	(a7)+,a2/a3
	unlk	a5
	rts

	SECTION "op__multAsgn__VIEW__TRC09TRANSFORM:0",CODE


;VIEW& VIEW::operator*=(const TRANSFORM& t)
	XDEF	op__multAsgn__VIEW__TRC09TRANSFORM
op__multAsgn__VIEW__TRC09TRANSFORM
	movem.l	a2-a4,-(a7)
	fmovem.x fp2/fp3/fp4/fp5,-(a7)
	move.l	$44(a7),a0
	move.l	$40(a7),a3
L698
;	rfloat32* d  = matrix2;
	lea	$DC(a3),a2
;	rfloat32* s1 = matrix1;
	lea	$AC(a3),a1
;	rfloat32* s2 = t.matrix;
	move.l	$60(a0),a0
;	
;			rfloat32 t1 = *(s1++);
	fmove.s	(a1)+,fp0
;			rfloat32 t2 = *(s1++);
	fmove.s	(a1)+,fp2
;			rfloat32 t3 = *(s1++);
	fmove.s	(a1)+,fp1
;			*(d++) = (t1 * s2[0]) + (t2 * s2[4]) + (t3 * s2[8]);
	fmove.s	(a0),fp3
	fmul.x	fp0,fp3
	moveq	#$10,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$20,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[1]) + (t2 * s2[5]) + (t3 * s2[9]);
	moveq	#4,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp3
	fmul.x	fp0,fp3
	moveq	#$14,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$24,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[2]) + (t2 * s2[6]) + (t3 * s2[10]);
	moveq	#$8,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp3
	fmul.x	fp0,fp3
	moveq	#$18,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$28,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[3]) + (t2 * s2[7]) + (t3 * s2[11]) + *(s1++);
	moveq	#$C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp0
	moveq	#$1C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp2
	fadd.x	fp2,fp0
	moveq	#$2C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp1
	fadd.x	fp1,fp0
	fadd.s	(a1)+,fp0
	fmove.s	fp0,(a2)+
;	
;			rfloat32 t1 = *(s1++);
	fmove.s	(a1)+,fp0
;			rfloat32 t2 = *(s1++);
	fmove.s	(a1)+,fp2
;			rfloat32 t3 = *(s1++);
	fmove.s	(a1)+,fp1
;			*(d++) = (t1 * s2[0]) + (t2 * s2[4]) + (t3 * s2[8]);
	fmove.s	(a0),fp3
	fmul.x	fp0,fp3
	moveq	#$10,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$20,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[1]) + (t2 * s2[5]) + (t3 * s2[9]);
	moveq	#4,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp3
	fmul.x	fp0,fp3
	moveq	#$14,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$24,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[2]) + (t2 * s2[6]) + (t3 * s2[10]);
	moveq	#$8,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp3
	fmul.x	fp0,fp3
	moveq	#$18,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$28,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[3]) + (t2 * s2[7]) + (t3 * s2[11]) + *(s1++);
	moveq	#$C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp0
	moveq	#$1C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp2
	fadd.x	fp2,fp0
	moveq	#$2C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp1
	fadd.x	fp1,fp0
	fadd.s	(a1)+,fp0
	fmove.s	fp0,(a2)+
;	
;			rfloat32 t1 = *(s1++);
	fmove.s	(a1)+,fp0
;			rfloat32 t2 = *(s1++);
	fmove.s	(a1)+,fp2
;			rfloat32 t3 = *(s1++);
	fmove.s	(a1)+,fp1
;			*(d++) = (t1 * s2[0]) + (t2 * s2[4]) + (t3 * s2[8]);
	fmove.s	(a0),fp3
	fmul.x	fp0,fp3
	moveq	#$10,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$20,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[1]) + (t2 * s2[5]) + (t3 * s2[9]);
	moveq	#4,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp3
	fmul.x	fp0,fp3
	moveq	#$14,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$24,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[2]) + (t2 * s2[6]) + (t3 * s2[10]);
	moveq	#$8,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp3
	fmul.x	fp0,fp3
	moveq	#$18,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp2,fp4
	fadd.x	fp4,fp3
	moveq	#$28,d0
	add.l	a0,d0
	move.l	d0,a4
	fmove.s	(a4),fp4
	fmul.x	fp1,fp4
	fadd.x	fp4,fp3
	fmove.s	fp3,(a2)+
;			*(d++) = (t1 * s2[3]) + (t2 * s2[7]) + (t3 * s2[11]) + *(s1++);
	moveq	#$C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp0
	moveq	#$1C,d0
	add.l	a0,d0
	move.l	d0,a4
	fmul.s	(a4),fp2
	fadd.x	fp2,fp0
	fmul.s	$2C(a0),fp1
	fadd.x	fp1,fp0
	fmove.s	(a1),fp1
	fadd.x	fp1,fp0
	fmove.s	fp0,(a2)
;	flags |= TRANSFORM_MODEL;
	or.l	#$100,$180(a3)
	move.l	a3,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5
	movem.l	(a7)+,a2-a4
	rts

	SECTION "Transform__VIEW__TP03C3DP10W3D_VertexUj:0",CODE


;void VIEW::Transform(C3D* src, sysVERTEX* dst, uint32 n)
	XDEF	Transform__VIEW__TP03C3DP10W3D_VertexUj
Transform__VIEW__TP03C3DP10W3D_VertexUj
	movem.l	d2-d4/a2-a4,-(a7)
	fmovem.x fp2/fp3/fp4/fp5,-(a7)
	move.l	$58(a7),d3
	move.l	$4C(a7),a1
	move.l	$54(a7),a2
	move.l	$50(a7),a3
L699
;	if (flags & TRANSFORM_MODEL)
	move.l	$180(a1),d0
	and.l	#$100,d0
	beq.b	L701
L700
;	
;		m = matrix2;
	lea	$DC(a1),a0
;		flags &= ~TRANSFORM_MODEL;
	and.l	#-$101,$180(a1)
	bra.b	L702
L701
;		m	= matrix1;
	lea	$AC(a1),a0
L702
;	n++;
	addq.l	#1,d3
;	while(--n)
	bra	L704
L703
;	
;		
;			rfloat32 tx	= src->x;
	fmove.s	(a3),fp4
;			rfloat32 ty	= src->y;
	fmove.s	4(a3),fp3
;			rfloat32 tz = src->z;
	fmove.s	$8(a3),fp2
;			VTX_X(dst) = *(m++)*tx + *(m++)*ty + *(m++)*tz + *(m+
	fmove.s	(a0)+,fp0
	fmul.x	fp4,fp0
	fmove.s	(a0)+,fp1
	fmul.x	fp3,fp1
	fadd.x	fp1,fp0
	fmove.s	(a0)+,fp1
	fmul.x	fp2,fp1
	fadd.x	fp1,fp0
	fadd.s	(a0)+,fp0
	fmove.s	fp0,(a2)
;			VTX_Y(dst) = *(m++)*tx + *(m++)*ty + *(m++)*tz + *(m+
	fmove.s	(a0)+,fp0
	fmul.x	fp4,fp0
	fmove.s	(a0)+,fp1
	fmul.x	fp3,fp1
	fadd.x	fp1,fp0
	fmove.s	(a0)+,fp1
	fmul.x	fp2,fp1
	fadd.x	fp1,fp0
	fadd.s	(a0)+,fp0
	fmove.s	fp0,4(a2)
;			VTX_Z(dst) = *(m++)*tx + *(m++)*ty + *(m++)*tz + *(m+
	fmove.s	(a0)+,fp0
	fmul.x	fp4,fp0
	fmove.s	(a0)+,fp1
	fmul.x	fp3,fp1
	fadd.x	fp1,fp0
	fmove.s	(a0)+,fp1
	fmul.x	fp2,fp1
	fadd.x	fp1,fp0
	fadd.s	(a0)+,fp0
	fmove.d	fp0,$8(a2)
;			m -= 12;
	moveq	#$30,d0
	neg.l	d0
	add.l	d0,a0
;		dst->u			= src->u;
	move.l	$C(a3),$14(a2)
;		dst->v			= src->v;
	move.l	$10(a3),$18(a2)
;		ARGBtoCol((src++)->c, &((dst++)->color));
	move.l	a2,a1
	add.w	#$40,a2
	add.w	#$20,a1
	move.l	a3,a4
	add.w	#$18,a3
	move.l	$14(a4),d1
	move.l	#$FF0000,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$10,d4
	lsr.l	d4,d2
	asl.l	#2,d2
	add.l	#_cTab__xDRAW,d2
	move.l	d2,a4
	move.l	(a4),d2
	move.l	d2,(a1)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	moveq	#$8,d4
	lsr.l	d4,d2
	asl.l	#2,d2
	add.l	#_cTab__xDRAW,d2
	move.l	d2,a4
	move.l	(a4),d2
	move.l	d2,(a1)+
	moveq	#$8,d2
	lsr.l	d2,d0
	move.l	d1,d2
	and.l	d0,d2
	asl.l	#2,d2
	add.l	#_cTab__xDRAW,d2
	move.l	d2,a4
	move.l	(a4),d2
	move.l	d2,(a1)+
	moveq	#$18,d2
	asl.l	d2,d0
	and.l	d0,d1
	moveq	#$18,d0
	lsr.l	d0,d1
	move.l	d1,d0
	asl.l	#2,d0
	add.l	#_cTab__xDRAW,d0
	move.l	d0,a4
	move.l	(a4),(a1)
L704
	subq.l	#1,d3
	tst.l	d3
	bne	L703
L705
	fmovem.x (a7)+,fp2/fp3/fp4/fp5
	movem.l	(a7)+,d2-d4/a2-a4
	rts

	SECTION "Dump__VIEW__TR07ostream:0",CODE


;void VIEW::Dump(ostream& out)
	XDEF	Dump__VIEW__TR07ostream
Dump__VIEW__TR07ostream
	movem.l	d2/d3/a2/a3,-(a7)
	movem.l	$14(a7),a2/a3
L725
;	out.setf(ios::showpoint);
	move.l	#$100,d1
	move.l	a3,a0
	cmp.w	#0,a0
	beq.b	L727
L726
	move.l	(a0),a0
L727
	or.l	d1,$12(a0)
;	out << "\nVIEW Data\n" << "ViewPort dimensions : " << width << "*"
	move.l	#L706,-(a7)
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L729
L728
	move.l	4(a0),a0
L729
	move.w	2(a0),d3
	move.l	#L707,-(a7)
	move.l	a2,a0
	cmp.w	#0,a0
	beq.b	L731
L730
	move.l	4(a0),a0
L731
	move.w	(a0),d2
	move.l	#L708,-(a7)
	move.l	#L709,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,a0
	move.w	d2,d0
	ext.l	d0
	move.l	d0,-(a7)
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,a0
	move.w	d3,d0
	ext.l	d0
	move.l	d0,-(a7)
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "View Zoom           : " << zoomLevel << "\n";
	move.l	#L706,-(a7)
	move.l	$178(a2),-(a7)
	move.l	#L710,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "View Angle          : " << viewAngle << "\n";
	move.l	#L706,-(a7)
	move.w	$184(a2),d2
	move.l	#L711,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,a0
	move.w	d2,d0
	ext.l	d0
	move.l	d0,-(a7)
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "Transform Angle     : " << vA << "\n";
	move.l	#L706,-(a7)
	move.w	$188(a2),d2
	move.l	#L712,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,a0
	moveq	#0,d0
	move.w	d2,d0
	move.l	d0,-(a7)
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__TUj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "View Pitch          : " << viewPitch << "\n";
	move.l	#L706,-(a7)
	move.w	$186(a2),d2
	move.l	#L713,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,a0
	move.w	d2,d0
	ext.l	d0
	move.l	d0,-(a7)
	move.l	a0,-(a7)
	jsr	op__leftshift__ostream__Tj
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "Projection Origin   : " << prjOrigin.x << ", " << prjOrigi
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	move.l	$110(a2),-(a7)
	move.l	#L715,-(a7)
	move.l	$10C(a2),-(a7)
	move.l	#L716,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "Transform TL        : " << projected[0].x << ", " << proje
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	move.l	$11C(a2),-(a7)
	move.l	#L715,-(a7)
	move.l	$118(a2),-(a7)
	move.l	#L717,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "Transform TR        : " << projected[1].x << ", " << proje
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	lea	$118(a2),a0
	move.l	$10(a0),-(a7)
	move.l	#L715,-(a7)
	lea	$118(a2),a0
	move.l	$C(a0),-(a7)
	move.l	#L718,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "Transform BR        : " << projected[2].x << ", " << proje
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	lea	$118(a2),a0
	move.l	$1C(a0),-(a7)
	move.l	#L715,-(a7)
	lea	$118(a2),a0
	move.l	$18(a0),-(a7)
	move.l	#L719,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "Transform BL        : " << projected[3].x << ", " << proje
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	lea	$118(a2),a0
	move.l	$28(a0),-(a7)
	move.l	#L715,-(a7)
	lea	$118(a2),a0
	move.l	$24(a0),-(a7)
	move.l	#L720,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "BoundingBox TL      : " << boundTL.x << ", " << boundTL.y 
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	move.l	$164(a2),-(a7)
	move.l	#L715,-(a7)
	move.l	$160(a2),-(a7)
	move.l	#L721,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "BoundingBox BR      : " << boundBR.x << ", " << boundBR.y 
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	move.l	$170(a2),-(a7)
	move.l	#L715,-(a7)
	move.l	$16C(a2),-(a7)
	move.l	#L722,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "DeltaUp             : " << projected[4].x << ", " << proje
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	lea	$118(a2),a0
	move.l	$34(a0),-(a7)
	move.l	#L715,-(a7)
	lea	$118(a2),a0
	move.l	$30(a0),-(a7)
	move.l	#L723,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
;	out << "DeltaRight          : " << projected[5].x << ", " << proje
	move.l	#L706,-(a7)
	move.l	_unitName__WORLDMAP,a0
	move.l	a0,-(a7)
	move.l	#L714,-(a7)
	lea	$118(a2),a0
	move.l	$40(a0),-(a7)
	move.l	#L715,-(a7)
	lea	$118(a2),a0
	move.l	$3C(a0),-(a7)
	move.l	#L724,-(a7)
	move.l	a3,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__Tf
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	move.l	d0,-(a7)
	jsr	op__leftshift__ostream__TPCc
	addq.w	#$8,a7
	movem.l	(a7)+,d2/d3/a2/a3
	rts

L706
	dc.b	$A,0
L709
	dc.b	$A,'VIEW Data',$A,0
L714
	dc.b	' ',0
L707
	dc.b	'*',0
L715
	dc.b	', ',0
L722
	dc.b	'BoundingBox BR      : ',0
L721
	dc.b	'BoundingBox TL      : ',0
L724
	dc.b	'DeltaRight          : ',0
L723
	dc.b	'DeltaUp             : ',0
L716
	dc.b	'Projection Origin   : ',0
L712
	dc.b	'Transform Angle     : ',0
L720
	dc.b	'Transform BL        : ',0
L719
	dc.b	'Transform BR        : ',0
L717
	dc.b	'Transform TL        : ',0
L718
	dc.b	'Transform TR        : ',0
L711
	dc.b	'View Angle          : ',0
L713
	dc.b	'View Pitch          : ',0
L710
	dc.b	'View Zoom           : ',0
L708
	dc.b	'ViewPort dimensions : ',0

	SECTION "PointInside__VIEW__Tff:0",CODE


;bool VIEW::PointInside(float32 x, float32 y)
	XDEF	PointInside__VIEW__Tff
PointInside__VIEW__Tff
	move.l	a2,-(a7)
	fmovem.x fp2/fp3/fp4/fp5/fp6,-(a7)
	move.l	$44(a7),a1
	fmove.s	$48(a7),fp0
	fmove.s	$4C(a7),fp2
L732
;	if (flags & BOUNDS_PERP)
	move.l	$180(a1),d0
	and.l	#$10000,d0
	beq.b	L739
L733
;	
;		if (x >= boundTL.x && y <= boundTL.y && x <= boundBR.x && y >= b
	fcmp.s	$160(a1),fp0
	fbolt.b	L738
L734
	fcmp.s	$164(a1),fp2
	fbogt.b	L738
L735
	fcmp.s	$16C(a1),fp0
	fbogt.b	L738
L736
	fcmp.s	$170(a1),fp2
	fbolt.b	L738
L737
	moveq	#1,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L738
	moveq	#0,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L739
;	
;		rfloat32 pp = QTRIG::CotI(vA);
	moveq	#0,d0
	move.w	$188(a1),d0
	cmp.l	#$5A,d0
	bhs.b	L741
L740
	moveq	#$5A,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	fneg.s	fp1
	bra.b	L748
L741
	cmp.l	#$B4,d0
	bhs.b	L743
L742
	sub.l	#$5A,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	bra.b	L748
L743
	cmp.l	#$10E,d0
	bhs.b	L745
L744
	move.l	#$10E,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	fneg.s	fp1
	bra.b	L748
L745
	cmp.l	#$168,d0
	bhs.b	L747
L746
	sub.l	#$10E,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	bra.b	L748
L747
	move.l	#$1C2,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp1
	fneg.s	fp1
L748
;		rfloat32 pl = QTRIG::TanI(vA);
	moveq	#0,d0
	move.w	$188(a1),d0
	cmp.l	#$5A,d0
	bhs.b	L750
L749
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	bra.b	L757
L750
	cmp.l	#$B4,d0
	bhs.b	L752
L751
	move.l	#$B4,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	fneg.s	fp3
	bra.b	L757
L752
	cmp.l	#$10E,d0
	bhs.b	L754
L753
	sub.l	#$B4,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	bra.b	L757
L754
	cmp.l	#$168,d0
	bhs.b	L756
L755
	move.l	#$168,d1
	sub.l	d0,d1
	move.l	d1,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
	fneg.s	fp3
	bra.b	L757
L756
	sub.l	#$168,d0
	move.l	#_gradData__QTRIG,a2
	fmove.s	0(a2,d0.l*4),fp3
L757
;		register VEC3D* vp = projected;
	lea	$118(a1),a0
;		if (vA < 90) // 1st quarter
	move.w	$188(a1),d0
	cmp.w	#$5A,d0
	bhs	L764
L758
;		
;			rfloat32 yTest = vp[0].y+(x-vp[0].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;			if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L763
L759
;			
;				yTest = vp[0].y+(x-vp[0].x)*pp;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp1,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;				if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L763
L760
;				
;					yTest = vp[2].y+(x-vp[2].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	$18(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	$1C(a0),fp4
	fadd.x	fp5,fp4
;					if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L763
L761
;					
;						yTest = vp[2].y+(x-vp[2].x)*pp;
	fmove.s	$1C(a0),fp4
	fsub.s	$18(a0),fp0
	fmul.x	fp1,fp0
	fadd.x	fp0,fp4
;						if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L763
L762
	moveq	#1,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L763
	moveq	#0,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L764
;		else if (vA < 180) // 2nd quarter
	move.w	$188(a1),d0
	cmp.w	#$B4,d0
	bhs	L771
L765
;		
;			rfloat32 yTest = vp[0].y+(x-vp[0].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;			if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L770
L766
;			
;				yTest = vp[0].y+(x-vp[0].x)*pp;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp1,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;				if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L770
L767
;				
;					yTest = vp[2].y+(x-vp[2].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	$18(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	$1C(a0),fp4
	fadd.x	fp5,fp4
;					if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L770
L768
;					
;						yTest = vp[2].y+(x-vp[2].x)*pp;
	fmove.s	$1C(a0),fp4
	fsub.s	$18(a0),fp0
	fmul.x	fp1,fp0
	fadd.x	fp0,fp4
;						if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L770
L769
	moveq	#1,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L770
	moveq	#0,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L771
;		else if (vA < 270) // 3rd quarter
	move.w	$188(a1),d0
	cmp.w	#$10E,d0
	bhs	L778
L772
;		
;			rfloat32 yTest = vp[0].y+(x-vp[0].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;			if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L777
L773
;			
;				yTest = vp[0].y+(x-vp[0].x)*pp;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp1,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;				if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L777
L774
;				
;					yTest = vp[2].y+(x-vp[2].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	$18(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	$1C(a0),fp4
	fadd.x	fp5,fp4
;					if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L777
L775
;					
;						yTest = vp[2].y+(x-vp[2].x)*pp;
	fmove.s	$1C(a0),fp4
	fsub.s	$18(a0),fp0
	fmul.x	fp1,fp0
	fadd.x	fp0,fp4
;						if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L777
L776
	moveq	#1,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L777
	moveq	#0,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L778
;		
;			rfloat32 yTest = vp[0].y+(x-vp[0].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;			if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L783
L779
;			
;				yTest = vp[0].y+(x-vp[0].x)*pp;
	fmove.x	fp0,fp5
	fsub.s	(a0),fp5
	fmul.x	fp1,fp5
	fmove.s	4(a0),fp4
	fadd.x	fp5,fp4
;				if (y <= yTest)
	fcmp.x	fp4,fp2
	fbogt.b	L783
L780
;				
;					yTest = vp[2].y+(x-vp[2].x)*pl;
	fmove.x	fp0,fp5
	fsub.s	$18(a0),fp5
	fmul.x	fp3,fp5
	fmove.s	$1C(a0),fp4
	fadd.x	fp5,fp4
;					if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L783
L781
;					
;						yTest = vp[2].y+(x-vp[2].x)*pp;
	fmove.s	$1C(a0),fp4
	fsub.s	$18(a0),fp0
	fmul.x	fp1,fp0
	fadd.x	fp0,fp4
;						if (y >= yTest)
	fcmp.x	fp4,fp2
	fbolt.b	L783
L782
	moveq	#1,d0
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts
L783
;							return 
	fmovem.x (a7)+,fp2/fp3/fp4/fp5/fp6
	move.l	(a7)+,a2
	rts

	SECTION "_0dt__xINPUT__T:0",CODE

	CNOP	0,2

	XDEF	_0dt__xINPUT__T
_0dt__xINPUT__T
L784
	rts

	SECTION "_0dt__AREA__T:0",CODE

	CNOP	0,2

	XDEF	_0dt__AREA__T
_0dt__AREA__T
L785
	rts

	SECTION "_0dt__xDISPLAY__T:0",CODE

	CNOP	0,2

	XDEF	_0dt__xDISPLAY__T
_0dt__xDISPLAY__T
	move.l	4(a7),a0
L786
	btst	#0,$8(a0)
L787
L788
	btst	#1,$8(a0)
	beq.b	L790
L789
	move.l	(a0),-(a7)
	jsr	_0dt__xLOCKABLE__T
	addq.w	#4,a7
L790
	rts

	SECTION "_0dt__xDISPLAYIO__T:0",CODE

	CNOP	0,2

	XDEF	_0dt__xDISPLAYIO__T
_0dt__xDISPLAYIO__T
	move.l	4(a7),a0
L791
	btst	#0,$C(a0)
	beq.b	L797
L792
	move.l	(a0),a0
	btst	#0,$8(a0)
L793
L794
	btst	#1,$8(a0)
	beq.b	L796
L795
	move.l	(a0),-(a7)
	jsr	_0dt__xLOCKABLE__T
	addq.w	#4,a7
L796
L797
	rts

	SECTION "_0dt__xDBWIN__T:0",CODE

	CNOP	0,2

	XDEF	_0dt__xDBWIN__T
_0dt__xDBWIN__T
	move.l	a2,-(a7)
	move.l	$8(a7),a2
L798
	move.l	a2,-(a7)
	jsr	Close__xDBWIN__T
	addq.w	#4,a7
	pea	$7E(a2)
	jsr	_0dt__xSURFACE__T
	addq.w	#4,a7
	pea	$5E(a2)
	jsr	_0dt__xSURFACE__T
	addq.w	#4,a7
	move.l	a2,a0
	btst	#0,$8(a0)
L799
L800
	btst	#1,$8(a0)
	beq.b	L802
L801
	move.l	(a0),-(a7)
	jsr	_0dt__xLOCKABLE__T
	addq.w	#4,a7
L802
	move.l	(a7)+,a2
	rts

	END
